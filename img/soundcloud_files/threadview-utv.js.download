(window.webpackJsonp=window.webpackJsonp||[]).push([["threadview-utv"],{"+a0K":function(e,t){function n(e,t){return e===t||e!=e&&t!=t}e.exports=n},"/Dz0":function(e,t,n){"use strict";n.d(t,"a",function(){return i});n.d(t,"b",function(){return o});var a=n("Zsd8"),r=n("wwi/"),i=Object(a.createAction)(r.g);function o(){return function(e){e(i())}}},"/EZN":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=["video/*","audio/*","application/json","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/msword","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","image/gif","image/jpeg","image/jpg","image/png","image/tiff","text/calendar","text/css","text/csv","text/plain"]},"/Maw":function(e,t,n){"use strict";var a=n("TMxi"),r=n("Ktcs"),i=n.n(r),o=n("VfuR"),s=n.n(o),c=n("9f1P"),u=n.n(c),l=n("NrIs"),d="default",p="on-dark",m=n("yN1k"),h=n("0wDu"),f=n("PrNr"),b=h.a,g=h.b,v=h.g,O=h.h,j=function(){return f.l},y=function(e){var t=e.theme;switch(e.use){case p:return Object(c.css)(["background-color:",";"],j(t));case d:default:return null}},x=function(e){var t=e.theme;return Object(c.css)(["cursor:not-allowed;background-color:",";"],b(t))},C=function(e){var t=e.theme;return Object(c.css)(["color:",";cursor:not-allowed;&::after{color:",";}"],g(t),g(t))},k=u.a.input.withConfig({displayName:"VizExInput__StyledTextInput",componentId:"r1x2l3-0"})(["",";height:100%;width:100%;line-height:22px;font-size:16px;padding-left:10px;padding-right:10px;border:none;border-radius:3px;background:transparent;",";:focus{outline:none;}::placeholder{color:",";}"],m.a,function(e){return e.disabled&&C(e)},function(e){var t=e.theme;return v(t)}),E=u.a.div.withConfig({displayName:"VizExInput__InputContainer",componentId:"r1x2l3-1"})(["height:42px;line-height:22px;font-size:16px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border:1px solid;border-color:",";background-color:",";:focus-within{border-color:",";}border-radius:3px;"," ",";"],function(e){var t=e.theme;return e.focus?O(t):Object(h.f)(t)},function(e){var t=e.theme;return Object(h.e)(t)},function(e){var t=e.theme;return O(t)},y,function(e){return e.disabled&&x(e)}),T=function(e){var t=e.suffix,n=e.prefix,r=e.disabled,o=e.placeholder,s=e.value,c=e.onChange,u=e.containerStyles,l=e.theme,d=e.use,p=e.focus,m=Object(a.a)(e,["suffix","prefix","disabled","placeholder","value","onChange","containerStyles","theme","use","focus"]);return i.a.createElement(E,{disabled:r,style:u,theme:l,use:d,focus:p,"data-testid":"VizExInput-Container"},n,i.a.createElement(k,Object.assign({"aria-disabled":r,disabled:r,placeholder:o,value:s,onChange:c,theme:l,use:d,"data-testid":"VizExInput-Input"},m)),t)};T.displayName="VizExInput";T.defaultProps={placeholder:""};T.propTypes={containerStyles:s.a.object,disabled:s.a.bool,focus:s.a.bool,onChange:s.a.func,onInput:s.a.func,placeholder:s.a.string,prefix:s.a.node,suffix:s.a.node,theme:l.a,use:s.a.oneOfType([d,p]),value:s.a.string};t.a=T},"/TWJ":function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},"/rM/":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("WPep"),r=n("nEm4"),i=function(e){return Object(r.isTypingMessage)(e)&&Object(a.isFromVisitor)(e)}},"0IL2":function(e,t,n){"use strict";var a=n("4FzD"),r=n("VfuR"),i=n.n(r),o=n("Ktcs"),s=n.n(o),c=n("9f1P"),u=n.n(c),l=n("Umjh"),d=n("VdXU"),p=n("sl/w"),m=n("eP/i"),h=n("qCVG"),f=n("gFbD"),b=n("fzij"),g=u.a.div.withConfig({displayName:"ConsentPrompt__Container",componentId:"sc-1843aad-0"})(["border-top:2px solid ",";display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;"],m.f),v=u()(b.a).withConfig({displayName:"ConsentPrompt__SmallNoParagraphPadding",componentId:"sc-1843aad-1"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),O=u()(d.a).withConfig({displayName:"ConsentPrompt__FullWidthButton",componentId:"sc-1843aad-2"})(["flex:0 1 100%;"]),j=u.a.div.withConfig({displayName:"ConsentPrompt__FlexWrapper",componentId:"sc-1843aad-3"})(["display:flex;flex-direction:row;width:100%;margin:12px 0 8px 0;"]),y=function(e){var t=e.message,n=e.onClick,r=e.showButton,i=Object(o.useState)(!1),c=Object(a.a)(i,2),u=c[0],d=c[1],m=function(){n();d(!0)};return s.a.createElement(g,{"data-test-id":"gdpr-consent-prompt"},s.a.createElement(v,{use:"help","data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(h.a)(t)}}),s.a.createElement(j,null,r&&s.a.createElement(l.a,{currentState:u?"submitting":"ready",Button:O,"data-test-id":"gdpr-consent-agree-button",onClick:m},s.a.createElement(f.a,null,function(e){return s.a.createElement(p.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:e}})}))))};y.propTypes={message:i.a.string.isRequired,onClick:i.a.func.isRequired,showButton:i.a.bool.isRequired};y.displayName="ConsentPrompt";t.a=y},"1HZx":function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("bYHN"),c=n("9di4"),u=n("OwpT"),l=n.n(u),d=n("A3yT"),p=n("xYYH"),m=n("mKxs"),h=n("nEWr"),f=n("E7sj"),b=n.n(f),g=n("QYOI"),v=n("VfuR"),O=n.n(v),j=n("Ktcs"),y=n.n(j),x=n("r1tY"),C=n.n(x),k=n("9f1P"),E=n.n(k),T=E.a.div.withConfig({displayName:"MessageComposer__FullWidth",componentId:"sc-16yy9mp-0"})(["width:100%;"]),w=E.a.div.withConfig({displayName:"MessageComposer__InputWrapper",componentId:"sc-16yy9mp-1"})(["display:flex;width:100%;align-items:center;justify-content:space-between;flex-wrap:nowrap;"]),I=function(e){Object(c.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"render",value:function(){var e="input-container m-bottom-2"+(this.props.showingHsBranding?"":" no-branding");return y.a.createElement("div",{className:e},this.props.fileUploads&&y.a.createElement(T,null,this.props.fileUploads()),y.a.createElement(w,null,this.props.inputToRender(),this.props.children&&y.a.createElement("div",{className:"display-flex flex-row m-left-1 no-shrink"},this.props.children)))}}]);return t}(j.Component);I.propTypes={children:O.a.node,fileUploads:O.a.func,inputToRender:O.a.func.isRequired,showingHsBranding:O.a.bool};I.defaultProps={fileUploads:null,showingHsBranding:!1};I.displayName="MessageComposer";var S=I,R=n("iu1j"),A=y.a.createContext(void 0),M=A.Consumer,P=(A.Provider,n("4FzD")),N=n("TMxi"),q=function(e){Object(j.useEffect)(function(){var t=function(t){if(e(t)){t.stopPropagation();t.preventDefault()}};document.addEventListener("touchmove",t,{passive:!1});return function(){document.removeEventListener("touchmove",t)}},[e])},F=function(){},_=function(e){var t=y.a.forwardRef(function(t,n){var a=t.onBlur,r=t.onFocus,i=Object(N.a)(t,["onBlur","onFocus"]),o=n||Object(j.useRef)(),s=Object(j.useState)(null),c=Object(P.a)(s,2),u=c[0],l=c[1];q(function(e){if(u&&e.target!==u){o.current&&o.current.blur();l(null);return!1}return Boolean(u)});var d=function(e){l(null);a(e)},p=function(e){e.target&&l(e.target);r(e)};return y.a.createElement(e,Object.assign({},i,{ref:o,onFocus:p,onBlur:d}))});t.propTypes={onBlur:O.a.func,onFocus:O.a.func};t.defaultProps={onBlur:F,onFocus:F};t.displayName="Component";return t};_.propTypes={innerRef:O.a.func.isRequired,onBlur:O.a.func.isRequired,onFocus:O.a.func.isRequired};var L=_,B=n("NrIs"),D=n("fzij"),z=E.a.div.withConfig({displayName:"VizExFormControl__FormControlWrapper",componentId:"unxire-0"})(["width:100%;flex-basis:100%;"]),V=function(e){Object(c.a)(t,e);function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).getChildProps=function(e){var t=e.ariaLabel,n=e.newError,a=e.newRequired,r=e.validationMessage,i=e.fallbackId,o={"aria-label":t,required:a,"aria-invalid":n,"aria-required":a,ref:e.ref};i&&(o.id=i);n&&(o.error=r);return o};return n}Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e["aria-label"],n=e.error,a=e.validationMessage,r=e.required,i=e.theme,o=e.children,s=Object(N.a)(e,["aria-label","error","validationMessage","required","theme","children"]),c=o(Object.assign({},this.getChildProps({ariaLabel:t,newError:n,newRequired:r,validationMessage:a})));return y.a.createElement(z,s,c,a?y.a.createElement(D.a,{use:n?"error":"default",theme:i},a):null)}}]);return t}(y.a.Component);V.displayName="VizExFormControl";V.propTypes={"aria-label":O.a.string,children:O.a.func.isRequired,error:O.a.bool,required:O.a.bool.isRequired,theme:B.a,validationMessage:O.a.node};V.defaultProps={error:!1,required:!1};var H=V,U=n("L0DB"),W=n("0wDu"),Q=W.f,Y=W.e,J=W.c,G=W.a,K=W.b,Z=W.g,X="unstyled",$="default",ee=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},te=window.navigator?navigator.userAgent.toLowerCase():"",ne=function(){return te.includes("trident/")},ae=function(e){return""===e.trim()||"<br />"===e.trim()||"<br>"===e.trim()||"<br/>"===e.trim()},re=function(){return Object(k.css)(["outline:none;"])},ie=function(e){var t=e.use,n=e.theme;switch(t){case X:return Object(k.css)(["border:none;background-color:transparent;"]);case $:default:return Object(k.css)(["border:2px solid;border-color:",";background-color:",";"],Q(n),Y(n))}},oe=function(e){var t=e.theme;return Object(k.css)(["cursor:not-allowed;background-color:",";color:",";&[contenteditable][placeholder]:empty::after{color:",";cursor:not-allowed;}"],G(t),K(t),K(t))},se=function(e){var t=e.theme;return Object(k.css)(["border:2px solid;border-color:",";"],J(t))},ce=E.a.div.withConfig({displayName:"VizExExpandingInput__StyledInput",componentId:"sc-17oasje-0"})(["border-radius:3px;font-size:16px;line-height:22px;min-height:40px;max-height:",";overflow-x:hidden;overflow-y:auto;padding:8px;position:relative;width:100%;flex-basis:100%;word-break:break-word;cursor:text;",";",";@supports (-webkit-touch-callout:none){cursor:pointer;}&[contenteditable][placeholder]:empty{overflow-y:hidden;}&[contenteditable][placeholder]:empty::after{display:block;content:attr(placeholder);position:relative;color:",";background-color:transparent;cursor:text;user-select:none;font-size:16px;line-height:22px;height:22px;}@media all and (-ms-high-contrast:none){&[contenteditable][placeholder]:empty::after{position:absolute;top:50%;transform:translateY(-50%);}}:focus{",";}",";",";"],function(e){var t=e.maxHeight;return"number"==typeof t?t+"px":t||"150px"},function(e){return e.focus&&re()},ie,function(e){var t=e.theme;return Z(t)},re,function(e){return e.disabled&&oe(e)},function(e){return e.error&&se(e)}),ue=y.a.forwardRef(function(e,t){var n=t||Object(j.useRef)(),a=e.onInput,r=e.placeholder,i=e.onChange,o=e.value,s=e.maxHeight,c=e.disabled,u=e.shouldAutofocus,l=Object(N.a)(e,["onInput","placeholder","onChange","value","maxHeight","disabled","shouldAutofocus"]),d=function(e){e.persist();n.current.innerHTML&&ae(n.current.innerHTML)&&(n.current.innerHTML="");e.target.value=e.target.innerText;for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];U.a.apply(void 0,[i,e].concat(r));U.a.apply(void 0,[a,e].concat(r))},p=function(e){e.preventDefault();var t;try{t=e.clipboardData.getData("text/plain")}catch(n){t=ee(e.clipboardData.getData("text"))}document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t)};Object(j.useLayoutEffect)(function(){null!==o&&void 0!==o&&o!==n.current.innerText&&(n.current.innerText=o)},[n,o]);Object(j.useEffect)(function(){u&&n&&n.current&&n.current.focus()},[]);var m=ne()?{onKeyUp:d}:{onInput:d};return y.a.createElement(ce,Object.assign({},l,{ref:n,placeholder:r},m,{onPaste:p,contentEditable:!c,maxHeight:s,disabled:c,"aria-disabled":c}))});ue.displayName="VizExExpandingInput";ue.propTypes={disabled:O.a.bool,error:O.a.bool,maxHeight:O.a.number,onChange:O.a.func,onInput:O.a.func,placeholder:O.a.string,shouldAutofocus:O.a.bool,theme:B.a,use:O.a.oneOf([X,$]),value:O.a.string};var le=L(ue);function de(e){var t=e.disabled,n=e.error,a=e.messageText,r=e.onChange,i=e.onInputBlur,o=e.onInputFocus,s=e.onKeyDown,c=e.setEditorRef,u=e.validationMessage,l=e.showQuickReplyPlaceholder;return y.a.createElement(M,null,function(e){return y.a.createElement(H,{"aria-label":b.a.text(l?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:e}),validationMessage:u,error:n,required:!0},function(u){return y.a.createElement(le,Object.assign({},u,{use:"unstyled",error:n,className:"widget-textarea message-box","data-test-id":"widget-textarea",tabIndex:"0",innerRef:c,maxHeight:100,placeholder:b.a.text(l?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:e}),disabled:t,onChange:r,onKeyDown:s,value:a,onFocus:o,onBlur:i,shouldAutofocus:!0}))})})}de.propTypes={disabled:O.a.bool.isRequired,error:O.a.bool.isRequired,messageText:O.a.string.isRequired,onChange:O.a.func.isRequired,onInputBlur:O.a.func,onInputFocus:O.a.func,onKeyDown:O.a.func.isRequired,setEditorRef:O.a.func.isRequired,showQuickReplyPlaceholder:O.a.bool.isRequired,validationMessage:O.a.string.isRequired};de.displayName="TextInput";var pe=de,me=n("ng7A"),he=n("KziI"),fe=n("Fjoq"),be=n("/EZN"),ge=n("A5YI"),ve=n("nzPM"),Oe=n("7LhL"),je=n("CuMv"),ye=13,xe=E.a.div.withConfig({displayName:"MessageEditor__FileUploadWrapper",componentId:"sc-8t1ye7-0"})(["display:flex;overflow:auto;& > *:not(:last-child){margin-right:8px;}"]),Ce=function(e){Object(c.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={messageText:e.stagedMessageEditorText||""};n.handleChange=n.handleChange.bind(Object(s.a)(n));n.handlePublish=n.handlePublish.bind(Object(s.a)(n));n.handleKeyDown=n.handleKeyDown.bind(Object(s.a)(n));n.setEditorRef=n.setEditorRef.bind(Object(s.a)(n));n.focusEditor=n.focusEditor.bind(Object(s.a)(n));n.renderTextInput=n.renderTextInput.bind(Object(s.a)(n));n.renderFileUploads=n.renderFileUploads.bind(Object(s.a)(n));n.handleSelectAttachmentFiles=n.handleSelectAttachmentFiles.bind(Object(s.a)(n));n.editorRef=null;n.onInputFocus=n.onInputFocus.bind(Object(s.a)(n));n.onInputBlur=n.onInputBlur.bind(Object(s.a)(n));return n}Object(r.a)(t,[{key:"componentDidMount",value:function(){this.focusEditor()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!e.disabled&&this.props.disabled&&this.focusEditor()}},{key:"focusEditor",value:function(){var e=this.editorRef;e&&setTimeout(function(){e.focus()})}},{key:"getMessageText",value:function(){return this.state.messageText}},{key:"messageTextIsWithinLimit",value:function(){return this.getMessageText().length<h.a}},{key:"hasAttachments",value:function(){return this.props.stagedAttachments&&this.props.stagedAttachments.size}},{key:"attachmentsAreValid",value:function(){return!this.props.stagedAttachments||this.props.stagedAttachments.every(p.isUploadCompleted)}},{key:"canUploadAttachment",value:function(){return!this.props.hasUnansweredQuickReplyMessage&&(!this.props.stagedAttachments||!this.props.stagedAttachments.size)}},{key:"messageContentsAreValid",value:function(){var e=this.getMessageText()&&""!==this.getMessageText().trim();return this.messageTextIsWithinLimit()&&this.attachmentsAreValid()&&(e||this.hasAttachments())}},{key:"canPublish",value:function(){var e=this.props,t=e.disabled,n=e.networkOffline,a=e.disablePublish;return this.messageContentsAreValid()&&!n&&!t&&!a}},{key:"handleChange",value:function(e){var t=this.props,n=t.chatInputChanged,a=t.shouldSendInputStagingEvent,r=t.inputStaging,i=e.target.value;this.setState({messageText:i});a&&!i&&r(i,!0);""!==i&&n(i)}},{key:"handleKeyDown",value:function(e){if(e.keyCode===ye&&!1===e.shiftKey){this.handlePublish();e.preventDefault();e.stopPropagation();return!1}return!0}},{key:"handlePublish",value:function(){var e=this.props.inputStaging;if(this.canPublish()){var t=this.getMessageText();this.props.publishMessage({text:t,richText:"<div>"+l.a.link(Object(je.a)(t),{stripPrefix:!1})+"</div>"});this.setState({messageText:""});e("",!0);var n=this.props,a=n.mobile,r=n.isOnFocus;if(a&&Object(me.isIOSDevice)()&&!r)return;this.focusEditor()}}},{key:"getValidationMessage",value:function(){return this.messageTextIsWithinLimit()?"":b.a.text("conversations-visitor-ui.chatTextArea.validationMessage")}},{key:"setEditorRef",value:function(e){var t=C.a.findDOMNode(e);this.editorRef=t}},{key:"handleSelectAttachmentFiles",value:function(e){var t=e.files;this.props.onSelectAttachmentFiles({files:t});this.focusEditor()}},{key:"onInputFocus",value:function(){var e=this.props,t=e.toggleOnAndOffInputFocus;e.disabled||t(!0)}},{key:"onInputBlur",value:function(){(0,this.props.toggleOnAndOffInputFocus)(!1)}},{key:"renderTextInput",value:function(){return y.a.createElement(pe,{disabled:this.props.disabled||this.props.networkOffline,error:!this.messageTextIsWithinLimit(),messageText:this.state.messageText,onChange:this.handleChange,onKeyDown:this.handleKeyDown,showQuickReplyPlaceholder:this.props.showQuickReplyPlaceholder,setEditorRef:this.setEditorRef,showingHsBranding:this.props.showingHsBranding,validationMessage:this.getValidationMessage(),onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur})}},{key:"renderFileUploads",value:function(){var e=this;return this.props.stagedAttachments&&this.props.stagedAttachments.size?y.a.createElement(xe,{className:"m-bottom-2"+(this.props.showingHsBranding?" m-top-2":"")},this.props.stagedAttachments.map(function(t){return y.a.createElement(R.a,{key:Object(d.getLocalId)(t),attachment:t,onRemove:function(){e.props.onRemoveAttachment({attachment:t})}})})):null}},{key:"render",value:function(){var e=Object(fe.c)(this.props.coloring)?null:Object(fe.a)(this.props.coloring),t=!this.canPublish();return y.a.createElement(S,{inputToRender:this.renderTextInput,fileUploads:this.renderFileUploads,showingHsBranding:this.props.showingHsBranding},y.a.createElement(y.a.Fragment,null,this.props.supportsAttachments&&!this.props.shouldDisableAttachment?y.a.createElement("div",{className:this.props.mobile?"m-right-3":""},y.a.createElement(he.a,{accept:this.props.fileTypes,color:e,disabled:!this.canUploadAttachment(),mobile:this.props.mobile,onClick:this.props.onAttachmentButtonClick,onSelectFiles:this.handleSelectAttachmentFiles,maxAttachmentFileSize:this.props.maxAttachmentFileSize})):null,y.a.createElement(ge.a,{className:"chat-send-button","data-test-id":"chat-send-button",disabled:t,shape:"circle",onClick:this.handlePublish,use:"transparent-on-background","aria-label":b.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.send")},y.a.createElement(Oe.a,{icon:y.a.createElement(ve.a,null)}))))}}]);return t}(j.Component);Ce.propTypes={chatInputChanged:O.a.func.isRequired,coloring:Object(m.a)("ColoringRecord"),disablePublish:O.a.bool.isRequired,disabled:O.a.bool.isRequired,fileTypes:O.a.arrayOf(O.a.string).isRequired,hasUnansweredQuickReplyMessage:O.a.bool.isRequired,inputStaging:O.a.func.isRequired,isOnFocus:O.a.bool,maxAttachmentFileSize:O.a.number.isRequired,mobile:O.a.bool,networkOffline:O.a.bool.isRequired,onAttachmentButtonClick:O.a.func,onRemoveAttachment:O.a.func.isRequired,onSelectAttachmentFiles:O.a.func.isRequired,publishMessage:O.a.func.isRequired,shouldDisableAttachment:O.a.bool,shouldSendInputStagingEvent:O.a.bool.isRequired,showQuickReplyPlaceholder:O.a.bool.isRequired,showingHsBranding:O.a.bool,stagedAttachments:O.a.instanceOf(g.List),stagedMessageEditorText:O.a.string,supportsAttachments:O.a.bool.isRequired,toggleOnAndOffInputFocus:O.a.func};Ce.displayName="MessageEditor";Ce.defaultProps={hasUnansweredQuickReplyMessage:!1,isThreadStarted:!0,disablePublish:!1,onRemoveAttachment:function(){},onSelectAttachmentFiles:function(){},createNewThread:function(){},supportsAttachments:!1,fileTypes:be.a};t.a=Ce},"1wa5":function(e,t,n){"use strict";var a=n("UG02"),r=n("NIjC"),i=n("5xHP"),o="ENTRY_URL",s=n("IhEF");n.d(t,"a",function(){return c});function c(e){var t;return new r.a({contexts:Object(a.a)({},o,(t={},Object(a.a)(t,i.o,o),Object(a.a)(t,"url",e),t)),id:Object(s.generateUuid)(),timestamp:Date.now()})}},"2+Io":function(e,t,n){var a=n("pDio")(n("8i16"),"Map");e.exports=a},"2YOq":function(e,t,n){"use strict";var a=n("Ktcs"),r=n.n(a),i=function(e){return r.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24"},e),r.a.createElement("defs",null,r.a.createElement("path",{d:"M16.233 8.738c.564-.502.564-1.317 0-1.818-.564-.503-1.477-.503-2.04 0l-7.128 6.35c-1.374 1.223-1.374 3.213 0 4.436.686.612 1.587.918 2.49.918.9 0 1.802-.306 2.489-.918l10.318-9.193h.001c2.183-1.946 2.183-5.11 0-7.055-2.181-1.944-5.733-1.944-7.918 0l-12.2 10.87c-2.993 2.667-2.993 7.006 0 9.673C3.742 23.334 5.707 24 7.673 24c1.965 0 3.93-.666 5.427-2l9.01-8.027c.563-.501.563-1.316 0-1.818-.564-.503-1.478-.503-2.042 0l-9.009 8.027c-1.867 1.664-4.906 1.663-6.773 0-1.867-1.664-1.867-4.37 0-6.035l12.2-10.869c1.058-.944 2.779-.943 3.836-.001s1.057 2.475 0 3.417h-.002l-10.317 9.194c-.249.22-.651.22-.897 0-.248-.22-.248-.58 0-.8l7.127-6.35z",id:"attach__a"})),r.a.createElement("use",{xlinkHref:"#attach__a",fillRule:"evenodd"}))};i.displayName="SVGAttach";t.a=i},"2rNL":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="data-cv-message-history-id"},"3Egs":function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return r});n.d(t,"d",function(){return i});n.d(t,"c",function(){return o});var a="FIRST",r="FIRST_IN_GROUP",i="LAST_IN_GROUP",o="LAST"},"3FHW":function(e,t,n){var a=n("8X3F"),r=n("kmmH"),i="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";function u(e){if(!r(e))return!1;var t=a(e);return t==o||t==s||t==i||t==c}e.exports=u},"3OTY":function(e,t,n){"use strict";n.d(t,"a",function(){return l});n.d(t,"c",function(){return d});n.d(t,"b",function(){return p});n.d(t,"d",function(){return m});var a=n("Zsd8"),r=n("wwi/"),i=n("tlSg"),o=n("k3iI"),s=n("E6wg"),c=n("NpZo"),u=n("zZL2"),l=Object(a.createAction)(r.a),d=Object(a.createAction)(r.c),p=Object(a.createAction)(r.b,function(e){return{error:e}});function m(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?function(e,t){var n=Object(s.getSessionId)(t()),a=Object(c.getSelectedThreadId)(t()),r=Object(u.getHubspotUtk)(t());e(l());var m=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sessionId;e(Object(o.updateSessionId)(t));e(d())},h=function(t){e(p(t))};Object(i.sendConsentToCommunicate)({sessionId:n,hubspotUtk:r,threadId:a}).then(m,h).done()}:null}},"3gKe":function(e,t,n){"use strict";var a=n("MBJP"),r=n("JGJA"),i=Object(r.a)("gdpr"),o=Object(a.a)([i],Object(r.a)("consentToProcessStatus")),s=n("3z2x");n.d(t,"a",function(){return c});var c=Object(a.a)([o],function(e){switch(e){case s.a:return!1;case s.b:return!0;case s.c:default:try{return localStorage.getItem("userHasGivenConsentToProcess")}catch(e){return!1}}})},"3oj9":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("IFrL"),r=n("MBJP"),i=n("ZSXR"),o=n("eEyY"),s=n("Ryja"),c=n("Xcjc"),u=Object(r.a)([o.getCurrentThreadId,i.a,s.getStagedThreadHistory],function(e,t,n){return e===c.a?n:Object(a.a)(t)||null})},"4nf7":function(e,t,n){"use strict";var a=n("021p"),r=n("bOW6"),i=n("BnUr"),o=n("QYOI"),s=n("MBJP"),c=n("qjq5"),u=n("3Yas");u.a.implement(Array,function(e,t){return o.Iterable.isIterable(e)?t.concat(e.toJS()):t.concat(e)});u.a.implementInherited(o.Seq.Indexed,function(e,t){return t.concat(e)});u.a.implementInherited(o.Collection.Indexed,function(e,t){return t.concat(e)});u.a.implement(String,function(e,t){return t.concat(e)});var l,d=u.a,p=Object(c.a)(d),m=n("SGjM"),h=n("DdHT"),f=n("6aYC"),b=n("k09d"),g=n("Z6IV"),v=n("3oj9"),O=n("5oUx");n.d(t,"a",function(){return j});var j=Object(s.a)([b.a,v.a,f.a,O.a],function(e,t,n,s){var c=Object(i.getChannelName)(e),u=Object(i.getThreadId)(e),d=Object(a.b)(t)||Object(o.List)(),f=Object(h.a)(p(d),p(n),Object(m.a)(Object(r.wrapFailedMessage)({threadId:u,channel:c})),p(s))(Object(o.List)()),b=f.size?f.filter(g.isSupportedMessageType):Object(o.List)();Object(o.is)(l,b)||(l=b);return l})},"5N3d":function(e,t,n){"use strict";n.r(t);n.d(t,"validateAttachmentFile",function(){return o});var a=n("Zn4N"),r=n("eg+O"),i=n("b+5w"),o=function(e){var t=Object(i.a)();Object(r.fileExceedsSizeLimit)(e)?t.reject(a.a):t.resolve();return t.promise}},"5SRO":function(e,t,n){"use strict";var a,r=n("UG02"),i=n("GzqH"),o=n("n4QB"),s=n("/VsO"),c=n("2OBk"),u=n("OdFI"),l=n("9di4"),d=n("bYHN"),p=n("mKxs"),m=n("VfuR"),h=n.n(m),f=n("9f1P"),b=n.n(f),g=n("eP/i"),v="default",O="blank",j="on-shade",y="on-dark",x=(a={},Object(r.a)(a,v,{primary:g.j,secondary:g.l}),Object(r.a)(a,j,{primary:g.l,secondary:g.j}),Object(r.a)(a,y,{primary:g.k,secondary:g.r}),a),C="\n  background: "+g.q+";\n",k=function(e){var t=e.primary;return"\n  background: "+t+";\n  background: linear-gradient(to right, "+t+", "+e.secondary+" 20%, "+t+" 40%);\n  background-size: 1200px;\n"},E=function(e){return x[e]},T=function(e){var t=e.use;return t===O?C:k(E(t))},w=function(e){return"number"==typeof e},I=function(e){return w(e)?e+"px":e},S="1s",R="linear",A="0s",M="infinite",P="forwards",N=700,q=Object(f.keyframes)(["0%{background-position:-","px 0}100%{background-position:","px 0}"],N,N),F=Object(f.css)(["animation:"," "," "," "," "," ",";"],q,S,R,A,M,P),_=b.a.div.withConfig({displayName:"SkeletonBase",componentId:"naonl1-0"})(["margin:",";padding:",";",";",";"],function(e){var t=e.margin;return t?I(t):void 0},function(e){var t=e.padding;return t?I(t):void 0},function(e){var t=e.use;return T({use:t})},function(e){return e.use!==O&&F});_.defaultProps={use:v};_.propTypes={margin:h.a.oneOfType([h.a.number,h.a.string]),padding:h.a.oneOfType([h.a.number,h.a.string]),use:h.a.oneOf([v,j,y,O])};var L=_,B=32,D=b()(L).withConfig({displayName:"SkeletonCircle",componentId:"sc-1a3tugc-0"})(["border-radius:50%;width:",";height:",";min-width:",";"],function(e){var t=e.size;return I(t)},function(e){var t=e.size;return I(t)},function(e){var t=e.size;return I(t)});D.defaultProps={size:B};D.propTypes={size:h.a.number};var z=D,V=n("Ktcs"),H=n.n(V),U=n("aFIE"),W=n("idBM"),Q=n("ksA9"),Y=n("XG4J"),J=n.n(Y),G=n("HvW9"),K=function(){},Z=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(d.a)(n));return n}Object(s.a)(t,[{key:"handleClick",value:function(){var e=this.props;(0,e.onClick)(e.sender)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.sender,a=e.size;if(t)return H.a.createElement(z,{size:32});if(!n)return H.a.createElement(U.a,{size:a});switch(Object(W.getSenderType)(n)){case G.b:case G.d:return H.a.createElement(U.a,{size:a,src:Object(Q.a)(n)||J.a});default:return H.a.createElement("span",{onClick:this.handleClick},H.a.createElement(U.a,{size:a,src:Object(Q.a)(n)}))}}}]);return t}(V.PureComponent);Z.displayName="SenderAvatar";Z.propTypes={isLoading:h.a.bool,onClick:h.a.func.isRequired,sender:Object(p.a)("Sender"),size:U.a.propTypes.size};Z.defaultProps={onClick:K,size:"sm"};var X=n("6s0Z"),$=n("i2Vg"),ee=n("qXlW"),te=n("rCfO"),ne=n("WdXK"),ae=Object(te.a)(function(e,t,n){return t?n.get(Object(ne.buildSenderLocator)(t,e)):null}),re="STARTED",ie=Object(te.a)(function(e){return!Object(Q.b)(e)&&Object(Q.h)(e)===re}),oe="#cbd6e2",se="#00a4bd",ce=window.navigator?navigator.userAgent.toLowerCase():"",ue=function(){return ce.includes("trident/")>=0},le=n("JGJA"),de=Object(le.a)("alignItems"),pe=Object(le.a)("avatarWidth"),me=Object(le.a)("backgroundColor"),he=Object(le.a)("borderColor"),fe=Object(le.a)("borderRadius"),be=Object(le.a)("borderWidth"),ge=(Object(le.a)("messageSpacing"),Object(le.a)("textColor")),ve=Object(le.a)("fileAttachmentTheme"),Oe=(Object(le.a)("quickReplyTheme"),Object(le.a)("widgetAccent")),je=n("iDVC"),ye=Object(V.createContext)(Object(je.a)()),xe=Object(f.keyframes)(["25%{background-color:",";}75%{background-color:",";}"],oe,oe),Ce=Object(f.keyframes)(["0%,100%{transform:translateY(0);}25%{transform:translateY(.25em);}50%{transform:translateY(0);}75%{transform:translateY(-.25em);}"]);ue()&&(Ce=Object(f.keyframes)(["0%,100%{top:0;}25%{top:.25em;}50%{top:0}75%{top:-.25em;}"]));var ke=b.a.div.withConfig({displayName:"TypingDots__Dot",componentId:"sc-1dulh2g-0"})(["position:relative;background-color:currentColor;color:",";border-radius:50%;height:1em;width:1em;animation:",",",";animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite;&:not(:last-child){margin-right:0.75em;}&:nth-child(2){animation-delay:-0.66s;}&:nth-child(3){animation-delay:-0.33s;}"],function(e){return e.color?e.color:se},Ce,xe),Ee=b.a.div.withConfig({displayName:"TypingDots__TypingDotsWrapper",componentId:"sc-1dulh2g-1"})(["display:flex;align-items:center;justify-content:center;height:24px;font-size:8px;width:4.5em;"]),Te=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=Oe(this.context);return H.a.createElement(Ee,null,H.a.createElement(ke,{color:e,className:"dot-1"}),H.a.createElement(ke,{color:e,className:"dot-2"}),H.a.createElement(ke,{color:e,className:"dot-3"}))}}]);return t}(V.Component);Te.contextType=ye;Te.displayName="TypingDots";var we=Te,Ie=n("0IK8"),Se=b.a.div.withConfig({displayName:"SpacingWrapper",componentId:"g2gaeb-0"})(["padding-top:4px;padding-bottom:4px;padding-left:10px;padding-right:10px;width:100%;"]),Re=h.a.oneOf([X.b,X.a,X.c]),Ae=n("CnAB"),Me=n("wBO5"),Pe=function(e){Object(Me.a)(void 0===e||"object"==typeof e,"Invalid config type given");e&&Object.values(e).forEach(function(e){Object(Me.a)(e instanceof je.a,"All themes in the configuration must be a `Theme` record. Found %s",typeof e)})},Ne=Object(V.memo)(function(e){var t=e.themeConfig,n=e.use,a=e.children;Pe(t);t=Object.assign({},Ae.b,t);var r=n?t[n]:t[X.b]||Object(je.a)();return H.a.createElement(ye.Provider,{value:r},a)});Ne.displayName="ThemeProvider";Ne.propTypes={children:h.a.node.isRequired,themeConfig:h.a.objectOf(Object(p.a)("Theme")),use:Re};var qe=Ne,Fe=b.a.div.withConfig({displayName:"PrimaryMessageAvatar__PrimaryMessageAvatarWrapper",componentId:"sc-18ydts0-0"})(["align-items:center;display:flex;flex-shrink:0;justify-items:center;margin-top:35px;"]),_e=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return H.a.createElement(Fe,{className:n},t)}}]);return t}(V.PureComponent);_e.displayName="PrimaryMessageAvatar";_e.propTypes={children:h.a.node.isRequired,className:h.a.string};var Le=b.a.div.withConfig({displayName:"PrimaryMessageContentSection__PaddedArea",componentId:"sc-8u3w60-0"})(["padding:8px 16px;"]),Be=b.a.div.withConfig({displayName:"PrimaryMessageContentSection__PrimaryMessageContentSectionWrapper",componentId:"sc-8u3w60-1"})(["width:100%;button{width:auto;}"]),De=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"renderContent",value:function(){var e=this.props.children;return H.a.createElement(Le,null,e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return H.a.Children.count(t)>0?H.a.createElement(Be,{className:n},H.a.createElement("div",{className:"width-100 padding-x-4 padding-y-2"},this.renderContent())):null}}]);return t}(V.PureComponent);De.contextType=ye;De.displayName="PrimaryMessageContentSection";De.propTypes={children:h.a.node,className:h.a.string};var ze=b.a.div.withConfig({displayName:"PrimaryMessageContent__PrimaryMessageContentWrapper",componentId:"sc-14f9pe6-0"})(["position:relative;min-height:32px;word-break:break-word;box-sizing:border-box;border-style:solid;border-width:",";border-color:",";background-color:",";color:",";display:inline-flex;align-items:center;flex-direction:column;border-radius:",";","{border-top-style:solid;border-top-width:1px;border-top-color:",";&:first-child{border-top:none;}}max-width:284px;"],function(e){return e.borderWidth},function(e){return e.borderColor},function(e){return e.backgroundColor},function(e){return e.textColor},function(e){return e.borderRadius},Be,function(e){return e.borderColor}),Ve=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={expanded:!!e.isLastMessage};n.onCollapseButtonClick=n.onCollapseButtonClick.bind(Object(d.a)(n));n.expandMessage=n.expandMessage.bind(Object(d.a)(n));return n}Object(s.a)(t,[{key:"onCollapseButtonClick",value:function(){this.setState({expanded:!1})}},{key:"expandMessage",value:function(){this.state.expanded||this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return H.a.createElement(ze,{className:n,backgroundColor:me(this.context),borderColor:he(this.context),borderRadius:fe(this.context),borderWidth:be(this.context),textColor:ge(this.context)},t)}}]);return t}(V.PureComponent);Ve.contextType=ye;Ve.displayName="PrimaryMessageContent";Ve.propTypes={children:h.a.node,className:h.a.string,isLastMessage:h.a.bool};var He=b.a.div.withConfig({displayName:"PrimaryMessageFooter__PrimaryMessageFooterWrapper",componentId:"sc-1kl1l2l-0"})(["display:flex;margin-top:4px;max-width:284px;"]),Ue=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return H.a.createElement(He,{className:n},t)}}]);return t}(V.PureComponent);Ue.displayName="PrimaryMessageFooter";Ue.propTypes={children:h.a.node.isRequired,className:h.a.string};var We=b.a.div.withConfig({displayName:"PrimaryMessageHeader__PrimaryMessageHeaderWrapper",componentId:"r207i0-0"})(["display:flex;height:16px;align-items:center;margin-top:4px;margin-bottom:4px;width:100%;"]),Qe=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return H.a.createElement(We,{className:n},t)}}]);return t}(V.PureComponent);Qe.displayName="PrimaryMessageHeader";Qe.propTypes={children:h.a.node.isRequired,className:h.a.string};var Ye=b.a.div.withConfig({displayName:"PrimaryMessageHeaderContent__PrimaryMessageHeaderContentWrapper",componentId:"sc-1bydm3c-0"})(["margin-left:1px;min-width:0;"]),Je=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return H.a.createElement(Ye,{className:n},t)}}]);return t}(V.PureComponent);Je.displayName="PrimaryMessageHeaderContent";Je.propTypes={children:h.a.node.isRequired,className:h.a.string};var Ge="8px",Ke=b.a.div.withConfig({displayName:"PrimaryMessage__PrimaryMessageWrapper",componentId:"sc-1uhftm5-0"})(["display:flex;flex-direction:column;align-items:",";padding-left:",";","{","{width:",";margin-left:-",";margin-right:",";}>:first-child{&","{margin-left:",";}}}","{margin-left:",";}","{margin-left:",";}"],function(e){return e.alignment||"flex-start"},Ge,We,Fe,function(e){return e.avatarWidth},Ge,Ge,Ye,function(e){return e.avatarWidth},ze,function(e){return e.avatarWidth},He,function(e){return e.avatarWidth}),Ze=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.className,r=t.positionDescriptors,i=t.use;return n?H.a.createElement(qe,{themeConfig:this.context,use:i},H.a.createElement(Se,{positionDescriptors:r,className:a},H.a.createElement(ye.Consumer,null,function(t){return H.a.createElement(Ke,{"data-test-id":e.props["data-test-id"],"data-test-use":i,alignment:de(t),avatarWidth:pe(t)},n)}))):null}}]);return t}(V.PureComponent);Ze.contextType=Ae.a;Ze.displayName="PrimaryMessage";Ze.propTypes={children:h.a.node,className:h.a.string,"data-test-id":h.a.string,positionDescriptors:$.a,use:Re};var Xe=n("TMxi"),$e=b.a.div.withConfig({displayName:"SkeletonText__SkeletonTextWrapper",componentId:"l81tz-0"})(["position:relative;width:",";"],function(e){var t=e.width;return I(t)}),et=b()(L).withConfig({displayName:"SkeletonText__SkeletonTextInner",componentId:"l81tz-1"})(["height:0.75em;left:0;position:absolute;top:50%;transform:translateY(-50%);width:100%;"]),tt=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=Object(Xe.a)(e,["width"]);return H.a.createElement($e,{width:t},"Â ",H.a.createElement(et,n))}}]);return t}(H.a.PureComponent);tt.defaultProps={width:"100%"};tt.propTypes={width:h.a.oneOfType([h.a.number,h.a.string])};var nt=tt,at=n("fzij"),rt=n("sl/w"),it=n("9dO3"),ot=n("dPcB"),st=["de","ja"],ct=function(e,t){var n=e.givenName,a=e.familyName,r=e.email,i=t&&t.locale||Object(it.a)();return st.indexOf(i)>=0||!n?Object(ot.a)({firstName:n,lastName:a,email:r},t):n},ut=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"getUnknownSenderText",value:function(){switch(Object(Q.g)(this.props.sender)){case G.b:return H.a.createElement(rt.a,{message:"conversations-message-history.responder.bot"});case G.a:return H.a.createElement(rt.a,{message:"conversations-message-history.responder.unknownResponder"});case G.e:return H.a.createElement(rt.a,{message:"conversations-message-history.responder.unknownVisitor"});case G.d:return H.a.createElement(rt.a,{message:"conversations-message-history.responder.automatic"});default:return H.a.createElement(rt.a,{message:"conversations-message-history.responder.unknownSender"})}}},{key:"render",value:function(){var e=this.props,t=e.sender;return e.isLoading?H.a.createElement(nt,{width:100}):t&&ct({givenName:Object(Q.d)(t),familyName:Object(Q.f)(t),email:Object(Q.c)(t)})||this.getUnknownSenderText()}}]);return t}(V.PureComponent);ut.displayName="SenderName";ut.propTypes={isLoading:h.a.bool,sender:Object(p.a)("Sender")};var lt=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSenderLoading,n=e.sender;return t?H.a.createElement(nt,{width:150}):H.a.createElement(at.a,{use:"help"},H.a.createElement("strong",null,H.a.createElement(ut,{sender:n})))}}]);return t}(V.PureComponent);lt.displayName="SenderHeaderContent";lt.propTypes={isSenderLoading:h.a.bool,sender:Object(p.a)("Sender")};var dt=lt,pt=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSenderLoading,n=e.sender;return H.a.createElement(dt,{sender:n,isSenderLoading:t})}}]);return t}(V.PureComponent);pt.displayName="TypingHeaderContent";pt.propTypes={isSenderLoading:h.a.bool,sender:Object(p.a)("Sender")};var mt=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors,a=e.senders,r=Object(Ie.getSenderId)(t),i=Object(Ie.getSenderType)(t),o=Object(Ie.getSenderType)(t)===G.e,s=ae(r,i,a),c=Object(Q.b)(s),u=ie(s),l=o?X.c:X.a;return H.a.createElement(Ze,{positionDescriptors:n,use:l},H.a.createElement(Qe,null,H.a.createElement(_e,null,H.a.createElement(Z,{sender:c,isLoading:u})),H.a.createElement(Je,null,H.a.createElement(pt,{message:t,sender:c,isSenderLoading:u}))),H.a.createElement(Ve,null,H.a.createElement(De,null,H.a.createElement(we,null))))}}]);return t}(V.PureComponent);mt.displayName="TypingIndicatorMessage";mt.propTypes={message:Object(p.a)("TypingIndicatorMessage").isRequired,positionDescriptors:$.a.isRequired,senders:ee.a.isRequired};var ht,ft=mt,bt=n("t+qy"),gt=n("5xHP"),vt=n("3CaS"),Ot=n("GPok"),jt=n("t6nY"),yt=n.n(jt),xt=b.a.div.withConfig({displayName:"DashedLabel__StyledBorder",componentId:"sc-1q1x8un-0"})(["display:flex;flex-grow:1;border:solid 1px ",";"],g.i);function Ct(e){var t=e.children,n=e.transparent,a=e["data-test-id"],r=e.labelPadding;return H.a.createElement("div",{className:yt()("display-flex align-end",r,n&&"justify-center",!r&&"m-y-6"),"data-test-id":a||"dashed-label"},!n&&H.a.createElement(xt,{className:"m-bottom-3"}),H.a.createElement("div",{className:"max-100 p-x-4"},H.a.createElement(at.a,{use:"help",className:"m-bottom-1 align-center text-center word-break-break-word flex-column"},t)),!n&&H.a.createElement(xt,{className:"m-bottom-3"}))}Ct.displayName="DashedLabel";Ct.propTypes=(ht={children:h.a.node.isRequired},Object(r.a)(ht,"data-test-id",h.a.string),Object(r.a)(ht,"transparent",h.a.bool),ht);var kt=Ct,Et=n("E7sj"),Tt=n.n(Et),wt=n("sA91"),It=n("yokD"),St=n("rIrL"),Rt=n("3M+V"),At=n("24N/"),Mt=["gmail_extra","gmail_quote","hs_reply","x_hs_reply_wrap"],Pt="divRplyFwdMsg",Nt=function(e,t){return t===Pt||e&&e.contains&&Mt.some(function(t){return e.contains(t)})},qt=function(e){var t=e.node,n=t.classList,a=t.id,r=t.attributes,i=void 0===r?[]:r;if(Nt(n,a)){var o=Ht.createElement("span");Object.keys(i).forEach(function(e){var t=i[e];o.setAttribute(t.nodeName,t.nodeValue)});o.innerHTML="";o.setAttribute("data-email-reply","");return{node:o}}return null},Ft=["hs_signature"],_t=function(e){return e&&e.contains&&Ft.some(function(t){return e.contains(t)})},Lt=function(e){var t=e.node,n=t.classList,a=t.attributes,r=void 0===a?[]:a;if(_t(n)){var i=Ht.createElement("span");Object.keys(r).forEach(function(e){var t=r[e];i.setAttribute(t.nodeName,t.nodeValue)});i.innerHTML="";i.setAttribute("data-email-signature","");return{node:i}}return null},Bt=["position","top","bottom","left","right","z-index","clear","float","background-image","white-space"],Dt=function(e){var t=e.node;if(t&&t.style&&t.style.length>0&&t.style.removeProperty){Bt.forEach(function(e){return t.style.removeProperty(e)});return{node:t}}return null},zt=function(e){var t=e.node,n=e.node_name;if(t&&"img"===n&&t.attributes){t.attributes["data-original-height"]&&t.setAttribute("height",t.attributes["data-original-height"].value);t.attributes["data-original-width"]&&t.setAttribute("width",t.attributes["data-original-width"].value);t.attributes["data-full-size-src"]&&t.setAttribute("src",t.attributes["data-full-size-src"].value);return{node:t}}return null},Vt=function(e){var t=e.node;if("div"===e.node_name&&t&&t.classList&&t.classList.contains("gmail_default")){var n=Ht.createElement("span");Object.keys(t.attributes).forEach(function(e){var a=t.attributes[e];n.setAttribute(a.nodeName,a.nodeValue)});n.innerHTML=t.innerHTML.trim();return{node:n}}return null},Ht=document.implementation.createHTMLDocument(""),Ut={transformers:[Gt,qt,Lt,Dt,Vt,zt],dom:Ht,elements:["b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","figure","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","font","div","span","a"],attributes:{__ALL__:["style","align","valign","width","height"],blockquote:["cite"],col:["span"],colgroup:["span"],figure:["style"],ol:["start","type"],q:["cite"],img:["title","alt","src"],table:["summary","bgcolor"],td:["abbr","axis","colspan","rowspan","bgcolor"],th:["abbr","axis","colspan","rowspan","scope","bgcolor"],ul:["type"],font:["size"],a:["href","title"],span:["data-at-mention","data-owner-id","contenteditable","data-email-reply"]},add_attributes:{a:{target:"_blank"}},remove_contents:["script"],protocols:{a:{href:["http","https"]}}},Wt=function(e,t){return"p"===t&&e&&e.classList&&e.classList.contains("MsoNormal")&&e.children&&e.children.length},Qt=function(e){return e&&!e.children.legnth&&"o:p"===e.tagName.toLowerCase()&&e.innerHTML.includes("&nbsp;")},Yt=function(e){return e&&"span"===e.tagName.toLowerCase()&&Qt(e.firstElementChild)},Jt=function(e){return!!e.getElementsByTagName("img").length},Gt=function e(t){var n=t.node,a=t.node_name;if(Wt(n,a)){var r=n.firstElementChild;if(Qt(r)||Yt(r)){if(Jt(n)){n.removeChild(r);return e({node:n,node_name:"p"})}return{node:Ht.createElement("br")}}var i=Ht.createElement("div");Object.keys(n.attributes).forEach(function(e){var t=n.attributes[e];i.setAttribute(t.nodeName,t.nodeValue)});i.innerHTML=n.innerHTML.trim().replace(/&nbsp;/g,"");return{node:i}}return null},Kt=n("kkqp"),Zt=n.n(Kt),Xt=function(e){return new Zt.a(e)},$t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Object.assign.apply(Object,[new Error].concat(n,[{message:e}]))},en=function(e){setTimeout(function(){throw e},0)},tn=function(e){Array.from(e.querySelectorAll("br + [data-email-reply]")).forEach(function(e){var t=e.previousElementSibling;t&&t.nodeName&&"br"===t.nodeName.toLowerCase()&&t.classList&&t.classList.add("display-none")})},nn=Ht.body,an=Object(te.a)(function(e,t){var n=Ht.createElement("div");try{nn.innerHTML=e;var a=Object.assign({},Ut);a.transformers=t;var r=Xt(a).clean_node(nn).cloneNode(!0);n.appendChild(r);tn(n)}catch(e){var i=$t("Error sanitizing email message: "+e.message,e);en(i)}return n.innerHTML}),rn=Object(te.a)(function(e){return an(e,[Gt,Vt,Dt,zt])}),on=Object(te.a)(function(e){if(!e)return null;var t=document.createElement("div");t.innerHTML=rn(e);document.body.appendChild(t);var n=t.innerText;document.body.removeChild(t);return n}),sn=n("L++6"),cn=[Rt.a,It.a,St.a,At.a],un=Object(te.a)(function(e){setTimeout(function(){Object(Me.a)(cn.some(function(t){return e instanceof t}),"hasTextContent: Unsupported message record type %s supplied",Object(wt.a)(e))},0);var t=Object(sn.f)(e),n=Object(Ie.getRichText)(e)||Object(Ie.getPlainText)(e);return t||Boolean(n&&n.length&&on(n))}),ln=n("qCVG"),dn=b.a.div.withConfig({displayName:"ContentText__ContentTextWrapper",componentId:"yx1bwx-0"})(["word-wrap:break-word;box-sizing:border-box;width:100%;white-space:pre-wrap;a{font-weight:inherit;text-decoration:underline;}"]),pn=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e["aria-label"],n=e.contentText,a=e.onClickAction;return H.a.createElement(dn,null,H.a.createElement("div",{"aria-label":t,"data-test-id":"primary-message-content",dangerouslySetInnerHTML:{__html:Object(ln.a)(n,{shouldPreserveNewlines:!0})},onClick:a}))}}]);return t}(V.PureComponent);pn.displayName="ContentText";pn.propTypes={"aria-label":h.a.string,contentText:h.a.string.isRequired,onClickAction:h.a.func};pn.defaultProps={onClickAction:function(){}};var mn=n("MJM1"),hn=function(e){return Object(mn.a)(["metadata","officeHoursStartTime"],e)},fn=function(e){return Object(mn.a)(["officeHoursStartTime"],e)},bn=function(e){return e["@type"]===gt.p?fn(e)&&fn(e)-(new Date).getTime()<0:hn(e)&&hn(e)-(new Date).getTime()<0},gn=function(e){var t=e.message;return t["@type"]===gt.p||un(t)?bn(t)?null:H.a.createElement(kt,{transparent:!0,labelPadding:"m-y-1"},H.a.createElement(pn,{"aria-label":Tt.a.text("conversations-visitor-message-history.systemMessage"),contentText:Object(Ie.getRichText)(t)||Object(Ie.getPlainText)(t)})):null};gn.displayName="AvailabilityMessage";gn.propTypes={message:h.a.oneOfType([Object(p.a)("PubNubMessageRecord"),Object(p.a)("TypicalResponseTimeMessage"),Object(p.a)("OfficeHoursMessage")]).isRequired};var vn=gn,On=["id"],jn=["timestamp"],yn=(Object(mn.a)(On),Object(mn.a)(jn)),xn={MY:"i18n.dateTime.monthAndYear",MD:"i18n.dateTime.monthAndDay",QY:"i18n.dateTime.quarterAndYear",WMDY:"i18n.dateTime.weekDayAndMonthAndDayAndYear"},Cn=function(e){var t=e.value,n=e.type,a=e.format,r=e.length,i=n?Tt.a.moment[n](t):t,o="",s="",c="";if("s"===r){var u=Object.keys(Tt.a.translations.en.i18n.dateTime.shortForm.months)[i.month()];o=Tt.a.text("i18n.dateTime.shortForm.months."+u,{locale:Tt.a.locale});s=i.format("ddd");c=i.format("ll")}else{o=i.format("MMMM");s=i.format("dddd");c=i.format("LL")}var l={monthName:o,locale:Tt.a.locale};switch(a){case"MD":l.dayNumber=i.date();break;case"QY":l.quarterNumber=i.quarter();l.yearNumber=i.year().toString();break;case"WMDY":l.weekDay=s;l.fullDate=c;break;default:l.yearNumber=i.year().toString()}return Tt.a.text(xn[a],l)},kn=function(e,t){return Cn({value:e,type:t,format:"MD",length:"m"})},En=Object(V.memo)(function(e){var t=e.message,n=e.labelPadding,a=yn(t),r=kn(a,"userTz");return H.a.createElement(kt,{labelPadding:n},H.a.createElement(at.a,{use:"help"},r))});En.displayName="DateLabelMessage";En.propTypes={labelPadding:h.a.string,message:Object(p.a)("DateMessage").isRequired};var Tn=En,wn=b.a.div.withConfig({displayName:"DateLabel__StyleWrapper",componentId:"sc-1n9y72p-0"})(["","{border-color:",";}"],xt,g.f),In=function(e){return H.a.createElement(wn,null,H.a.createElement(Tn,Object.assign({},e,{labelPadding:"m-y-3"})))};In.displayName="DateLabel";In.propTypes=Tn.propTypes;var Sn=In,Rn=n("3Egs"),An=n("5N4t"),Mn=n("oxA8"),Pn=n("QYOI"),Nn=function(){return H.a.createElement("i",null,H.a.createElement(rt.a,{message:"conversations-message-history.noContent"}))};Nn.displayName="NoContentLabel";var qn=Nn,Fn=n("r1tY"),_n=["fileId"],Ln=["fileMetadata"],Bn=["thumbnailMetadata"],Dn=(Object(mn.a)(_n),Object(mn.a)(Ln)),zn=(Object(mn.a)(Bn),["expiresAt"]),Vn=["url"],Hn=["name"],Un=["extension"],Wn=["type"],Qn=["fileSize"],Yn=["width"],Jn=["height"],Gn=(Object(mn.a)(zn),Object(mn.a)(Vn)),Kn=Object(mn.a)(Hn),Zn=Object(mn.a)(Un),Xn=Object(mn.a)(Wn),$n=Object(mn.a)(Qn),ea=Object(mn.a)(Yn),ta=Object(mn.a)(Jn),na=function(e){var t=Kn(e),n=Zn(e);return n?t+"."+n:t},aa=n("n8e+"),ra=n("LRQi"),ia=b.a.div.withConfig({displayName:"InlineImageAttachment__InlineImageAttachmentWrapper",componentId:"sc-1f8zsos-0"})(["display:block;max-width:100%;"]),oa=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).hasLoadedImage=function(){n.setState({hasLoaded:!0})};n.state={hasLoaded:!1};return n}Object(s.a)(t,[{key:"getDimensions",value:function(){var e=this.props,t=e.maxWidth,n=e.width,a=e.height;return!this.state.hasLoaded&&t&&n&&a?n<=t?{width:n,height:a}:{width:t,height:a*(t/n)}:{}}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.url,a=this.getDimensions(),r=a.width,i=a.height;return H.a.createElement(ia,null,H.a.createElement(ra.a,{href:n,target:"_blank","data-test-id":"inline-image-attachment"},H.a.createElement(aa.a,{alt:t,src:n,width:r,height:i,style:{minHeight:i},onLoad:this.hasLoadedImage})))}}]);return t}(V.PureComponent);oa.displayName="InlineImageAttachment";oa.propTypes={height:h.a.number,maxWidth:h.a.number,name:h.a.string.isRequired,url:h.a.string.isRequired,width:h.a.number};var sa=oa,ca="IMG",ua=function(e){return e.filter(function(e){var t=Dn(e),n=Xn(t),a=Zn(t);return Boolean(n===ca&&"svg"!==a)})},la=function(e){return e.filter(function(e){var t=Dn(e),n=Xn(t),a=Zn(t);return Boolean(n!==ca||"svg"===a)})},da=function(e){return e.some(function(e){var t=Dn(e),n=Xn(t),a=Zn(t);return Boolean(n===ca&&"svg"!==a)})},pa=300,ma=b.a.div.withConfig({displayName:"InlineImageAttachments__FileAttachmentsWrapper",componentId:"oaw2z5-0"})(["cursor:pointer;box-sizing:border-box;width:100%;max-width:","px;display:block;margin-bottom:16px;margin-top:8px;"],pa),ha=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={maxWidth:pa};n.wrapperRef=Object(V.createRef)();return n}Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Fn.findDOMNode)(this.wrapperRef.current);e&&e.offsetWidth&&e.offsetWidth!==this.state.maxWidth&&this.setState({maxWidth:e.offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props.fileAttachments;return H.a.createElement(ma,{ref:this.wrapperRef},ua(t).map(function(t,n){var a=Dn(t),r=na(a),i=Gn(a),o=ea(a),s=ta(a);return H.a.createElement(sa,{key:"image-"+n,name:r,url:i,width:o,height:s,maxWidth:e.state.maxWidth})}))}}]);return t}(V.PureComponent);ha.displayName="InlineImageAttachments";ha.propTypes={fileAttachments:h.a.instanceOf(Pn.List)};var fa=ha,ba=n("C3IS"),ga=n("OI0Z"),va=n("6xAP"),Oa=Object(V.createContext)(Object(va.a)()),ja=n("dz5W"),ya=n("7LhL"),xa=function(e){return H.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 24"},e),H.a.createElement("defs",null,H.a.createElement("path",{d:"M14.466 0c.076 0 .153.008.233.023.1.02.196.059.288.104.023.011.046.023.068.037.09.052.177.111.252.187l6.345 6.4c.075.076.135.163.186.255.013.023.025.045.036.068.045.093.083.19.103.295.015.075.023.153.023.231v13.2c0 1.884-1.468 3.2-3.569 3.2H6.534c-2.1 0-3.568-1.316-3.568-3.2V3.6c0-1.985 1.6-3.6 3.568-3.6zm-1.133 2H6.25C5.56 2 5 2.56 5 3.25v17.917c0 .689.68.833 1.25.833h12.5c.57 0 1.25-.144 1.25-.833v-12.5h-4.583c-1.149 0-2.084-.935-2.084-2.084V2z",id:"file__a"})),H.a.createElement("use",{xlinkHref:"#file__a"}))};xa.displayName="SVGFile";var Ca=xa,ka=b.a.div.withConfig({displayName:"FileAttachmentTile__FileAttachmentTileWrapper",componentId:"sc-8eo8b0-0"})(["max-width:300px;"]),Ea=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props.fileMetadata,t=na(e),n=Gn(e),a=$n(e);return H.a.createElement(ka,null,H.a.createElement(ja.a,{onClick:function(){return window.open(n)},fileName:t,fileInfo:H.a.createElement(ga.a,{value:a}),preview:H.a.createElement(ya.a,{icon:H.a.createElement(Ca,null),size:"sm"})}))}}]);return t}(V.PureComponent);Ea.contextType=Oa;Ea.displayName="FileAttachmentTile";Ea.propTypes={fileMetadata:Object(p.a)("FileMetadataRecord").isRequired};var Ta=Ea,wa=Object(le.a)("tileBackgroundColor"),Ia=b.a.div.withConfig({displayName:"AttachmentsFooter__AttachmentsFooterWrapper",componentId:"sc-4d8106-0"})(["cursor:pointer;box-sizing:border-box;display:block;background-color:",";"],function(e){return e.backgroundColor}),Sa=b()(Ta).withConfig({displayName:"AttachmentsFooter__StyledFileAttachmentTile",componentId:"sc-4d8106-1"})(["background-color:",";"],function(e){return e.backgroundColor||"rgba(255, 255, 255, 0.5)"}),Ra=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.fileAttachments;return H.a.createElement(Ia,{backgroundColor:me(this.context)},t.map(function(t,n){return H.a.createElement(Sa,{key:n,fileMetadata:Dn(t),backgroundColor:wa(ve(e.context))})}))}}]);return t}(V.PureComponent);Ra.contextType=ye;Ra.displayName="AttachmentsFooter";Ra.propTypes={fileAttachments:h.a.instanceOf(Pn.List).isRequired};var Aa=Ra,Ma=/^rgb/i,Pa=function(e){var t,n,a;try{if(Ma.test(e)){var r=e.match(/(\d+)\D+(\d+)\D+(\d+)/);t=parseInt(r[1],10);n=parseInt(r[2],10);a=parseInt(r[3],10)}else{var i=e.toLowerCase().replace(/^#/,"");3===i.length&&(i=i.replace(/([0-9a-f])/g,"$1$1"));t=parseInt(i.substring(0,2),16);n=parseInt(i.substring(2,4),16);a=parseInt(i.substring(4,6),16)}if([t,n,a].some(isNaN))return{}}catch(e){return{}}return{r:t,g:n,b:a}},Na=function(e){var t=Pa(e),n=t.r,a=t.g,r=t.b;if([n,a,r].some(isNaN))return{hue:0,saturation:0,lightness:0};var i,o=n/255,s=a/255,c=r/255,u=Math.max(o,s,c),l=Math.min(o,s,c),d=(u+l)/2,p=u-l;if(0===p)return{hue:0,saturation:0,lightness:d};var m=d>.5?p/(2-u-l):p/(u+l);switch(u){case o:i=(s-c)/p+(s<c?6:0);break;case s:i=(c-o)/p+2;break;default:i=(o-s)/p+4}i*=60;return{hue:i=Math.round(i),saturation:m,lightness:d}},qa=function(e){var t=e<0?0:e>1?1:e;return Math.round(100*t)+"%"},Fa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=Na(e),a=n.hue,r=n.saturation,i=n.lightness;return"hsl("+[a,qa(r),qa(i+t)].join(", ")+")"},_a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Fa(e,-t)},La=n("OwpT"),Ba=n.n(La),Da=b.a.div.withConfig({displayName:"CommonMessageContent__HyperlinkStyleWrapper",componentId:"rrw38h-0"})([""," a{color:",";&:hover{color:",";}&:active{color:",";}}"],ze,function(e){return e.hyperlinkColor},function(e){var t=e.hyperlinkColor;return t&&_a(t)},function(e){var t=e.hyperlinkColor;return t&&_a(t,.2)}),za=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"isSentFromVisitor",value:function(){return Object(Ie.getSenderType)(this.props.message)===G.e}},{key:"isClickableLink",value:function(e){return new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(/.*)?").test(e)}},{key:"handleOnClickEvent",value:function(e){e.persist();"A"===e.target.tagName&&this.props.toggleOpen(!1)}},{key:"renderContentText",value:function(){var e=this.props,t=e.message,n=e.mobile,a=Object(Ie.getRichText)(t)||Object(Ie.getPlainText)(t),r=n&&this.isClickableLink(a);if(!a)return null;var i=Object(Ie.getRichText)(t)&&Ba.a.link(a,{stripPrefix:!1});return H.a.createElement(pn,{contentText:i||a,"aria-label":this.isSentFromVisitor()?Tt.a.text("conversations-visitor-message-history.myMessage"):Tt.a.text("conversations-visitor-message-history.agentMessage"),onClickAction:r?this.handleOnClickEvent.bind(this):null})}},{key:"renderMessageSection",value:function(){var e=this.props,t=e.fileAttachments,n=e.isLastMessage,a=e.message,r=!Object(ba.b)(a)&&t&&da(t),i=un(a);return r||i?H.a.createElement(De,{isLastMessage:n},this.renderContentText(),r&&H.a.createElement(fa,{fileAttachments:t})):null}},{key:"renderAttachmentsSection",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,a=Object(ba.b)(n)?t:la(t);return a&&a.size?H.a.createElement(De,null,H.a.createElement(Aa,{fileAttachments:a})):null}},{key:"render",value:function(){var e=this.renderMessageSection(),t=this.renderAttachmentsSection(),n=this.isSentFromVisitor();return H.a.createElement(Da,{hyperlinkColor:n&&ge(this.context)},H.a.createElement(Ve,null,e,t,!e&&!t&&H.a.createElement(De,null,H.a.createElement(qn,null)),this.props.quickReplySelect&&this.props.quickReplySelect()))}}]);return t}(V.PureComponent);za.contextType=ye;za.displayName="CommonMessageContent";za.propTypes={fileAttachments:h.a.instanceOf(Pn.List),isLastMessage:h.a.bool,message:h.a.oneOfType([Object(p.a)("PubNubMessageRecord"),Object(p.a)("CommonMessage")]).isRequired,mobile:h.a.bool,quickReplySelect:h.a.oneOfType([h.a.bool,h.a.func]),toggleOpen:h.a.func};var Va=za,Ha=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,a=e.positionDescriptors,r=Object(An.a)(n),i=a.includes(Rn.c);return H.a.createElement(Ze,{positionDescriptors:a,use:X.c},H.a.createElement(Va,{fileAttachments:t,isLastMessage:i,message:r}),i&&H.a.createElement(Ue,null,H.a.createElement(at.a,{use:"help"},H.a.createElement(Mn.a,{message:"conversations-visitor-message-history.status.publishing.UNPUBLISHED"}))))}}]);return t}(V.PureComponent);Ha.displayName="ActivelyPublishingMessage";Ha.propTypes={fileAttachments:h.a.instanceOf(Pn.List),message:Object(p.a)("ActivelyPublishing").isRequired,positionDescriptors:$.a.isRequired};var Ua=Ha,Wa=n("LdnN"),Qa=n("VdXU"),Ya=n("Umjh"),Ja=n("nzPM"),Ga=n("/Maw"),Ka=b()(Qa.a).withConfig({displayName:"EmailCaptureInput__StyledVizExButton",componentId:"sc-2t2bty-0"})(["padding:0;width:100% !important;height:100%;"]),Za=b.a.div.withConfig({displayName:"EmailCaptureInput__LoadingButtonContainer",componentId:"sc-2t2bty-1"})(["width:38px;height:32px;margin:4px 4px 4px 0;"]),Xa={disabled:h.a.bool,locale:h.a.string,onChange:h.a.func.isRequired,onKeyPress:h.a.func.isRequired,onSubmit:h.a.func,submissionState:h.a.oneOf(["ready","submitting","done"]),value:h.a.string},$a=function(e){var t=e.disabled,n=e.value,a=e.onChange,r=e.onKeyPress,i=e.onSubmit,o=e.locale,s=e.submissionState;return H.a.createElement(Ga.a,{"aria-label":Tt.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:o}),value:n,placeholder:Tt.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:o}),"data-test-id":"email-capture-input",onChange:a,onKeyPress:r,suffix:H.a.createElement(Za,null,H.a.createElement(Ya.a,{currentState:s,onClick:i,disabled:t,"aria-label":Tt.a.text("conversations-visitor-message-history.email-capture.sendEmail",{locale:o}),"data-test-id":"email-capture-submit-button",Button:Ka},H.a.createElement(ya.a,{icon:H.a.createElement(Ja.a,{color:g.q})})))})};$a.displayName="EmailCaptureInput";$a.propTypes=Xa;var er=$a,tr=b.a.span.withConfig({displayName:"CaptureSection__ErrorMessage",componentId:"sc-16uzcyx-0"})(["color:",";font-size:12px;line-height:18px;text-align:left;margin-top:9px;display:flex;"],g.e),nr=function(e){var t=e.message,n=e.email,a=e.errorMessage,r=e.onChange,i=e.onKeyPress,o=e.onSubmit,s=e.submissionState;return H.a.createElement(De,{key:"email-prompt-capture-section"},H.a.createElement(pn,{"aria-label":Tt.a.text("conversations-visitor-message-history.agentMessage"),contentText:Object(Ie.getPlainText)(t)}),H.a.createElement(er,{disabled:!n,value:n,onChange:r,onKeyPress:i,onSubmit:o,submissionState:s}),H.a.createElement(tr,{"aria-live":"assertive"},a))};nr.displayName="CaptureSection";nr.propTypes={email:h.a.string,errorMessage:h.a.string,message:h.a.oneOfType([Object(p.a)("PubNubMessageRecord"),Object(p.a)("EmailCapturePromptMessage")]).isRequired,onChange:h.a.func.isRequired,onKeyPress:h.a.func.isRequired,onSubmit:h.a.func.isRequired,submissionState:h.a.string.isRequired};var ar=n("NrIs"),rr=n("0wDu"),ir=rr.a,or=rr.f,sr=rr.h,cr=n("8u6N"),ur=function(e){var t=e.theme;return Object(f.css)(["box-shadow:0 0 0 1px ",";"],Object(cr.a)(sr(t),40))},lr=function(e){var t=e.checked,n=e.theme;return Object(f.css)(["background-color:",";color:",";"],ir(n),!t&&Object(cr.a)(sr(n),40))},dr=b.a.div.withConfig({displayName:"VizExCheckbox__CheckboxBox",componentId:"sc-1so4h75-0"})(["flex-shrink:0;height:16px;width:16px;transition:color 0.15s ease-out,background-color 0.15s ease-out;color:",";border-color:currentColor;border:2px solid;border-radius:3px;position:relative;",";",";"],function(e){var t=e.checked,n=e.theme;return t?sr(n):or(n)},function(e){var t=e.hover,n=e.theme,a=e.checked;return t&&lr({theme:n,checked:a})},function(e){var t=e.focus,n=e.theme;return t&&ur({theme:n})}),pr=b.a.label.withConfig({displayName:"VizExCheckbox__CheckboxWrapper",componentId:"sc-1so4h75-1"})(["position:relative;display:inline-flex;flex-direction:row;align-items:center;font-size:16px;cursor:pointer;:hover ","{","}input:focus + ","{","}"],dr,lr,dr,ur),mr=b.a.input.withConfig({displayName:"VizExCheckbox__CheckboxInput",componentId:"sc-1so4h75-2"})(["position:absolute;top:0;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;"]),hr=b.a.svg.withConfig({displayName:"VizExCheckbox__Indicator",componentId:"sc-1so4h75-3"})(["height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;"]),fr=b.a.div.withConfig({displayName:"VizExCheckbox__ContentWrapper",componentId:"sc-1so4h75-4"})(["padding-left:8px;user-select:none;cursor:pointer;"]),br=function(e){var t=e.onChange,n=e.theme,a=e.children,r=e.checked,i=e.focus,o=e.hover,s=Object(Xe.a)(e,["onChange","theme","children","checked","focus","hover"]),c=Object(V.useRef)(null);return H.a.createElement(pr,Object.assign({},s,{onClick:function(){c.current.focus()},"data-testid":"VizExCheckbox",checked:r,theme:n}),H.a.createElement(mr,{ref:c,"data-testid":"VizExCheckbox-input",type:"checkbox",onChange:t}),H.a.createElement(dr,{theme:n,checked:r,focus:i,hover:o},r&&H.a.createElement(hr,{viewBox:"0 0 15 15.343"},H.a.createElement("path",{d:"M1.013 8.11c0-.223.078-.412.234-.568l1.14-1.14c.155-.155.345-.233.568-.233s.413.077.57.233l2.46 2.47 5.492-5.5c.156-.156.346-.234.568-.234.224 0 .413.077.57.233l1.138 1.14c.156.155.234.345.234.568 0 .224-.078.414-.234.57l-6.06 6.06-1.14 1.14c-.155.155-.345.233-.568.233s-.413-.078-.57-.234l-1.138-1.14-3.03-3.03c-.156-.156-.234-.346-.234-.57z",fill:"currentColor"}))),a&&H.a.createElement(fr,null,a))};br.displayName="VizExCheckbox";br.propTypes={checked:h.a.bool,children:h.a.node,focus:h.a.bool,hover:h.a.bool,onChange:h.a.func,theme:ar.a};var gr=br,vr=b.a.div.withConfig({displayName:"ConsentToCommunicate__BreakString",componentId:"can64m-0"})(["-ms-word-break:break-all;display:block;word-break:break-word;word-wrap:break-word;"]),Or=b()(at.a).withConfig({displayName:"ConsentToCommunicate__SmallNoParagraphPadding",componentId:"can64m-1"})(["p{margin-bottom:0;}"]),jr=function(e){var t=e.message,n=e.companyName,a=e.consentToCommunicate,r=e.onChange,i=Object(ln.a)(t)||Tt.a.text("conversations-visitor-message-history.email-capture.consentToCommunicate",{accountName:n});return H.a.createElement(gr,{checked:a,onChange:r},H.a.createElement(Or,{use:"help"},H.a.createElement(vr,null,H.a.createElement("span",{dangerouslySetInnerHTML:{__html:i}}))))};jr.displayName="ConsentToCommunicate";jr.propTypes={companyName:h.a.string,consentToCommunicate:h.a.bool.isRequired,message:h.a.string.isRequired,onChange:h.a.func.isRequired};var yr=jr,xr=/\s|@.{0,}@/,Cr=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onConsentChange=function(){n.setState({hasConsentedToCommunicate:!n.state.hasConsentedToCommunicate})};n.state={email:"",emailError:!1,hasConsentedToCommunicate:!1,submitFailure:!1,submissionState:"ready"};n.handleChange=n.handleChange.bind(Object(d.a)(n));n.handleKeyPress=n.handleKeyPress.bind(Object(d.a)(n));n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n));return n}Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({email:e.target.value,emailError:!1,submitFailure:!1,submissionState:"ready"})}},{key:"handleKeyPress",value:function(e){var t=13;e.which===t&&this.handleSubmit()}},{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.sendVisitorEmailAddress,a=t.threadId,r=this.state,i=r.email,o=r.hasConsentedToCommunicate,s=i.trim();Wa.a.test(s)&&!s.match(xr)?this.setState({submissionState:"submitting"},function(){n({email:s,consentToCommunicate:o,threadId:a}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).error;e.setState({submitFailure:Boolean(t),submissionState:"done"})}).done()}):this.setState({emailError:!0,submissionState:"ready"})}},{key:"getValidationMessage",value:function(){switch(!0){case this.state.emailError:return H.a.createElement(Mn.a,{message:"conversations-visitor-message-history.email-capture.invalid"});case this.state.submitFailure:return H.a.createElement(Mn.a,{message:"conversations-visitor-message-history.email-capture.failed"});default:return null}}},{key:"render",value:function(){var e=this.props,t=e.companyName,n=e.consentToCommunicateMessage,a=e.hasVisitorEmail,r=e.message,i=e.positionDescriptors,o=e.requiresConsentToCommunicate,s=this.state,c=s.email,u=s.hasConsentedToCommunicate,l=this.getValidationMessage();return H.a.createElement(Ze,{positionDescriptors:i,use:X.a},H.a.createElement(Ve,null,a?H.a.createElement(De,null,H.a.createElement(Mn.a,{"data-test-id":"email-capture-success",message:"conversations-visitor-message-history.email-capture.thanks"})):H.a.createElement(H.a.Fragment,null,H.a.createElement(nr,{message:r,email:c,errorMessage:l,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onSubmit:this.handleSubmit,submissionState:this.state.submissionState}),o&&H.a.createElement(De,{key:"email-prompt-content-section"},H.a.createElement(yr,{message:n,companyName:t,consentToCommunicate:u,onChange:this.onConsentChange})))))}}]);return t}(V.PureComponent);Cr.displayName="EmailCapturePromptMessage";Cr.propTypes={companyName:h.a.string,consentToCommunicateMessage:h.a.string,hasVisitorEmail:h.a.bool.isRequired,message:h.a.oneOfType([Object(p.a)("PubNubMessageRecord"),Object(p.a)("EmailCapturePromptMessage")]).isRequired,positionDescriptors:$.a.isRequired,requiresConsentToCommunicate:h.a.bool,sendVisitorEmailAddress:h.a.func.isRequired,threadId:h.a.number.isRequired};var kr=Cr,Er=n("19qb"),Tr=n("AQmo"),wr=n("le4V"),Ir=n("MBJP"),Sr=n("ZqFO"),Rr=n("647q"),Ar=Object(Ir.a)(Rr.getLatestWidgetData,function(e){return Object(Sr.c)(e)}),Mr=Object(Ir.a)(Rr.getLatestWidgetData,Object(le.a)("companyName")),Pr=n("Wtdz"),Nr=n("AEyM"),qr=n("eEyY"),Fr=function(e){return{coloring:Object(Tr.a)(e),companyName:Mr(e),consentToCommunicateMessage:Ar(e),hasVisitorEmail:Object(Pr.a)(e),requiresConsentToCommunicate:Object(wr.a)(e),threadId:Object(qr.getCurrentThreadId)(e)}},_r={sendVisitorEmailAddress:Nr.sendVisitorEmailAddress},Lr=Object(Er.connect)(Fr,_r)(kr),Br=function(e){return H.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 28 25"},e),H.a.createElement("path",{d:"M12 7.663c-.042-.286.044-.577.234-.796.192-.218.469-.344.76-.344h2.011c.292 0 .57.126.76.344.192.22.277.51.236.796l-1.006 6.992c-.07.492-.494.857-.995.857-.5 0-.925-.365-.995-.857l-1.006-6.992zm2 13.841c-1.11 0-2.01-.894-2.01-1.997 0-1.103.9-1.998 2.01-1.998 1.111 0 2.01.895 2.01 1.998s-.899 1.997-2.01 1.997zm3.001-19.783C16.375.643 15.253 0 14 0s-2.374.643-3 1.72L.47 19.838c-.627 1.078-.627 2.365 0 3.442C1.096 24.357 2.217 25 3.47 25H24.53c1.253 0 2.374-.643 3-1.72.627-1.078.627-2.365 0-3.443L17.001 1.721z",fillRule:"evenodd"}))};Br.displayName="SVGWarning";var Dr=Br,zr=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,a=e.onRepublish,r=e.positionDescriptors,i=Object(An.a)(n);return H.a.createElement(Ze,{positionDescriptors:r,use:X.c},H.a.createElement(Va,{fileAttachments:t,isLastMessage:!0,message:i}),H.a.createElement(Ue,null,H.a.createElement(at.a,{use:"error"},H.a.createElement(ya.a,{icon:H.a.createElement(Dr,null),className:"m-right-1"}),H.a.createElement(ra.a,{onClick:function(){return a(i)},use:"error"},H.a.createElement(Mn.a,{message:"conversations-visitor-message-history.status.publishing.PUBLISH_FAILED"})))))}}]);return t}(V.PureComponent);zr.displayName="FailedToPublishMessage";zr.propTypes={fileAttachments:h.a.instanceOf(Pn.List),message:Object(p.a)("FailedToPublish").isRequired,onRepublish:h.a.func.isRequired,positionDescriptors:$.a.isRequired};var Vr=zr,Hr={onRepublish:n("N4ZN").a},Ur=Object(Er.connect)(null,Hr)(Vr),Wr=n("gGDi");function Qr(e){return"string"==typeof e}function Yr(e){return Qr(e)?e:e.has("label")?e.get("label"):e.get("value")}function Jr(e){return Qr(e)?e:e.get("value")}var Gr=n("k8Ub"),Kr=n("eEuy"),Zr=n("A5YI"),Xr=function(e){return H.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 32 32"},e),H.a.createElement("path",{d:"M29.92 2.58L11.33 21.17l-9.25-9.25c-.362-.362-.862-.586-1.415-.586-1.105 0-2.001.896-2.001 2.001 0 .553.224 1.053.586 1.415L9.92 25.41c.362.362.862.587 1.415.587s1.053-.224 1.415-.587l20-20c.362-.362.586-.862.586-1.415 0-1.105-.896-2.001-2.001-2.001-.553 0-1.053.224-1.415.586z"}))};Xr.displayName="SVGSuccess";var $r=Xr,ei=b.a.div.withConfig({displayName:"QuickReplyGroup__ButtonWrapper",componentId:"sc-1v9s9ie-0"})(["margin-bottom:12px;> *{margin-right:8px;margin-bottom:8px;}> *:last-child{margin-right:0;}padding:8px;display:inline-block;"]),ti=b()(Qa.a).withConfig({displayName:"QuickReplyGroup__LeftAlignButton",componentId:"sc-1v9s9ie-1"})(["text-align:left;"]),ni=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSendMulti=n.handleSendMulti.bind(Object(d.a)(n));n.handleQuickReplySend=n.handleQuickReplySend.bind(Object(d.a)(n));n.handleSendIndividual=n.handleSendIndividual.bind(Object(d.a)(n));n.handleSelect=n.handleSelect.bind(Object(d.a)(n));n.state={selected:Object(Pn.Set)()};return n}Object(s.a)(t,[{key:"hasSelected",value:function(){return this.state.selected.size>0}},{key:"handleSelect",value:function(e){this.setState(function(t){var n=t.selected;return{selected:n.includes(e)?n.delete(e):n.add(e)}})}},{key:"handleSendMulti",value:function(){var e=this.props.multiSelect,t=this.state.selected;if(e&&this.hasSelected()){var n=t.map(Yr).join(", ");this.handleQuickReplySend(n,t)}}},{key:"handleSendIndividual",value:function(e){if(!this.props.multiSelect){var t=Object(Pn.List)([e]),n=Yr(e);this.handleQuickReplySend(n,t)}}},{key:"handleQuickReplySend",value:function(e,t){var n=this.props,a=n.message;(0,n.publishMessage)({text:e,quickReply:Object(Gr.a)(a).set("quickReplies",t.toJS())})}},{key:"renderOptions",value:function(){var e=this.props,t=e.options,n=e.multiSelect,a=e.disabled,r=this.state.selected,i=n?this.handleSelect:this.handleSendIndividual;return t.map(function(e){var t=function(){return i(e)},o=r.includes(e),s=Jr(e),c=Yr(e);if(!s||!c)return null;var u=n&&H.a.createElement(gr,{className:"m-right-2",checked:o,onChange:t},c);return H.a.createElement(ti,{key:"quickreply."+s,onClick:t,disabled:a,size:"sm"},u||c)})}},{key:"renderSendButton",value:function(){var e=this.props,t=e.disabled;if(!e.multiSelect)return null;var n=!this.hasSelected()||t;return H.a.createElement(Zr.a,{disabled:n,onClick:this.handleSendMulti,key:"send-button",size:"sm"},H.a.createElement(ya.a,{icon:H.a.createElement($r,null),size:"sm"}))}},{key:"render",value:function(){return H.a.createElement(ei,{"data-test-id":"quick-reply-group"},[].concat(Object(Kr.a)(this.renderOptions()),[this.renderSendButton()]))}}]);return t}(H.a.Component);ni.contextType=ye;ni.defaultProps={multiSelect:!1,hasSentReply:!1};ni.displayName="QuickReplyGroup";ni.propTypes={disabled:h.a.bool.isRequired,message:h.a.oneOfType([Object(p.a)("CommonMessage"),Object(p.a)("PubNubMessageRecord"),Object(p.a)("InitialMessage")]).isRequired,multiSelect:h.a.bool.isRequired,options:h.a.instanceOf(Pn.Set).isRequired,publishMessage:h.a.func};var ai=ni,ri=7,ii=(n("PrNr"),rr.f),oi=rr.e,si=(rr.a,rr.b,rr.g,rr.f,rr.h,rr.h),ci=(rr.h,"__PLACEHOLDER_VALUE__"),ui=b.a.select.withConfig({displayName:"VizExMobileSelect__StyledSelect",componentId:"y7f1s9-0"})(["appearance:none;background:none;border-radius:3px;border:1px solid transparent;color:inherit;cursor:inherit;font-size:16px;margin:0;outline:none;padding:8px 32px 10px 10px;width:100%;height:40px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;&::-ms-expand{display:none;}:focus::-ms-value{color:",";background:transparent;}"],function(e){var t=e.theme;return Object(rr.i)(t)}),li=b.a.div.withConfig({displayName:"VizExMobileSelect__SelectContainer",componentId:"y7f1s9-1"})(["background-color:",";border-radius:3px;border:1px solid ",";cursor:pointer;display:block;font-size:16px;height:40px;line-height:22px;padding:0;position:relative;text-align:left;transition:all 0.15s ease-out;width:100%;&::after{border-color:transparent;border-style:solid;border-width:0.375em;display:inline-block;vertical-align:middle;border-top-color:",";margin-top:0.375em;margin-top:-3px;content:' ';position:absolute;top:50%;right:1em;z-index:2;pointer-events:none;}"],function(e){var t=e.theme;return oi(t)},function(e){var t=e.theme;return ii(t)},function(e){var t=e.theme;return si(t)}),di=function(e){var t=e.options,n=e.disabled,a=e.value,r=e.onChange,i=e.placeholder,o=e.theme,s=Object(Xe.a)(e,["options","disabled","value","onChange","placeholder","theme"]),c=t.map(function(e){var t=e.value,n=e.text;return H.a.createElement("option",{value:t,key:t},n)});return H.a.createElement(li,{theme:o},H.a.createElement(ui,Object.assign({},s,{"data-testid":"VizExSelect",disabled:n,defaultValue:ci,value:a,onChange:r,theme:o}),i&&H.a.createElement("option",{disabled:!0,value:ci},i),c))};di.displayName="VizExMobileSelect";di.propTypes={disabled:h.a.bool,onChange:h.a.func.isRequired,options:h.a.arrayOf(h.a.shape({text:h.a.string,value:h.a.string})).isRequired,placeholder:h.a.string,theme:ar.a,value:h.a.string};var pi=di,mi="__PLACEHOLDER_VALUE__",hi=function(e){var t=e.quickReplyOptions,n=e.onChange,a=e.disabled,r=e.value,i=e.placeholder,o=Object(V.useMemo)(function(){return t.map(function(e){var t=Jr(e);return{text:Yr(e),value:t}}).toJS()},[t]);return H.a.createElement(pi,{options:o,onChange:n,disabled:a,defaultValue:mi,value:r,placeholder:i})};hi.displayName="QuickReplySelect";hi.propTypes={disabled:h.a.bool,onChange:h.a.func.isRequired,placeholder:h.a.string,quickReplyOptions:h.a.instanceOf(Pn.OrderedSet).isRequired,value:h.a.string};var fi=hi,bi=n("VADA"),gi=n("pHbL"),vi=n("WPep"),Oi=n("SGjM"),ji=n("8HiZ"),yi=Object(te.a)(function(e){var t=e.companyLogo,n=e.customChatName;return new ji.a({avatar:t,firstName:n,senderType:G.a})}),xi=n("Ebn+"),Ci=n("G6fO"),ki=Object(te.a)(function(e,t,n){var a=Object(xi.agentTypeToSenderType)(Object(Ci.getAgentType)(e)||n);return new ji.a({id:Object(Ci.getUserId)(e)||t,avatar:Object(Ci.getAvatar)(e),firstName:Object(Ci.getFirstName)(e),email:Object(Ci.getEmail)(e),lastName:Object(Ci.getLastName)(e),senderType:a})}),Ei=b.a.div.withConfig({displayName:"InitialMessageAvatar__MultiAvatarWrapper",componentId:"d1vvcj-0"})(["width:100%;height:100%;display:flex;justify-content:center;flex-wrap:wrap;margin-right:4px;margin-left:-4px;& > *{flex:1;line-height:1;position:relative;& > *{position:absolute;left:0;bottom:-8px;}div{background-color:white;}}"]),Ti=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"getSenderAvatars",value:function(){var e=this.props,t=e.chatHeadingConfig,n=e.sender,a=e.sendFromResponders;if(Object(vi.isFromBot)(n))return Object(Pn.List)([n]);if(a.size)return Object(Oi.a)(ki,a);var r=Object(bi.a)(t);return r?Object(Pn.List)([yi({companyLogo:r,customChatName:Object(gi.a)(t)})]):Object(Pn.List)()}},{key:"renderAvatars",value:function(){var e=this.getSenderAvatars();if(!e.size)return H.a.createElement(Z,null);if(1===e.size){var t=e.get(0);return H.a.createElement(Z,{sender:t})}var n=2===e.size;return H.a.createElement(Ei,null,e.map(function(e,t){return H.a.createElement(Z,{key:t,sender:e,size:n?"xs":"xxs"})}))}},{key:"render",value:function(){return H.a.createElement(_e,null,this.renderAvatars())}}]);return t}(V.PureComponent);Ti.displayName="InitialMessageAvatar";Ti.propTypes={chatHeadingConfig:h.a.oneOfType([Object(p.a)("CompanyChatHeadingConfig"),Object(p.a)("OwnerChatHeadingConfig"),Object(p.a)("UsersAndTeamsChatHeadingConfig")]),sendFromResponders:h.a.instanceOf(Pn.List).isRequired,sender:Object(p.a)("Sender")};var wi=Ti,Ii=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleQuickReplySend=function(){var e=n.props,t=e.message,a=e.publishMessage,r=n.state.selectedQuickReply;a({text:Yr(r),quickReply:Object(Gr.a)(t).set("quickReplies",[r])})};n.handleQuickReplySelect=function(e){var t=e.target.value,a=n.props.message,r=Object(Gr.d)(a).filter(function(e){return Jr(e)===t}).first();n.setState({selectedQuickReply:r})};n.showQuickReplySelection=function(){var e=n.props.message,t=Object(Gr.d)(e),a=Object(Gr.b)(e);return n.showQuickReplies()&&t.count()>ri&&!a};n.renderQuickReplySelect=function(){var e=n.props,t=e.message,a=e.isThreadStarted,r=e.requiresExplicitConsentToProcess,i=n.state.selectedQuickReply,o=Object(Gr.d)(t);return H.a.createElement("div",{className:"m-y-2"},H.a.createElement(fi,{quickReplyOptions:o,disabled:r||!a,onChange:n.handleQuickReplySelect,value:Jr(i),placeholder:Tt.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")}))};n.renderQuickReplySendButton=function(){var e=n.props.isThreadStarted,t=n.state.selectedQuickReply;return H.a.createElement(Ue,null,H.a.createElement(Qa.a,{disabled:!e||!Jr(t),onClick:n.handleQuickReplySend,size:"sm",use:"primary"},H.a.createElement(rt.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})))};n.state={selectedQuickReply:Object(Pn.Map)()};return n}Object(s.a)(t,[{key:"hasQuickReplyOptions",value:function(){var e=this.props.message,t=Object(Ie.getSenderType)(e);return Object(Gr.a)(e)&&t===G.b}},{key:"showQuickReplies",value:function(){var e=this.props,t=e.hasUnansweredQuickReplyMessage,n=e.positionDescriptors,a=t&&n.get(Rn.c);return this.hasQuickReplyOptions()&&a}},{key:"renderAvatar",value:function(){var e=this.props,t=e.chatHeadingConfig,n=e.message,a=e.senders,r=e.sendFromResponders,i=Object(Ie.getSenderId)(n),o=Object(Ie.getSenderType)(n),s=ae(i,o,a),c=Object(Q.b)(s);return H.a.createElement(wi,{chatHeadingConfig:t,sender:c,sendFromResponders:r})}},{key:"renderQuickReplyGroup",value:function(){var e=this.props,t=e.isThreadStarted,n=e.message,a=e.publishMessage,r=e.requiresExplicitConsentToProcess,i=Object(Gr.d)(n),o=Object(Gr.b)(n);return H.a.createElement(Ue,null,H.a.createElement(ai,{disabled:r||!t,options:i,message:n,multiSelect:o,publishMessage:a,onSend:this.handleQuickReplySend}))}},{key:"renderContentSection",value:function(){var e,t,n=this.props.message;if(Boolean(Object(W.getType)(n))){e=Object(Ie.getPlainText)(n);t=Object(Ie.getRichText)(n)}else{e=Object(Wr.b)(n);t=Object(Wr.a)(n)}var a=Ba.a.link(t,{stripPrefix:!1});return H.a.createElement(De,null,H.a.createElement(pn,{"aria-label":Tt.a.text("conversations-visitor-message-history.agentMessage"),contentText:a||e}),this.showQuickReplySelection()&&this.renderQuickReplySelect())}},{key:"renderMessageFooter",value:function(){var e=this.props.message,t=Object(Gr.d)(e),n=Object(Gr.b)(e);return this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=ri||n)?this.renderQuickReplyGroup():null}},{key:"render",value:function(){var e=this.props.positionDescriptors,t=e.get(Rn.a);return H.a.createElement(Ze,{positionDescriptors:e,use:X.a},t&&H.a.createElement(Qe,null,this.renderAvatar()),H.a.createElement(Ve,null,this.renderContentSection()),this.renderMessageFooter())}}]);return t}(V.PureComponent);Ii.displayName="InitialMessage";Ii.propTypes={chatHeadingConfig:h.a.oneOfType([Object(p.a)("CompanyChatHeadingConfig"),Object(p.a)("OwnerChatHeadingConfig"),Object(p.a)("UsersAndTeamsChatHeadingConfig")]),hasUnansweredQuickReplyMessage:h.a.bool,isThreadStarted:h.a.bool.isRequired,message:h.a.oneOfType([Object(p.a)("PubNubMessageRecord"),Object(p.a)("InitialMessage")]).isRequired,positionDescriptors:$.a.isRequired,publishMessage:h.a.func,requiresExplicitConsentToProcess:h.a.bool.isRequired,sendFromResponders:h.a.instanceOf(Pn.List).isRequired,senders:ee.a.isRequired};var Si=Ii,Ri=n("p9k8"),Ai=n("WUj5"),Mi=n("hTKa"),Pi=n("PYok"),Ni=n("byjC"),qi=n("k09d"),Fi=n("wD2U"),_i=function(e){var t=Object(qi.a)(e);return{chatHeadingConfig:Object(Ai.a)(e),sendFromResponders:Object(Mi.a)(e),hasUnansweredQuickReplyMessage:Object(Ni.a)(e,{thread:t}),isThreadStarted:Object(Ri.a)(t),mobile:Object(Fi.getIsMobile)(e)}},Li={publishMessage:Pi.a},Bi=Object(Er.connect)(_i,Li)(Si),Di=function(e){return e?Tt.a.moment.userTz(e).format("LT"):null},zi=function(e){var t=Object(Ie.getSenderType)(e);return Object(Gr.a)(e)&&t===G.b},Vi=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleQuickReplySend=function(){var e=n.props,t=e.message,a=e.publishMessage,r=n.state.selectedQuickReply;a({text:Yr(r),quickReply:Object(Gr.a)(t).set("quickReplies",[r])})};n.handleQuickReplySelect=function(e){var t=e.target.value,a=n.props.message,r=Object(Gr.d)(a).filter(function(e){return Jr(e)===t}).first();n.setState({selectedQuickReply:r})};n.showQuickReplies=function(){var e=n.props,t=e.hasUnansweredQuickReplyMessage,a=e.message,r=e.positionDescriptors,i=t&&r.get(Rn.c);return zi(a)&&i};n.showQuickReplySelection=function(){var e=n.props.message,t=Object(Gr.d)(e),a=Object(Gr.b)(e);return n.showQuickReplies()&&t.count()>ri&&!a};n.renderQuickReplyGroup=function(){var e=n.props,t=e.isThreadStarted,a=e.message,r=e.publishMessage,i=e.requiresExplicitConsentToProcess,o=Object(Gr.d)(a),s=Object(Gr.b)(a);return H.a.createElement(Ue,null,H.a.createElement(ai,{options:o,disabled:i||!t,message:a,multiSelect:s,publishMessage:r,onChange:n.handleQuickReplyUpdate}))};n.renderQuickReplySendButton=function(){var e=n.props.isThreadStarted,t=n.state.selectedQuickReply;return H.a.createElement(Ue,null,H.a.createElement(Qa.a,{disabled:!e||!Jr(t),onClick:n.handleQuickReplySend,size:"sm",use:"primary"},H.a.createElement(rt.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})))};n.renderQuickReplySelect=function(){var e=n.props,t=e.message,a=e.isThreadStarted,r=e.requiresExplicitConsentToProcess,i=n.state.selectedQuickReply,o=Object(Gr.d)(t);return H.a.createElement("div",{className:"m-bottom-3 m-x-3"},H.a.createElement(fi,{quickReplyOptions:o,disabled:r||!a,onChange:n.handleQuickReplySelect,value:Jr(i),placeholder:Tt.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")}))};n.state={selectedQuickReply:Object(Pn.Map)()};return n}Object(s.a)(t,[{key:"isSentFromVisitor",value:function(){return Object(Ie.getSenderType)(this.props.message)===G.e}},{key:"renderMessageHeader",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors,a=e.senders;if(!n.includes(Rn.b)||this.isSentFromVisitor())return null;var r=Object(Ie.getSenderId)(t),i=Object(Ie.getSenderType)(t),o=ae(r,i,a),s=Object(Q.b)(o);s||(s=Object(ji.a)({senderType:i,firstName:Object(Ie.getFromName)(t),email:Object(Ie.getFromAddress)(t)||null}));var c=ie(o);return H.a.createElement(Qe,null,H.a.createElement(_e,null,H.a.createElement(Z,{sender:s,isLoading:c})),H.a.createElement(Je,null,H.a.createElement(dt,{isSenderLoading:c,sender:s})))}},{key:"renderTimeStamp",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors.includes(Rn.d),a=Object(Ie.getTimestamp)(t);return n&&a?H.a.createElement(Ue,null,H.a.createElement(at.a,{use:"help"},Di(a))):null}},{key:"renderMessageFooter",value:function(){var e=this.props.message,t=Object(Gr.d)(e),n=Object(Gr.b)(e);return this.showQuickReplies()&&this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=ri||n)?this.renderQuickReplyGroup():this.renderTimeStamp()}},{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,a=e.positionDescriptors,r=e.toggleOpen,i=e.mobile,o=this.isSentFromVisitor()?X.c:X.a;return H.a.createElement(Ze,{positionDescriptors:a,use:o},this.renderMessageHeader(),H.a.createElement(Va,{fileAttachments:t,isLastMessage:a.includes(Rn.c),message:n,quickReplySelect:this.showQuickReplySelection()&&this.renderQuickReplySelect,mobile:i,toggleOpen:r}),this.renderMessageFooter())}}]);return t}(V.PureComponent);Vi.displayName="CommonMessage";Vi.propTypes={fileAttachments:h.a.instanceOf(Pn.List),hasUnansweredQuickReplyMessage:h.a.bool,isThreadStarted:h.a.bool.isRequired,message:h.a.oneOfType([Object(p.a)("PubNubMessageRecord"),Object(p.a)("CommonMessage")]).isRequired,mobile:h.a.bool,positionDescriptors:$.a.isRequired,publishMessage:h.a.func,requiresExplicitConsentToProcess:h.a.bool.isRequired,senders:ee.a,toggleOpen:h.a.func};var Hi,Ui=Vi,Wi=n("jxkM"),Qi=function(e){var t=Object(qi.a)(e);return{hasUnansweredQuickReplyMessage:Object(Ni.a)(e,{thread:t}),isThreadStarted:Object(Ri.a)(t),mobile:Object(Fi.getIsMobile)(e)}},Yi={publishMessage:Pi.a,toggleOpen:Wi.toggleOpen},Ji=Object(Er.connect)(Qi,Yi)(Ui),Gi=n("lOT2"),Ki=function(e){return{requiresExplicitConsentToProcess:Object(Gi.a)(e)}},Zi={},Xi=Object(Er.connect)(Ki,Zi);n.d(t,"a",function(){return $i});var $i=(Hi={},Object(r.a)(Hi,Ot.a,Ua),Object(r.a)(Hi,gt.d,Ji),Object(r.a)(Hi,bt.a,Xi(Ji)),Object(r.a)(Hi,i.a,Sn),Object(r.a)(Hi,gt.i,Lr),Object(r.a)(Hi,Ot.b,Ur),Object(r.a)(Hi,gt.l,Xi(Bi)),Object(r.a)(Hi,gt.p,vn),Object(r.a)(Hi,gt.t,vn),Object(r.a)(Hi,vt.a,ft),Hi)},"5els":function(e,t,n){var a=n("uIOU"),r=n("EzJv"),i=n("2+Io");function o(){this.size=0;this.__data__={hash:new a,map:new(i||r),string:new a}}e.exports=o},"5oUx":function(e,t,n){"use strict";var a=n("UG02"),r=n("Ebn+"),i=n("G6fO"),o=n("MBJP"),s=n("k09d"),c=n("Q2fA"),u=Object(o.a)([function(e){return e},s.a],function(e,t){return Object(c.a)(e,{thread:t})}),l=n("eEyY"),d=n("QYOI"),p=n("0sif"),m=n("IhEF"),h=n("B/8b");n.d(t,"a",function(){return f});var f=Object(o.a)([u,l.getCurrentThreadId],function(e,t){if(!e||!t)return Object(d.List)();var n=Object(r.agentTypeToCMFSenderType)(Object(i.getAgentType)(e),!0),o=Object(h.a)(n);return Object(d.List)([new p.a({id:Object(m.generateUuid)(),typingState:null,sender:Object(a.a)({"@type":n},o,Object(i.getUserId)(e))})])})},"5rZi":function(e,t,n){"use strict";n.r(t);n.d(t,"createNewThread",function(){return I});var a=n("+LtA"),r=n("Zsd8"),i=n("QYOI"),o=n("JGJA"),s=n("4dq7"),c=n("3sRQ"),u=n("sWFM"),l=n("V0XL"),d=n("E6wg"),p=n("lJFu"),m=n("Ryja"),h=n("Ux+X"),f=n("zZL2"),b=n("OTPB"),g=n("k3iI"),v=n("qwm9"),O=n("D1SC"),j=n("PY3R"),y=n("q1tZ"),x=n("647q"),C=n("2BFa"),k=n("xM+F"),E=Object(r.createAction)(O.a.STARTED),T=Object(r.createAction)(O.a.SUCCEEDED),w=Object(r.createAction)(O.a.FAILED);function I(){return function(e,t){var n=Object(d.getSessionId)(t()),r=Object(u.getMessageId)(t()),O=Object(l.getMessagesPageUri)(t()),I=Object(f.getHubspotUtk)(t()),S=Object(x.getLatestWidgetData)(t());e(E());return Object(v.createVisitorThread)({sessionId:n,hubspotUtk:I,messageId:r,messagesPageUri:O,visitorThreadInitialHistory:Object(m.getVisitorInitialThreadHistory)(t()),widgetData:S}).then(function(n){var r=n.channelDetails,u=n.sessionId,l=n.id,d=n.history,m=n.shouldAskForEmail,f=new a.a(Object.assign({},d,{attachments:Object(i.Map)(Object(o.a)("attachments",d))})),v=Object(p.buildCreatedThread)({channelDetails:r,messagesPageUri:O,threadId:l,threadHistory:f});e(Object(g.updateSessionId)(u));e(Object(h.trackInteraction)("start-conversation",{action:"new conversation started",threadId:l}));e(T({channel:Object(y.a)(r),threadId:l,conversation:v,threadHistory:f,shouldAskForEmail:m}));e(Object(s.addAvailabilityMessage)({channel:Object(y.a)(r),threadId:l}));e(Object(j.a)({thread:v}));Object(C.gdprCookieConsentOnExitIntentEnabled)(t(),S)||Object(k.getIsPrivateLoad)(S)||e(Object(c.handleStoreMessagesCookie)(Object(b.getMessagesUtk)(t())))}).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(w({status:t.status,message:t.message,error:t}))})}}},"6PLn":function(e,t,n){"use strict";n.r(t);n.d(t,"applyGdprConsent",function(){return i});var a=n("Qf6G"),r=n("FPMu"),i=function(){return function(e,t){Object(r.shouldRecordImplicitConsentToProcess)(t())&&e(Object(a.consentToProcess)());return Promise.resolve()}}},"6aYC":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("IFrL"),r=n("vr6k"),i=n("MBJP"),o=n("eEyY"),s=n("goEE"),c=n("a/jS"),u=Object(i.a)([c.a,o.getCurrentThreadId],function(e,t){var n=Object(r.getEntries)(e).map(a.a);return Object(s.getSortedMessagesByThreadId)(n,t)})},"6s0Z":function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return r});n.d(t,"c",function(){return i});var a="agent",r="default",i="visitor"},"6upE":function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=n},"6xAP":function(e,t,n){"use strict";var a=n("eP/i"),r=n("QYOI"),i=n("rkqN"),o=Object(r.Record)({width:"auto",minHeight:36,borderColor:a.h,whiteSpace:"normal",lineHeight:"1rem",color:a.h},"QuickReplyTheme"),s=Object(r.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:a.l,borderColor:a.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:a.p,fileAttachmentTheme:Object(i.a)(),quickReplyTheme:o(),headerBackgroundColor:a.q,headerTextColor:a.p,avatarBackgroundColor:a.a,avatarBorderColor:a.a,avatarTextColor:a.p},"Theme");t.a=s},"7A+m":function(e,t,n){"use strict";var a=n("19qb"),r=n("8g7g"),i=n("V2EP"),o=n("jM00"),s=n("PYok"),c=n("7yF8"),u=n("MBJP"),l=n("sQV+"),d=n("M/2P"),p=Object(u.a)([d.getAsyncPubSubClient],l.isFailed),m=n("k09d"),h=n("AQmo"),f=n("V0XL"),b=n("JoPj"),g=n("byjC"),v=n("ZAuv"),O=n("w1Zi"),j=n("84LK"),y=n("piVz"),x=n("80AS"),C=n("jRRu"),k=n("wD2U"),E=n("vwA6"),T=n("gALC"),w=n("MJM1"),I=Object(w.a)(["isAttachmentDisabled"]),S=n("QnHA"),R=Object(u.a)([S.a],function(e){return I(e)}),A=n("NpZo"),M=n("JGJA"),P=function(e){return Object(M.a)("messageEditorStaging",e)},N=n("w1qe"),q=function(e,t){return Object(w.a)([e,N.a],t)},F=Object(u.a)(A.getSelectedThreadId,P,function(e,t){return q(e,t)}),_=n("Zsd8"),L=n("NID/"),B=Object(_.createAction)(L.H,function(e){return e}),D=Object(_.createAction)(L.A),z=function(e){return function(t,n){t(B({stagingText:e,threadId:Object(A.getSelectedThreadId)(n())}))}},V=function(){return function(e,t){e(D(Object(A.getSelectedThreadId)(t())))}},H=n("oHra"),U=n("/gEt"),W=n("2gT5"),Q=n("A+sO"),Y=function(e){var t=Object(m.a)(e),n=!Object(x.a)(e,{thread:t})&&Object(g.a)(e,{thread:t}),a=Object(C.getIsBot)(e)&&Object(Q.getIsWidgetInAwayMode)(e)&&!Object(W.isPersistedThread)(t);return{coloring:Object(h.a)(e),currentConversation:t,disablePublish:!Object(c.a)(e),disableTextInput:n||a,showQuickReplyPlaceholder:n,isOnFocus:Object(T.a)(e),stagedMessage:F(e),messagesPageUri:Object(f.getMessagesPageUri)(e),networkOffline:p(e),showingHsBranding:Object(b.a)(e),showInitialMessageBubble:Object(y.a)(e),stagedAttachments:Object(o.a)(e),mobile:Object(k.getIsMobile)(e),shouldDisableAttachment:R(e),shouldSendInputStagingEvent:Object(U.a)()}},J={closeInitialMessageBubble:j.a,inputStagingEvent:H.a,onRemoveAttachment:r.a,onSelectAttachmentFile:i.a,publishMessage:s.a,publishTypingMessage:v.a,toggleOnAndOffInputFocus:E.a,setMessageEditorStagingText:z,removeMessageEditorStagingText:V};t.a=Object(a.connect)(Y,J)(O.a)},"7j4v":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=5e3},"7yF8":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n("MBJP"),r=n("JGJA"),i=n("sQV+"),o=n("kV9q"),s=n("M/2P"),c=n("rjAk"),u=n("Ryja"),l=n("dHfq"),d=n("ZSXR"),p=Object(r.a)("subscriptions"),m=Object(a.a)([u.getAsyncStagedThread,s.getAsyncPubSubClient,c.hasPersistedThreads,p,l.a,d.a],function(e,t,n,a,r,s){return!Object(i.isStarted)(e)&&(!(!Object(i.isUninitialized)(e)||n)||!(!Object(i.isSucceeded)(r)&&!Object(i.isUninitialized)(r)||!Object(i.isSucceeded)(s)&&!Object(i.isUninitialized)(s))&&(!!(n&&Object(o.isClientReady)(t)&&Object(i.isSucceeded)(a))||!!(Object(i.isSucceeded)(e)&&Object(o.isClientReady)(t)&&Object(i.isSucceeded)(a))))})},"80AS":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("MBJP"),r=n("J4oD"),i=n("nEm4"),o=n("iPDb"),s=n("k8Ub"),c=n("kWFB"),u=Object(a.a)([r.historyDataForThread],function(e){if(!e||!Object(c.hasMessages)(e))return!0;var t=Object(o.a)(e).filter(function(e){return Object(i.isChatMessage)(e)||Object(i.isInitialMessage)(e)}).last();return Object(s.c)(t)})},"84zR":function(e,t,n){"use strict";n.r(t);n.d(t,"uploadAttachment",function(){return b});var a=n("4FzD"),r=n("A3yT"),i=n("Ux+X"),o=n("E6wg"),s=n("9P7L"),c=n("xAl4"),u=n("JIa2"),l=n("VXRw"),d=n("lnDz"),p=n("Zn4N"),m=n("gygH"),h=n("Wnz4"),f=n("kSDi"),b=function(e){var t=e.attachment,n=e.threadId;return function(e,b){var g=Date.now();e(Object(l.attachmentUploadStart)({attachment:t,threadId:n}));var v=Object(o.getSessionId)(b()),O=Object(r.getLocalId)(t),j=Object(r.getFile)(t),y=Object(u.createFormDataForAttachment)({file:j});return Object(s.fetchAttachmentUploadUrlClient)({sessionId:v,threadId:n}).then(function(t){var a=t.uploadUrl;return Object(c.uploadAttachmentClient)({formData:y,onProgress:function(t){var a=t.loaded,r=t.total;e(Object(m.handleAttachmentUploadProgress)({localId:O,threadId:n,loaded:a,total:r}))},uploadUrl:f.a+"/"+a})}).then(function(t){var r=Object(a.a)(t.objects,1)[0],o=Date.now();e(Object(d.attachmentUploadComplete)({localId:O,threadId:n,fileId:r.id,uploadedFile:r}));e(Object(i.trackInteraction)("attached-file",{action:"attached file","attachment-type":r.extension,"attachment-size-bytes":j.size,"upload-time-ms":o-g}))}).catch(function(){e(Object(h.attachmentError)(p.b,n));e(Object(i.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":"upload error"}))})}}},"8FuJ":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("Ebn+"),r=n("8HiZ"),i=n("G6fO"),o=n("MBJP"),s=Object(o.b)(function(e,t,n){var o=Object(a.agentTypeToSenderType)(Object(i.getAgentType)(e)||n);return new r.a({id:Object(i.getUserId)(e)||t,avatar:Object(i.getAvatar)(e),firstName:Object(i.getFirstName)(e),email:Object(i.getEmail)(e),lastName:Object(i.getLastName)(e),senderType:o})})},"8HiZ":function(e,t,n){"use strict";var a=n("QYOI"),r=Object(a.Record)({avatar:null,email:null,firstName:null,id:null,lastName:null,senderType:null},"Sender");t.a=r},"8M+t":function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("9di4"),c=n("VfuR"),u=n.n(c),l=n("Ktcs"),d=n.n(l),p=n("9f1P"),m=n.n(p),h=n("eP/i"),f=n("0IL2"),b=n("mKxs"),g=n("evgc"),v=n("sl/w"),O=m.a.div.withConfig({displayName:"ProcessConsentPrompt__ConsentPromptWrapper",componentId:"sc-9lwhbi-0"})(["border-top:2px solid ",";"],h.f),j=m.a.div.withConfig({displayName:"ProcessConsentPrompt__AlertWrapper",componentId:"sc-9lwhbi-1"})(["margin:10px;"]),y=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.trackInteraction)("widget-interaction",{action:"view consent to process"})}},{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.consentToProcess,a=e.consentToProcessError,r=e.consentToProcessMessage,i=e.dismissConsentToProcessError,o=e.showGdprConsentToProcessButton;return d.a.createElement(O,null,a?d.a.createElement(j,null,d.a.createElement(g.a,{title:d.a.createElement(v.a,{message:"conversations-visitor-ui.network.offline.title"}),onClose:i})):d.a.createElement(f.a,{showButton:o,message:r,onClick:n,coloring:t}))}}]);return t}(l.Component);y.displayName="ProcessConsentPrompt";y.propTypes={coloring:Object(b.a)("ColoringRecord"),consentToProcess:u.a.func,consentToProcessError:u.a.bool,consentToProcessMessage:u.a.string,dismissConsentToProcessError:u.a.func,showGdprConsentToProcessButton:u.a.bool,trackInteraction:u.a.func};t.a=y},"8cLO":function(e,t,n){"use strict";n.r(t);n.d(t,"gdprExplicitConsentRequired",function(){return o});var a=n("DdHT"),r=n("ZqFO"),i=n("VvTX"),o=Object(a.a)(r.f,i.getGdprExplicitConsentRequired)},"8f3s":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("A3yT"),r=n("xYYH"),i=n("6Ias"),o=function(e){if(!e)return null;var t=e.filter(r.isUploadCompleted).map(a.getFileId);return t.size?Object(i.a)({fileIds:t}):null}},"8g7g":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("A3yT"),r=n("Ux+X"),i=n("BnUr"),o=n("jVj2"),s=function(e){var t=e.attachment,n=e.thread;return function(e){var s=Object(i.getThreadId)(n),c=Object(a.getLocalId)(t);e(Object(o.removeAttachment)({localId:c,threadId:s}));e(Object(r.trackInteraction)("remove-staged-attachment",{action:"remove staged attachment"}))}}},"90r9":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("OTPB"),r=n("3sRQ"),i=n("Ux+X");function o(){return function(e,t){e(Object(r.handleStoreMessagesCookie)(Object(a.getMessagesUtk)(t())));e(Object(i.trackInteraction)("widget-interaction",{action:"clicked consent to cookies button"}))}}},"9C7g":function(e,t,n){"use strict";var a=n("QYOI"),r="<<anonymous>>",i={listOf:d,mapOf:m,orderedMapOf:h,setOf:f,orderedSetOf:b,stackOf:g,iterableOf:v,recordOf:O,shape:y,contains:y,mapContains:x,list:c("List",a.List.isList),map:c("Map",a.Map.isMap),orderedMap:c("OrderedMap",a.OrderedMap.isOrderedMap),set:c("Set",a.Set.isSet),orderedSet:c("OrderedSet",a.OrderedSet.isOrderedSet),stack:c("Stack",a.Stack.isStack),seq:c("Seq",a.Seq.isSeq),record:c("Record",function(e){return e instanceof a.Record}),iterable:c("Iterable",a.Iterable.isIterable)};function o(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof a.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function s(e){function t(t,n,a,i,o,s){for(var c=arguments.length,u=Array(c>6?c-6:0),l=6;l<c;l++)u[l-6]=arguments[l];s=s||a;i=i||r;return null!=n[a]?e.apply(void 0,[n,a,i,o,s].concat(u)):t?new Error("Required "+o+" `"+s+"` was not specified in `"+i+"`."):void 0}var n=t.bind(null,!1);n.isRequired=t.bind(null,!0);return n}function c(e,t){function n(n,a,r,i,s){var c=n[a];if(!t(c)){var u=o(c);return new Error("Invalid "+i+" `"+s+"` of type `"+u+"` supplied to `"+r+"`, expected `"+e+"`.")}return null}return s(n)}function u(e,t,n){function a(a,r,i,s,c){for(var u=arguments.length,l=Array(u>5?u-5:0),d=5;d<u;d++)l[d-5]=arguments[d];var p=a[r];if(!n(p)){var m=s,h=o(p);return new Error("Invalid "+m+" `"+c+"` of type `"+h+"` supplied to `"+i+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+i+"` for propType `"+c+"`, expected a function.");for(var f=p.toArray(),b=0,g=f.length;b<g;b++){var v=e.apply(void 0,[f,b,i,s,c+"["+b+"]"].concat(l));if(v instanceof Error)return v}}return s(a)}function l(e){function t(t,n,a,r,i){for(var o=arguments.length,s=Array(o>5?o-5:0),c=5;c<o;c++)s[c-5]=arguments[c];var u=t[n];if("function"!=typeof e)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+a+"` for propType `"+i+"`, expected a function.");for(var l=u.keySeq().toArray(),d=0,p=l.length;d<p;d++){var m=e.apply(void 0,[l,d,a,r,i+" -> key("+l[d]+")"].concat(s));if(m instanceof Error)return m}}return s(t)}function d(e){return u(e,"List",a.List.isList)}function p(e,t,n,a){function r(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return u(e,n,a).apply(void 0,i)||t&&l(t).apply(void 0,i)}return s(r)}function m(e,t){return p(e,t,"Map",a.Map.isMap)}function h(e,t){return p(e,t,"OrderedMap",a.OrderedMap.isOrderedMap)}function f(e){return u(e,"Set",a.Set.isSet)}function b(e){return u(e,"OrderedSet",a.OrderedSet.isOrderedSet)}function g(e){return u(e,"Stack",a.Stack.isStack)}function v(e){return u(e,"Iterable",a.Iterable.isIterable)}function O(e){function t(t,n,r,i,s){for(var c=arguments.length,u=Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];var d=t[n];if(!(d instanceof a.Record)){var p=o(d);return new Error("Invalid "+i+" `"+s+"` of type `"+p+"` supplied to `"+r+"`, expected an Immutable.js Record.")}for(var m in e){var h=e[m];if(h){var f=d.toObject(),b=h.apply(void 0,[f,m,r,i,s+"."+m].concat(u));if(b)return b}}}return s(t)}function j(e){var t=void 0===arguments[1]?"Iterable":arguments[1],n=void 0===arguments[2]?a.Iterable.isIterable:arguments[2];function r(a,r,i,s,c){for(var u=arguments.length,l=Array(u>5?u-5:0),d=5;d<u;d++)l[d-5]=arguments[d];var p=a[r];if(!n(p)){var m=o(p);return new Error("Invalid "+s+" `"+c+"` of type `"+m+"` supplied to `"+i+"`, expected an Immutable.js "+t+".")}var h=p.toObject();for(var f in e){var b=e[f];if(b){var g=b.apply(void 0,[h,f,i,s,c+"."+f].concat(l));if(g)return g}}}return s(r)}function y(e){return j(e)}function x(e){return j(e,"Map",a.Map.isMap)}e.exports=i},"9P7L":function(e,t,n){"use strict";n.r(t);n.d(t,"fetchAttachmentUploadUrlClient",function(){return i});var a=n("VYoM"),r="livechat-public/v1/attachment/upload-url",i=function(e){var t=e.sessionId,n=e.threadId;return a.a.get(r,{query:{sessionId:t,threadId:n}})}},"9n7a":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("JGJA"),r=Object(a.a)("resolvedAttachments")},"A+8x":function(e,t,n){"use strict";var a=n("MBJP"),r=n("647q"),i=n("4Brc"),o=n("TA7Z"),s=n("JGJA"),c=Object(s.a)("cookieBannerOnExitVisible"),u=n("X9Pk"),l=n("2BFa");n.d(t,"a",function(){return d});var d=Object(a.a)([r.getLatestWidgetData,i.a,u.getAPIEnableWidgetCookieBanner,c],function(e,t,n,a){var r=Object(l.gdprCookieConsentOnWidgetLoadEnabled)(e);return!(!(n||r)&&!a)&&Object(o.a)(t)})},AEyM:function(e,t,n){"use strict";n.r(t);n.d(t,"sendVisitorEmailAddressRequested",function(){return m});n.d(t,"sendVisitorEmailAddressFailed",function(){return h});n.d(t,"sendVisitorEmailAddressSucceeded",function(){return f});n.d(t,"sendVisitorEmailAddress",function(){return b});var a=n("Zsd8"),r=n("E6wg"),i=n("NID/"),o=n("sIRh"),s=n("z96q"),c=n("3OTY"),u=n("Ux+X"),l=n("c2PF"),d=n("zZL2"),p=n("BnUr"),m=Object(a.createAction)(i.B,function(e){return{email:e}}),h=Object(a.createAction)(i.C,function(e){return{error:e}}),f=Object(a.createAction)(i.D,function(e){return{email:e}});function b(e){var t=e.consentToCommunicate,n=void 0!==t&&t,a=e.email,i=e.threadId;return function(e,t){e(m(a));var b=Object(l.getThreadByThreadId)(t(),{threadId:i}),g=Object(p.getChannelName)(b),v=Object(r.getSessionId)(t()),O=Object(d.getHubspotUtk)(t()),j=function(){e(f(a));e(Object(o.default)({channel:g,email:a,threadId:i}));n&&e(Object(c.d)(n));e(Object(u.trackInteraction)("widget-interaction",{action:"submit email"}));return{error:null}},y=function(t){e(h(t));return{error:t}};return s.sendVisitorEmailAddress({threadId:i,email:a,sessionId:v,hubspotUtk:O}).then(j,y)}}},Apky:function(e,t,n){"use strict";n.r(t);var a=n("p9k8"),r=n("19qb"),i=n("MBJP"),o=n("LgEy"),s=n("647q"),c=Object(i.a)([s.getLatestWidgetData],function(e){return Object(o.gdprConsentToProcessEnabled)(e)}),u=n("A+8x"),l=n("lOT2"),d=n("k09d"),p=n("JoPj"),m=n("Wzl7"),h=n("zB5l"),f=n("vwA6"),b=n("3gKe");n.d(t,"WEBPACK_3_FORCE_MODULE_IMPORT",function(){return O});var g=function(e){return{shouldShowMeetingsLink:Object(h.a)(e),isThreadStarted:Object(a.a)(Object(d.a)(e)),requiresExplicitConsentToProcess:Object(l.a)(e),showingGdprProcess:c(e)&&!Object(b.a)(e),renderCookieConsentPrompt:Object(u.a)(e),showingHsBranding:Object(p.a)(e)}},v={toggleOnAndOffInputFocus:f.a},O=(t.default=Object(r.connect)(g,v)(m.a),1)},BB3q:function(e,t,n){var a=n("QhUm");function r(e,t){var n=a(this,e),r=n.size;n.set(e,t);this.size+=n.size==r?0:1;return this}e.exports=r},"BW+T":function(e,t,n){var a=n("d1Q1"),r="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],i=n.cache;if(i.has(r))return i.get(r);var o=e.apply(this,a);n.cache=i.set(r,o)||i;return o};n.cache=new(i.Cache||a);return n}i.Cache=a;e.exports=i},BYz9:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("WdXK"),r=n("MeE7"),i=function(e){return Object(a.buildSenderLocator)(Object(r.getType)(e),Object(r.getId)(e))}},CPwH:function(e,t,n){"use strict";n.r(t);n.d(t,"getFileName",function(){return i});var a=n("JGJA"),r=n("A3yT"),i=function(e){var t=Object(r.getFile)(e);return Object(a.a)("name",t)||""}},CnAB:function(e,t,n){"use strict";n.d(t,"b",function(){return u});var a,r=n("UG02"),i=n("eP/i"),o=n("Ktcs"),s=n("6s0Z"),c=n("iDVC"),u=(a={},Object(r.a)(a,s.b,Object(c.a)()),Object(r.a)(a,s.a,Object(c.a)()),Object(r.a)(a,s.c,Object(c.a)({backgroundColor:i.c,borderColor:i.d,alignment:"flex-end"})),a),l=Object(o.createContext)(u);t.a=l},DOHQ:function(e,t,n){var a=n("8i16")["__core-js_shared__"];e.exports=a},EzJv:function(e,t,n){var a=n("RLxx"),r=n("ccWV"),i=n("Uz5A"),o=n("mMAp"),s=n("IrnW");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype.delete=r;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},"FC+o":function(e,t,n){"use strict";n.d(t,"b",function(){return a});n.d(t,"e",function(){return r});n.d(t,"a",function(){return i});n.d(t,"d",function(){return o});n.d(t,"c",function(){return s});var a="NETWORK_OFFLINE",r="THREAD_HISTORY_FAILED",i="CREATE_NEW_THREAD_FAILED",o="SUBSCRIPTIONS_FAILED",s="PUBSUB_FAILED"},FJf1:function(e,t,n){"use strict";n.r(t);n.d(t,"trackSendMessage",function(){return r});var a=n("Ux+X"),r=function(e){var t=e.threadId;return function(e){var n={};"number"==typeof t&&(n.threadId=t);e(Object(a.trackInteraction)("send-message",n))}}},FPMu:function(e,t,n){"use strict";n.r(t);n.d(t,"shouldRecordImplicitConsentToProcess",function(){return c});var a=n("MBJP"),r=n("LgEy"),i=n("8cLO"),o=n("647q"),s=n("3gKe"),c=Object(a.a)([o.getLatestWidgetData,s.a],function(e,t){return Object(r.gdprConsentToProcessEnabled)(e)&&!Object(i.gdprExplicitConsentRequired)(e)&&!t})},GkNN:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("MBJP"),r=n("JGJA"),i=n("xePV"),o=n("BnUr"),s=n("BMD5"),c=Object(a.a)([i.a,s.a],function(e,t){var n=Object(o.getThreadId)(t);return Object(r.a)(n,e)||null})},GzqH:function(e,t,n){"use strict";n.d(t,"b",function(){return a});n.d(t,"a",function(){return r});var a="@type",r="DATE_MESSAGE"},IqZ3:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("Zsd8"),r=n("FDs6"),i=Object(a.createAction)(r.e,function(e){return{threadId:e}})},IrnW:function(e,t,n){var a=n("LPlp");function r(e,t){var n=this.__data__,r=a(n,e);if(r<0){++this.size;n.push([e,t])}else n[r][1]=t;return this}e.exports=r},Isoj:function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("9di4"),c=n("19qb"),u=n("VfuR"),l=n.n(u),d=n("E7sj"),p=n.n(d),m=n("Ktcs"),h=n.n(m),f=n("4FzD"),b=n("9f1P"),g=n.n(b),v=n("VdXU"),O=n("sl/w"),j=n("qCVG"),y=n("gFbD"),x=n("A2+2"),C=n("Kcjm"),k=n("fzij"),E=g.a.div.withConfig({displayName:"ConsentModal__ConsentModalContainer",componentId:"zunoa3-0"})(["position:absolute;display:flex;align-items:flex-start;justify-content:center;height:calc(100% - ","px);top:","px;width:100%;background-color:rgba(45,62,80,0.79);backdrop-filter:blur(2px);padding-top:20%;border-bottom-left-radius:","px;border-bottom-right-radius:","px;overflow-y:hidden;"],C.d,C.d,x.a,x.a),T=g.a.div.withConfig({displayName:"ConsentModal__ContentContainer",componentId:"zunoa3-1"})(["display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;background-color:white;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,0.75);margin:0 20px;"]),w=g()(k.a).withConfig({displayName:"ConsentModal__SmallNoParagraphPadding",componentId:"zunoa3-2"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),I=g()(v.a).withConfig({displayName:"ConsentModal__FullWidthButton",componentId:"zunoa3-3"})(["padding:9px 16px;flex:0 1 100%;&:not(:first-child){margin-left:8px;}"]),S=g.a.div.withConfig({displayName:"ConsentModal__ButtonsContainer",componentId:"zunoa3-4"})(["display:flex;flex-direction:row;margin:12px 0 0 0;width:100%;"]),R=g.a.p.withConfig({displayName:"ConsentModal__Header",componentId:"zunoa3-5"})(["text-transform:none;font-size:18px;font-weight:500;margin-top:18px;margin-bottom:12px;line-height:normal;"]),A=function(e){var t=e.headerMessage,n=e.message,a=e.onClick,r=e.onDeclineClick,i=Object(m.useState)({isEntering:!0,shouldRender:!0,callback:function(){}}),o=Object(f.a)(i,2),s=o[0],c=o[1],u=function(){if(!s.isEntering){s.callback();c(Object.assign({},s,{shouldRender:!1}))}},l=function(e){c(Object.assign({},s,{isEntering:!1,callback:e}))};return s.shouldRender?h.a.createElement(E,{style:{animation:(s.isEntering?"consent-modal-background-fadeIn":"consent-modal-background-fadeOut")+" .3s"},"data-test-id":"gdpr-consent-prompt-container",onAnimationEnd:u,key:Math.random+"-consent-modal-container"},h.a.createElement(y.a,null,function(e){return h.a.createElement(T,{key:"consent-modal-content-container","data-test-id":"gdpr-consent-prompt",style:{animation:(s.isEntering?"consent-modal-content-fadeIn":"consent-modal-content-fadeOut")+" .3s"}},t&&h.a.createElement(R,null,t),h.a.createElement(w,{use:"help","data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(j.a)(n)}}),h.a.createElement(S,null,h.a.createElement(I,{onClick:function(){l(a)},"data-test-id":"gdpr-consent-agree-button",use:"primary"},h.a.createElement(O.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:e}})),h.a.createElement(I,{onClick:function(){l(r)},"data-test-id":"gdpr-consent-dismiss-button"},h.a.createElement(O.a,{message:"conversations-visitor-experience-components.buttons.disagree",options:{locale:e}}))))})):null};A.defaultProps={animationTimeMs:300,onClick:function(){},onDeclineClick:function(){}};A.propTypes={headerMessage:l.a.node,message:l.a.string.isRequired,onClick:l.a.func.isRequired,onDeclineClick:l.a.func.isRequired};A.displayName="ConsentModal";var M=A,P=n("0IL2"),N=n("Ux+X"),q=n("90r9"),F=n("iatO"),_=n("2BFa"),L=n("VTHq");function B(){return function(e,t){(Object(_.gdprCookieConsentOnExitIntentEnabled)(t())||Object(L.getAPIEnableWidgetCookieBannerOnExitIntent)(t()))&&e(Object(F.a)(!1));e(Object(N.trackInteraction)("widget-interaction",{action:"clicked decline cookies button"}))}}var D=n("AQmo"),z=n("mKxs"),V=n("647q"),H=n("X9Pk"),U=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.trackInteraction)("widget-interaction",{action:"view consent to cookies"})}},{key:"render",value:function(){var e=this;return h.a.createElement(y.a,null,function(t){return e.props.isExitIntentPrompt?h.a.createElement(M,{headerMessage:h.a.createElement(O.a,{message:"conversations-visitor-ui.gdpr.consentToCookies.promptHeader",options:{locale:t}}),message:p.a.text("conversations-visitor-ui.gdpr.consentToCookies.exitIntentCookieConsent",{locale:t}),onDeclineClick:e.props.declineCookies,onClick:e.props.consentToCookies,coloring:e.props.coloring}):h.a.createElement(P.a,{message:p.a.text("conversations-visitor-ui.gdpr.consentToCookies.pageLoadCookieConsent",{locale:t}),onDeclineClick:e.props.declineCookies,onClick:e.props.consentToCookies,coloring:e.props.coloring,showButton:!0})})}}]);return t}(m.Component);U.displayName="CookieConsentPrompt";U.propTypes={coloring:Object(z.a)("ColoringRecord"),consentToCookies:l.a.func.isRequired,declineCookies:l.a.func.isRequired,isExitIntentPrompt:l.a.bool.isRequired,trackInteraction:l.a.func.isRequired};var W={consentToCookies:q.a,declineCookies:B,trackInteraction:N.trackInteraction},Q=function(e){return{coloring:Object(D.a)(e),widgetData:Object(V.getLatestWidgetData)(e),isExitIntentPrompt:Object(_.gdprCookieConsentOnExitIntentEnabled)(e)&&!Object(H.getAPIEnableWidgetCookieBanner)(e)}};t.a=Object(c.connect)(Q,W)(U)},JIa2:function(e,t,n){"use strict";n.r(t);n.d(t,"createFormDataForAttachment",function(){return a});var a=function(e){var t=e.file,n=new FormData;n.append("file",t);return n}},JoPj:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("JGJA"),r=n("MBJP"),i=n("647q"),o=Object(r.a)(i.getLatestWidgetData,Object(a.a)("showingHsBranding"))},KLi6:function(e,t,n){var a=n("uQvf"),r="__lodash_hash_undefined__";function i(e,t){var n=this.__data__;this.size+=this.has(e)?0:1;n[e]=a&&void 0===t?r:t;return this}e.exports=i},KSjU:function(e,t,n){"use strict";var a=n("MJM1");t.a=Object(a.a)(["meetingsLinkUrl"])},KziI:function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("9di4"),c=n("E7sj"),u=n.n(c),l=n("sl/w"),d=n("VfuR"),p=n.n(d),m=n("Ktcs"),h=n.n(m),f=n("r1tY"),b=n.n(f),g=n("9f1P"),v=n.n(g),O=n("A5YI"),j=n("4FzD"),y=n("TMxi"),x=["left","right"],C=["top","bottom"],k=x.concat(C).concat(["left top","left bottom","right top","right bottom","top left","top right","bottom left","bottom right","top center","bottom center","left middle","right middle"]);function E(e){return e.split(" ")[0]}function T(e){return x.includes(e)}function w(e){var t=e.split(" ")[1];return t||(T(E(e))?"middle":"center")}var I=16,S=8,R=function(e){switch(E(e.placement)){case"top":return Object(g.css)(["transform:rotate(45deg);top:-","px;"],I+5);case"right":return Object(g.css)(["transform:rotate(135deg);right:-","px;"],I+5);case"bottom":return Object(g.css)(["transform:rotate(-135deg);bottom:-","px;"],I+5);case"left":return Object(g.css)(["transform:rotate(-45deg);left:-","px;"],I+5);default:return""}},A=function(e){switch(w(e.placement)){case"top":return Object(g.css)(["top:","px;"],S);case"middle":return Object(g.css)(["top:calc(50% - ","px);"],I/2);case"bottom":return Object(g.css)(["bottom:","px;"],S);case"left":return Object(g.css)(["left:","px;"],S);case"center":return Object(g.css)(["left:calc(50% - ","px);"],I/2);case"right":return Object(g.css)(["right:","px;"],S);default:return""}},M=function(e){var t=e.placement;return Object(g.css)(["",";",";"],R({placement:t}),A({placement:t}))},P=n("PrNr"),N="#425b76",q=function(){return N},F=function(){return P.l},_=v.a.div.withConfig({displayName:"VizExTooltipArrow",componentId:"myy70c-0"})(["position:absolute;pointer-events:none;border:none;clip-path:polygon(100% 100%,0 100%,100% 0);border-top-left-radius:100%;border-radius:3px;border-top-color:transparent !important;border-left-color:transparent !important;border-bottom-right-radius:3px;width:16px;height:16px;background-color:",";",""],function(e){var t=e.theme;return q(t)},M),L=16,B=function(e){switch(w(e.placement)){case"top":return Object(g.css)(["top:0;"]);case"bottom":return Object(g.css)(["bottom:0;"]);case"left":return Object(g.css)(["left:0;"]);case"right":return Object(g.css)(["right:0;"]);default:return""}},D=function(e){switch(E(e.placement)){case"top":return Object(g.css)(["transform:translateY(-100%);top:-","px;"],L-5);case"right":return Object(g.css)(["transform:translateX(100%);right:-","px;"],L-5);case"bottom":return Object(g.css)(["transform:translateY(100%);bottom:-","px;"],L-5);case"left":return Object(g.css)(["transform:translateX(-100%);left:-","px;"],L-5);default:return""}},z=function(e){switch(e.placement){case"top center":case"top middle":return Object(g.css)(["transform:translate(-50%,-100%);left:50%;"]);case"bottom middle":case"bottom center":return Object(g.css)(["transform:translate(-50%,100%);left:50%;"]);case"left center":case"left middle":return Object(g.css)(["transform:translate(-100%,-50%);top:50%;"]);case"right center":case"right middle":return Object(g.css)(["transform:translate(100%,-50%);top:50%;"]);default:return""}},V=function(e){var t=e.placement;return Object(g.css)(["",";",";",""],D({placement:t}),B({placement:t}),z({placement:t}))},H=v.a.div.withConfig({displayName:"VizExTooltipBody",componentId:"qy3p0o-0"})(["border-radius:3px;font-size:13px;max-width:232px;display:block;position:absolute;visibility:visible;box-shadow:0 3px 8px rgba(0,0,0,0.1);line-height:1.5;padding:10px 16px;text-decoration:none;word-wrap:break-word;",";white-space:nowrap;background-color:",";color:",";pointer-events:",";"],V,function(e){var t=e.theme;return q(t)},function(e){var t=e.theme;return F(t)},function(e){return e.open?"all":"none"}),U=n("NrIs"),W=n("L0DB"),Q=v.a.div.withConfig({displayName:"VizExTooltip__Popover",componentId:"qngada-0"})(["transition-property:",";transition-duration:","ms;opacity:",";transform:",";position:absolute;pointer-events:none;width:100%;height:100%;"],function(e){return e.transitioning?"opacity ease-out, transform ease-out":"none"},function(e){return e.duration},function(e){return e.open?"1":"0"},function(e){var t=e.open,n=e.transitioning;return t&&!n?"none":t?"scale(1)":"scale(.75)"}),Y=v.a.div.withConfig({displayName:"VizExTooltip__PopoverWrapper",componentId:"qngada-1"})(["display:inline-block;position:relative;"]),J=function(e){var t=e.content,n=e.backgroundColor,a=e.textColor,r=e.placement,i=e.children,o=e.theme,s=e.onOpenChange,c=e.open,u=Object(y.a)(e,["content","backgroundColor","textColor","placement","children","theme","onOpenChange","open"]),l=Object(m.useState)(!1),d=Object(j.a)(l,2),p=d[0],f=d[1];if(!t)return i;var b="boolean"==typeof c,g=function(){if(!b){Object(W.a)(s,!0);f(!0)}},v=function(){if(!b){Object(W.a)(s,!1);f(!1)}},O=b?c:p;return h.a.createElement(Y,Object.assign({},u,{onMouseEnter:g,onMouseLeave:v}),h.a.createElement(Q,{open:O,duration:250,transitioning:!0},h.a.createElement(H,{textColor:a,backgroundColor:n,placement:r,open:O,theme:o,"data-test-open":O},t),h.a.createElement(_,{backgroundColor:n,placement:r,theme:o})),i)};J.propTypes={backgroundColor:p.a.string,children:p.a.node,content:p.a.node,onOpenChange:p.a.func,open:p.a.bool,placement:p.a.oneOf(k),textColor:p.a.string,theme:U.a};J.displayName="VizExTooltip";J.defaultProps={placement:"top right"};var G=J,K=n("7LhL"),Z=n("2YOq"),X=v.a.input.withConfig({displayName:"AttachmentPickerButton__HiddenInput",componentId:"mj74yt-0"})(["display:none;"]),$=function(e){Object(s.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).inputRefCallback=function(e){n.inputRef=e};n.findInputNode=function(){return n.inputRef?b.a.findDOMNode(n.inputRef):null};n.clearInputNode=function(){var e=n.findInputNode();e&&(e.value="")};n.handlePickerClick=function(e){var t=n.findInputNode();t&&t.click();n.props.onClick(e)};n.onInputChange=function(e){var t=e.target.files;n.props.onSelectFiles({files:t});n.clearInputNode()};n.renderMaxFileSizeTooltip=function(){if(!n.props.mobile)return h.a.createElement(l.a,{message:"conversations-visitor-ui.fileSizeLimit",options:{size:u.a.formatSize(n.props.maxAttachmentFileSize)}})};n.inputRef=null;return n}Object(r.a)(t,[{key:"render",value:function(){var e=this.props.disabled;return h.a.createElement(h.a.Fragment,null,h.a.createElement(G,{content:this.renderMaxFileSizeTooltip(),placement:"top center"},h.a.createElement(O.a,{disabled:e,onClick:this.handlePickerClick,use:"transparent-on-background","aria-label":u.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.attachment"),shape:"circle"},h.a.createElement(K.a,{icon:h.a.createElement(Z.a,null)}))),h.a.createElement(X,{accept:this.props.accept.join(","),"data-selenium-test":"visitor-attachment-file-input",disabled:this.props.disabled,ref:this.inputRefCallback,type:"file",multiple:this.props.allowMultiple,onChange:this.onInputChange}))}}]);return t}(h.a.PureComponent);$.displayName="AttachmentPickerButton";$.propTypes={accept:p.a.arrayOf(p.a.string).isRequired,allowMultiple:p.a.bool.isRequired,disabled:p.a.bool,maxAttachmentFileSize:p.a.number.isRequired,mobile:p.a.bool,onClick:p.a.func,onSelectFiles:p.a.func.isRequired};$.defaultProps={accept:[],allowMultiple:!1,onClick:function(){}};t.a=$},L0DB:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];"function"==typeof e&&e.apply(void 0,n)}},LPlp:function(e,t,n){var a=n("+a0K");function r(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}e.exports=r},LdnN:function(e,t,n){"use strict";var a=n("EuUD"),r="\\.",i='\\s\\?\\#\\/\\(\\)\\=\\:\\;\\@\\\\"'+r,o="(?:www"+r+")",s="(?:[%a-zA-Z0-9_-]+)",c="(?:(?:\\.[%a-zA-Z0-9-]+)[^\\.\\s])",u="\\s\\?\\#\\&",l=new RegExp("^(?:.+)@"+{www:o,domain:o+"?(?:(?:[^"+i+"]+)"+r+")+(?:[^"+i+"]+)",protocol:"(?:(?:https?:)?\\/\\/)",protocolRequired:"(?:https?:\\/\\/)",path:"(?:(?:\\/[^\\s\\/\\#\\&\\?]*)+\\/?)",wildcardPath:"(?:(/(?:[%a-zA-Z0-9_-])*?)*(?:/[\\*]))",file:""+s+c,fileName:s,fileExtension:c,search:"(?:([\\?&#][^"+u+"]*?=?([^"+u+"]*))+)",ungroupedSearch:"(?:(?:[\\?&#][^"+u+"]*?=?(?:[^"+u+"]*))+)"}.domain+"$");t.a=Object(a.a)({name:"EmailAddress",validator:function(e){return l.test(e)}})},OI0Z:function(e,t,n){"use strict";var a=n("TMxi"),r=n("VfuR"),i=n.n(r),o=n("yvRk"),s=n.n(o),c=n("Ktcs"),u=n.n(c),l=n("E7sj"),d=n.n(l);t.a=s()({displayName:"FormattedSize",propTypes:{value:i.a.number.isRequired},render:function(){var e=this.props,t=e.value,n=Object(a.a)(e,["value"]);return u.a.createElement("span",null,d.a.formatSize(t,n))}})},OhTC:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("JGJA"),r=Object(a.a)("fileUploads")},OoDT:function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("bYHN"),c=n("9di4"),u=n("VfuR"),l=n.n(u),d=n("Ktcs"),p=n.n(d),m=n("eEuy"),h=n("qjq5"),f=n("scKg");function b(e){if("number"==typeof e&&e>=0)return e;throw new Error("expected `interval` to be a positive number but got `"+e+"`")}function g(e,t){b(e);Object(f.a)(t);var n,a,r=0,i=null;function o(){if(null!==i){clearTimeout(i);i=null}}function s(){r=Date.now();a=t.apply(void 0,Object(m.a)(n))}function c(){for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];n=c;o();Date.now()-r>=e?s():i=setTimeout(s,e);return a}c.cancel=o;return c}var v=Object(h.a)(g),O=100,j=function(e){Object(c.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={inTop:!0,inBottom:!0,height:0,distanceToBottom:0,shouldKeepAtBottom:!0};n.scrollContainer=p.a.createRef();n.onResize=v(O,n.onResize.bind(Object(s.a)(n)));n.onScroll=v(O,n.onScroll.bind(Object(s.a)(n)));return n}Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.scrollContainer.current;if(e){this.setState({height:e.clientHeight});this.scrollToBottom()}window.addEventListener("resize",this.onResize,{passive:!0})}},{key:"getSnapshotBeforeUpdate",value:function(){var e=this.scrollContainer.current;return e?{prevScrollTop:e.scrollTop}:null}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.scrollContainer.current;if(n&&a)if(this.state.shouldKeepAtBottom)this.scrollToBottom();else if(0!==this.state.distanceToBottom){var r=n.prevScrollTop;a.scrollTop===r&&t.height>this.state.height&&this.setScrollTop(a.scrollTop+(t.height-this.state.height))}else this.setState({shouldKeepAtBottom:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function(){var e=this.props,t=e.onScrollToTop,n=e.onScrollToBottom,a=this.inThreshold(),r=a.inTop,i=a.inBottom;!this.state.inTop&&r&&t();!this.state.inBottom&&i&&n();var o=this.getScrollDistanceFromBottom();this.setState({inTop:r,inBottom:i,distanceToBottom:o,shouldKeepAtBottom:!1})}},{key:"inThreshold",value:function(){var e=this.props,t=e.topThreshold,n=e.bottomThreshold;return{inTop:this.getScrollDistanceFromTop()<=t,inBottom:this.getScrollDistanceFromBottom()<=n}}},{key:"getScrollDistanceFromTop",value:function(){var e=this.scrollContainer.current;return e?e.scrollTop:0}},{key:"getScrollDistanceFromBottom",value:function(){var e=this.scrollContainer.current;if(!e)return 0;var t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight,r=e.offsetHeight;return n-(a||r)-t}},{key:"scrollToBottom",value:function(){var e=this.scrollContainer.current;e&&this.setScrollTop(e.scrollHeight);this.setState({shouldKeepAtBottom:!0})}},{key:"setScrollTop",value:function(e){var t=this.scrollContainer.current;t&&(t.scrollTop=e||0)}},{key:"onResize",value:function(){var e=this.scrollContainer.current;e&&this.setState({height:e.clientHeight||0})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return p.a.createElement("div",{className:n,style:{flexGrow:1},ref:this.scrollContainer,onScroll:this.onScroll},t)}}]);return t}(d.PureComponent);j.displayName="ScrollWrapper";j.propTypes={bottomThreshold:l.a.number.isRequired,children:l.a.node,className:l.a.string,onScrollToBottom:l.a.func.isRequired,onScrollToTop:l.a.func.isRequired,topThreshold:l.a.number.isRequired};var y=function(){};j.defaultProps={bottomThreshold:300,onScrollToBottom:y,onScrollToTop:y,topThreshold:300};var x=j,C=n("2rNL"),k=function(e){return document.querySelector("["+C.a+'="'+e+'"]')},E=n("wBO5"),T=function(e,t){var n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;Object(E.a)(!!e.prototype[s],"Component missing required function %s",s)}}catch(e){a=!0;r=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}},w=function(){var e=document.querySelector("["+C.a+"]:last-child");return e&&e.getAttribute?e.getAttribute(C.a):null},I=function(e){var t=w();if(!e||!t)return null;var n=k(t);if(!n)return null;var a=e.getScrollDistanceFromTop();return{lastMessageId:t,lastMessageOffsetTop:n.offsetTop,prevScrollTop:a}},S=300,R=function(){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{alignment:"start"}).alignment,n=k(e);e&&n&&n.scrollIntoView&&n.scrollIntoView("start"===t)}},A=function(e){var t=e.scrollWrapperRef;return function(){var e=t.current;e&&e.scrollToBottom()}},M=function(e){var t=e.scrollWrapperRef;return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).threshold,n=void 0===e?S:e,a=t.current;a&&a.state&&(t.current.state.distanceToBottom<=n||a.getScrollDistanceFromBottom()<=n)&&a.scrollToBottom()}},P=function(e){var t=e.current;return{lastMessageId:t.lastMessageId,lastMessageOffsetTop:t.lastMessageOffsetTop,prevScrollTop:t.prevScrollTop}},N=function(e){T(e,["getScrollDistanceFromTop","getScrollDistanceFromBottom","setScrollTop","scrollToBottom"]);var t=Object(d.forwardRef)(function(e,t){var n=Object(d.useRef)(),a=Object(d.useRef)();t.current={scrollToMessage:R(),scrollToBottom:A({scrollWrapperRef:n}),scrollToBottomIfInThreshold:M({scrollWrapperRef:n})};var r=Object(d.useRef)(!0);Object(d.useLayoutEffect)(function(){var e=n.current;if(r.current){a.current=I(e);r.current=!1}else if(a.current){var t=P(a),i=t.lastMessageId,o=t.lastMessageOffsetTop,s=t.prevScrollTop;a.current=I(e);if(e.getScrollDistanceFromTop()===s){var c=k(i);if(c&&c.offsetTop){var u=c.offsetTop-o;u&&e.setScrollTop(e.getScrollDistanceFromTop()+u)}}}});return p.a.createElement(x,Object.assign({ref:n},e))});t.displayName="WithScrollTo";return t},q=n("mKxs"),F=n("021p"),_=n("kWFB"),L=n("9f1P"),B=n.n(L),D=n("DgSg"),z=n("t6nY"),V=n.n(z),H=n("Xcjc"),U=n("R1eS"),W=B()(D.a).withConfig({displayName:"ThreadHistoryFetcher__LoadingSpinnerWrapper",componentId:"sc-1wh6m0q-0"})(["height:0;margin-top:20px;"]),Q=B()(N(x)).withConfig({displayName:"ThreadHistoryFetcher__ScrollToWrapper",componentId:"sc-1wh6m0q-1"})(["flex:1 1;display:flex;flex-direction:column;padding-bottom:12px;align-self:stretch;overflow-y:scroll;overflow-x:hidden;"]),Y=function(e){Object(c.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).scrollWrapper=Object(d.createRef)();n.fetchHistory=n.fetchHistory.bind(Object(s.a)(n));return n}Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.scrollWrapper.current;e&&e.scrollToBottom();this.fetchHistory()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.threadId,a=t.messageCount,r=t.shouldScrollToBottom,i=t.isOnFocus,o=e.threadId,s=e.messageCount,c=e.shouldScrollToBottom,u=e.isOnFocus,l=this.scrollWrapper.current;if(n===o)if(s){a!==s&&l&&l.scrollToBottomIfInThreshold();r!==c&&l&&l.scrollToBottomIfInThreshold();i!==u&&l&&l.scrollToBottomIfInThreshold()}else l&&l.scrollToBottom();else{this.fetchHistory();l&&l.scrollToBottom()}}},{key:"fetchHistory",value:function(){var e=this.props,t=e.fetchThreadHistory,n=e.threadId,a=e.threadHistory,r=e.sessionId;n!==H.a&&t({offsetOrdinal:Object(F.c)(a),offsetTimestamp:Object(F.d)(a),threadId:n,sessionId:r})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isLoadingHistory,a=e.loadingHistoryFailed,r=e.threadId,i=e.threadHistory;if(n&&!Object(_.hasMessages)(i))return p.a.createElement(D.a,{grow:!0});if(a&&!Object(_.hasMessages)(i))return p.a.createElement(U.a,null);var o=V()(this.props.className,"messages-scroll-container-utv");return p.a.createElement(Q,{key:r,className:o,ref:this.scrollWrapper,onScrollToTop:this.fetchHistory},n&&p.a.createElement(W,{grow:!0}),t)}}]);return t}(d.PureComponent);Y.propTypes={children:l.a.node.isRequired,className:l.a.string,fetchThreadHistory:l.a.func.isRequired,isLoadingHistory:l.a.bool,isOnFocus:l.a.bool.isRequired,loadingHistoryFailed:l.a.bool,messageCount:l.a.number.isRequired,sessionId:l.a.string.isRequired,shouldScrollToBottom:l.a.bool.isRequired,threadHistory:Object(q.a)("ThreadHistory"),threadId:l.a.number.isRequired};Y.displayName="ThreadHistoryFetcher";t.a=Y},P5SP:function(e,t,n){"use strict";n.r(t);var a=n("MBJP"),r=n("c2PF"),i=n("lTxV"),o=Object(a.a)([r.getThreadByThreadId],i.a),s=n("V0XL");n.d(t,"shouldRecordUrlContextUpdate",function(){return c});var c=Object(a.a)([o,s.getMessagesPageUri],function(e,t){return e!==t})},PY3R:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("bdl8"),r=n("tek+"),i=n("6WMu"),o=function(e){var t=e.thread;return function(e){e(Object(a.postExternalApiEvent)({eventType:r.c,payload:{conversation:Object(i.serializeThreadForExternalEvent)(t)}}))}}},PYok:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var a=n("BnUr"),r=n("upey"),i=n("LdnN"),o=n("5rZi"),s=n("6PLn"),c=n("4SpI"),u=n("2gT5"),l=n("OTPB"),d=n("IqZ3"),p=n("k09d"),m=n("FJf1"),h=n("UxS0"),f=n("tbpt"),b=n("1wa5"),g=n("V0XL"),v=n("P5SP"),O=n("wy0V"),j=n("AEyM"),y=n("SbeA");function x(e){var t=e.text,n=e.richText,x=e.quickReply,C=e.fileAttachment;return function(e,k){var E=Object(p.a)(k()),T=Object(u.isPersistedThread)(E),w=Object(a.getChannelName)(E),I=Object(a.getThreadId)(E),S=Object(l.getMessagesUtk)(k()),R=Object(g.getMessagesPageUri)(k()),A=Object(h.buildVisitorCommonMessage)({clientType:r.a,fileAttachment:C,quickReply:x,richText:n,senderId:S,text:t});e(Object(d.a)(I));e(Object(m.trackSendMessage)({threadId:I}));if(!T){e(Object(f.stageMessageOnStubbedThread)(A));return e(Object(o.createNewThread)())}if(Object(v.shouldRecordUrlContextUpdate)(k(),{threadId:I})){e(Object(c.publishMessage)({channel:w,message:Object(b.a)(R),threadId:I})).done();e(Object(O.a)({threadId:I,currentUrl:R}))}Object(y.getMostRecentMessageIsEmailPrompt)(k())&&i.a.test(t)&&e(Object(j.sendVisitorEmailAddress)({email:t,consentToCommunicate:!1,threadId:I}));return e(Object(c.publishMessage)({channel:w,message:A,threadId:I})).then(function(){return e(Object(s.applyGdprConsent)())})}}},PzWr:function(e,t,n){"use strict";n.r(t);n.d(t,"getFileSize",function(){return i});var a=n("JGJA"),r=n("A3yT"),i=function(e){var t=Object(r.getFile)(e);return Object(a.a)("size",t)||0}},Q2fA:function(e,t,n){"use strict";var a=n("MBJP"),r=n("qjq5"),i=n("AaWM"),o=Object(r.a)(i.a),s=n("JGJA"),c=n("G6fO"),u=n("RyNb"),l=n("ncoD"),d=n("SfUm");n.d(t,"a",function(){return p});var p=Object(a.a)([d.a,l.a,u.a],function(e,t,n){var a=Object(c.getUserId)(n);return Object(s.a)(a,e)?n:t&&t.find(function(t){var n=Object(c.getUserId)(t);return o(n,e)})})},QG41:function(e,t,n){var a=n("uQvf");function r(){this.__data__=a?a(null):{};this.size=0}e.exports=r},QVIP:function(e,t){var n=Function.prototype.toString;function a(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}e.exports=a},Qf6G:function(e,t,n){"use strict";n.r(t);n.d(t,"clickedConsentToProcess",function(){return f});n.d(t,"consentToProcessSucceeded",function(){return b});n.d(t,"consentToProcessFailed",function(){return g});n.d(t,"consentToProcess",function(){return v});var a=n("Zsd8"),r=n("OTPB"),i=n("wwi/"),o=n("E6wg"),s=n("wn0x"),c=n("uk/S"),u=n("3sRQ"),l=n("2BFa"),d=n("k3iI"),p=n("zZL2"),m=n("Ux+X"),h=n("647q"),f=Object(a.createAction)(i.d),b=Object(a.createAction)(i.f),g=Object(a.createAction)(i.e);function v(){return function(e,t){var n=Object(o.getSessionId)(t()),a=Object(s.getMessageId)(t()),i=Object(p.getHubspotUtk)(t()),v=Object(h.getLatestWidgetData)(t());e(f());Object(c.sendConsentToProcess)({sessionId:n,hubspotUtk:i,welcomeMessageId:a,widgetData:v}).then(function(n){var a=n.sessionId,i=Object(l.gdprCookieConsentOnExitIntentEnabled)(t(),v);try{localStorage.setItem("userHasGivenConsentToProcess",!0)}catch(e){console.warn("local storage not set!")}i||e(Object(u.handleStoreMessagesCookie)(Object(r.getMessagesUtk)(t())));e(Object(d.updateSessionId)(a));e(b());e(Object(m.trackInteraction)("widget-interaction",{action:"clicked consent to process button"}))},function(t){return e(g({error:t}))}).done()}}},QhUm:function(e,t,n){var a=n("xP7N");function r(e,t){var n=e.__data__;return a(t)?n["string"==typeof t?"string":"hash"]:n.map}e.exports=r},R1eS:function(e,t,n){"use strict";var a=n("Ktcs"),r=n.n(a),i=n("9f1P"),o=n.n(i),s=n("sl/w"),c=o.a.div.withConfig({displayName:"ErrorState__ErrorWrapper",componentId:"sc-158c0d-0"})(["display:flex;justify-content:center;align-items:center;height:100%;flex-direction:column;"]),u=function(){return r.a.createElement(c,null,r.a.createElement("h5",null,r.a.createElement(s.a,{message:"conversations-visitor-ui.asyncError.body"})),r.a.createElement("div",{className:"m-top-3"},r.a.createElement(s.a,{message:"conversations-visitor-ui.asyncError.noRetry"})))};u.displayName="ErrorState";var l=u,d=o.a.div.withConfig({displayName:"ThreadHistoryError__ThreadHistoryErrorWrapper",componentId:"sc-73lsqe-0"})(["text-align:center;flex-grow:1;"]),p=function(){return r.a.createElement(d,null,r.a.createElement(l,null))};p.displayName="ThreadHistoryError";t.a=p},RLxx:function(e,t){function n(){this.__data__=[];this.size=0}e.exports=n},SbeA:function(e,t,n){"use strict";n.r(t);n.d(t,"getMostRecentMessageIsEmailPrompt",function(){return s});var a=n("MBJP"),r=n("4nf7"),i=n("0IK8"),o=n("5xHP"),s=Object(a.a)([r.a],function(e){return Object(i.getType)(e.last())===o.i})},SfUm:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("QYOI"),r=n("MBJP"),i=n("JGJA"),o=n("BnUr"),s=n("BMD5"),c=n("6T8d"),u=Object(r.a)([s.a,c.typingStates],function(e,t){var n=Object(o.getThreadId)(e);return Object(i.a)(""+n,t)||Object(a.Map)()})},TXBG:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("IFrL"),r=n("sQV+"),i=n("vr6k"),o=n("QYOI"),s=n("MBJP"),c=n("bYG+"),u=n("9n7a"),l=Object(s.a)([u.a],function(e){return e&&Object(i.getEntries)(e).size?Object(i.getEntries)(e).reduce(function(e,t,n){return t&&n&&Object(r.isSucceeded)(t)?Object(c.a)(String(n),Object(a.a)(t),e):e},Object(o.Map)()):Object(o.Map)()})},Umjh:function(e,t,n){"use strict";var a,r,i=n("TMxi"),o=n("Ktcs"),s=n.n(o),c=n("VfuR"),u=n.n(c),l=n("9f1P"),d=n.n(l),p=n("DgSg"),m=n("UG02"),h=n("VJJX"),f=n("78wT"),b="primary",g="secondary",v={PRIMARY:b,SECONDARY:g},O=(a={},Object(m.a)(a,b,h.PRIMARY),Object(m.a)(a,g,h.SECONDARY),a),j=function(e){return O[e]},y=(r={},Object(m.a)(r,b,f.SECONDARY),Object(m.a)(r,g,f.PRIMARY),r),x=function(e){return y[e]},C=v,k=n("NrIs"),E=d()(p.a).withConfig({displayName:"VizExLoadingButton__Spinner",componentId:"ruu7j6-0"})(["height:0;position:absolute;top:50%;right:0;transition:opacity 0.2s;opacity:",";"],function(e){return e.show?1:0}),T=d.a.div.withConfig({displayName:"VizExLoadingButton__ReadyWrapper",componentId:"ruu7j6-1"})(["transition:opacity 0.2s;opacity:",";"],function(e){return e.show?1:0}),w=function(e){var t=e.children,n=e.Button,a=e.result,r=e.use,o=e.theme,c=e.currentState,u=e.onClick,l=Object(i.a)(e,["children","Button","result","use","theme","currentState","onClick"]),d="ready"===c,p="submitting"===c,m="done"===c;return s.a.createElement(n,Object.assign({theme:o,onClick:p||m?function(){}:u,use:j(r),style:{position:"relative"}},l),s.a.createElement(T,{"data-testid":"VizExLoadingButton-Ready",show:d},t),s.a.createElement(E,{size:"xs",grow:!0,use:x(r),theme:o,showResult:m,show:p||m,"data-testid":"VizExLoadingButton-Spinner"},a))};w.propTypes={Button:u.a.node.isRequired,children:u.a.node.isRequired,currentState:u.a.oneOf(["ready","submitting","done"]),onClick:u.a.func,result:u.a.node,theme:k.a,use:u.a.oneOf(Object.values(C))};w.defaultProps={"data-test-id":"loading-button",use:C.PRIMARY,onClick:function(){}};w.displayName="VizExLoadingButton";t.a=w},UxS0:function(e,t,n){"use strict";n.r(t);n.d(t,"buildVisitorCommonMessage",function(){return m});var a=n("UG02"),r=n("HvW9"),i=n("YblA"),o=n("Hr1N"),s=n("B/8b"),c=n("bWKF"),u=n("5xHP"),l=n("IhEF"),d=n("j9x2"),p=n("GavG"),m=function(e){var t,n=e.clientType,m=e.fileAttachment,h=e.quickReply,f=e.richText,b=e.senderId,g=e.text,v=Object(c.b)(r.e),O=Object(s.a)(v),j=[];m&&j.push(m);h&&j.push(new o.a(h));return Object(p.buildCommonMessage)({status:{source:i.a,messageStatus:d.b},clientType:n,attachments:j,text:g,richText:f,id:Object(l.generateUuid)(),sender:(t={},Object(a.a)(t,u.o,v),Object(a.a)(t,O,b),t)})}},Uz5A:function(e,t,n){var a=n("LPlp");function r(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}e.exports=r},V2EP:function(e,t,n){"use strict";var a=n("xM7V"),r=n("Ux+X"),i=n("Zn4N"),o=function(e){switch(e){case i.a:return"size limit exceeded";default:return null}},s=n("Wnz4"),c=n("BnUr"),u=n("5N3d"),l=n("84zR");n.d(t,"a",function(){return d});var d=function(e){var t=e.file,n=e.thread;return function(e){var i=Object(c.getThreadId)(n);return Object(u.validateAttachmentFile)(t).then(function(){var n=new a.a({file:t,progress:0});return e(Object(l.uploadAttachment)({attachment:n,threadId:i}))}).catch(function(t){e(Object(s.attachmentError)(t,i));e(Object(r.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":o(t)}))})}}},VJJX:function(e,t,n){"use strict";n.r(t);n.d(t,"PRIMARY",function(){return a});n.d(t,"SECONDARY",function(){return r});var a="primary",r="secondary"},VXRw:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadStart",function(){return i});var a=n("Zsd8"),r=n("FDs6"),i=Object(a.createAction)(r.d)},VdXU:function(e,t,n){"use strict";var a=n("TMxi"),r=n("VfuR"),i=n.n(r),o=n("Ktcs"),s=n.n(o),c=n("9f1P"),u=n.n(c),l=n("ILY+"),d=n("NrIs"),p=n("8nIw"),m=n("VJJX"),h=n("0wDu"),f=h.h,b=h.j,g=(h.b,h.a,n("8u6N")),v=function(e){var t=e.theme;switch(e.use){case m.PRIMARY:var n=f(t);return Object(c.css)(["background-color:",";"],Object(g.a)(n,20));case m.SECONDARY:default:var a=f(t);return Object(c.css)(["background-color:",";"],Object(g.a)(a,95))}},O=function(e){var t=e.theme;switch(e.use){case m.PRIMARY:var n=f(t);return Object(c.css)(["background-color:",";"],Object(g.a)(n,-10));case m.SECONDARY:default:var a=f(t);return Object(c.css)(["background-color:",";"],Object(g.a)(a,90))}},j=function(e){var t,n=e.theme,a=e.use,r=e.active,i=e.hover,o=e.disabled,s=e.isSubmitting;if(o&&!s)return Object(c.css)(["background-color:",";border:none;"],Object(h.a)(n));r&&(t=O({theme:n,use:a}));i&&(t=v({theme:n,use:a}));switch(a){case m.PRIMARY:return Object(c.css)(["background-color:",";border:none;",""],f(n),t);case m.SECONDARY:default:return Object(c.css)(["background-color:transparent;border-color:",";",""],f(n),t)}},y=function(e){var t=e.theme,n=e.use,a=e.disabled,r=e.isSubmitting;if(a&&!r)return Object(c.css)(["color:",";"],Object(h.b)(t));switch(n){case m.PRIMARY:return Object(c.css)(["color:",";"],b(t));case m.SECONDARY:default:return Object(c.css)(["color:",";"],f(t))}},x=Object(c.css)(["&:hover{","}&:active{","}"],v,O),C=u.a.button.withConfig({displayName:"VizExButton__AbstractVizExButton",componentId:"sc-1hxibsz-0"})(["flex-shrink:0;border-radius:3px;padding:",";font-size:",";line-height:16px;outline:none;transition:background-color 150ms ease-out;border-style:solid;border-width:1px;cursor:",";user-select:",";text-align:center;"," "," ",";&:focus{outline:0;}"],function(e){var t=e.size;return p.b[t]},function(e){var t=e.size;return p.a[t]},function(e){return e.disabled?"not-allowed":"pointer"},function(e){return e.disabled?"none":null},y,j,function(e){return e.disabled?null:x}),k=u.a.div.withConfig({displayName:"VizExButton__NoSelect",componentId:"sc-1hxibsz-1"})(["user-select:none;"]),E=function(e){var t=e.children,n=e.onClick,r=e.use,i=e.theme,o=e.hover,c=e.active,u=e.disabled,l=Object(a.a)(e,["children","onClick","use","theme","hover","active","disabled"]);return s.a.createElement(C,Object.assign({},l,{theme:i,use:r,onClick:n,hover:o,active:c,disabled:u}),s.a.createElement(k,null,t))};E.displayName="VizExButton";E.propTypes={active:i.a.bool,children:i.a.node,disabled:i.a.bool,hover:i.a.bool,onClick:i.a.func,size:i.a.oneOf(Object.keys(p.c)),theme:d.a,use:i.a.oneOf(Object.values(m))};E.defaultProps={use:m.SECONDARY,disabled:!1,size:l.e};t.a=E},Vsm7:function(e,t,n){var a=n("QhUm");function r(e){return a(this,e).get(e)}e.exports=r},VuFk:function(e,t,n){"use strict";var a,r=n("nDpY"),i=n.n(r),o=n("19qb"),s=n("n4QB"),c=n("/VsO"),u=n("2OBk"),l=n("OdFI"),d=n("9di4"),p=n("QYOI"),m=n("VfuR"),h=n.n(m),f=n("Ktcs"),b=n.n(f),g=n("9f1P"),v=n.n(g),O=n("0IK8"),j=n("UG02"),y=n("eP/i"),x=n("6s0Z"),C=n("6xAP"),k=(a={},Object(j.a)(a,x.b,Object(C.a)()),Object(j.a)(a,x.a,Object(C.a)()),Object(j.a)(a,x.c,Object(C.a)({backgroundColor:y.c,borderColor:y.d})),a),E=Object(f.createContext)(k),T=n("qXlW"),w=n("5xHP"),I=n("5N4t"),S=function(e,t){return Object(O.getSenderId)(e)===Object(O.getSenderId)(t)&&Object(O.getSenderType)(e)===Object(O.getSenderType)(t)},R=function(e,t){return Object(O.getType)(e)===Object(O.getType)(t)},A=function(e){return function(t,n){var a=Object(O.getTimestamp)(t),r=Object(O.getTimestamp)(n);return Math.abs(a-r)>=e}}(6e4),M=function(e,t){e=Object(I.a)(e)||e;t=Object(I.a)(t)||t;return S(e,t)&&R(e,t)&&!A(e,t)},P=function(e){return Object(I.a)(e)||e},N=n("rCfO"),q=n("xU7t"),F=Object(N.a)(function(e,t){e=P(e);return Object(q.fileAttachmentIdsInMessage)(e).reduce(function(e,n){return t.has(""+n)?e.push(t.get(""+n)):e},Object(p.List)())}),_=n("eoCu"),L=n("3Egs"),B=function(e,t,n,a){var r,i=!t,o=!M(e,t),s=!a&&!M(e,n),c=!n,u=(r={},Object(j.a)(r,L.a,i),Object(j.a)(r,L.b,o),Object(j.a)(r,L.d,s),Object(j.a)(r,L.c,c),r);return Object.keys(u).reduce(function(e,t){return u[t]?e.add(t):e},Object(p.Set)())},D=n("i2Vg"),z=n("2rNL"),V=function(e,t){return!Object.keys(e).some(function(n){return"fileAttachments"===n||"positionDescriptors"===n||"senders"===n?!Object(p.is)(e[n],t[n]):e[n]!==t[n]})},H=Object(f.memo)(function(e){var t=e.fileAttachments,n=e.historyConfig,a=e.message,r=e.portalId,i=e.positionDescriptors,o=e.presentSenderLocators,s=e.senders,c=e.visitorLastReadTimestamp,u=e.lastMessageId,l=Object(j.a)({},z.a,Object(_.a)(a)),d=n[Object(O.getType)(a)];return d?b.a.createElement("div",l,b.a.createElement(d,{fileAttachments:t,message:a,portalId:r,positionDescriptors:i,senders:s,presentSenderLocators:o,visitorLastReadTimestamp:c,lastMessageId:u})):null},V);H.displayName="MessageHistoryItem";H.propTypes={fileAttachments:h.a.instanceOf(p.List),historyConfig:h.a.object.isRequired,lastMessageId:h.a.string,message:h.a.instanceOf(p.Record).isRequired,portalId:h.a.number.isRequired,positionDescriptors:D.a.isRequired,presentSenderLocators:h.a.instanceOf(p.Set),senders:T.a,visitorLastReadTimestamp:h.a.number};H.defaultProps={innerRef:function(){},positionDescriptors:[]};var U=H,W=v.a.div.withConfig({displayName:"MessageHistory__ReflowElement",componentId:"sc-8u77yf-0"})(["z-index:0;padding-top:4px;padding-left:16px;padding-right:16px;flex-shrink:0;@media screen and (max-width:900px){padding-left:8px;padding-right:8px;}"]),Q=function(e){Object(d.a)(t,e);function t(){Object(s.a)(this,t);return Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}Object(c.a)(t,[{key:"getDontIncludeLastInGroup",value:function(e,t){var n=this.props.messages.get(t+2);return!(!n||!M(e,n))}},{key:"renderHistory",value:function(){var e=this,t=this.props,n=t.fileAttachments,a=t.getAdditionalPositionDescriptors,r=t.historyConfig,i=t.lastMessageId,o=t.messages,s=t.portalId,c=t.presentSenderLocators,u=t.senders,l=t.visitorLastReadTimestamp,d=a(o);return o.map(function(t,a){var m,h=a>0?o.get(a-1):void 0,f=o.get(a+1);Object(O.getType)(f)===w.t&&(m=e.getDontIncludeLastInGroup(t,a));var g=F(t,n),v=B(t,h,f,m),j=Object(O.getId)(t);v=v.merge(d.get(j,Object(p.Set)()));return b.a.createElement(U,{historyConfig:r,fileAttachments:g,portalId:s,positionDescriptors:v,key:Object(_.a)(t),message:t,senders:u,presentSenderLocators:c,visitorLastReadTimestamp:l,lastMessageId:i})})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.themeConfig;return b.a.createElement(W,{className:t},b.a.createElement(E.Provider,{value:n},this.renderHistory()))}}]);return t}(b.a.PureComponent);Q.displayName="MessageHistory";Q.propTypes={className:h.a.string,fileAttachments:h.a.instanceOf(p.Map),getAdditionalPositionDescriptors:h.a.func,historyConfig:h.a.object.isRequired,lastMessageId:h.a.string,messages:h.a.instanceOf(p.List),portalId:h.a.number.isRequired,presentSenderLocators:h.a.instanceOf(p.Set),senders:T.a,themeConfig:h.a.object,visitorLastReadTimestamp:h.a.number};Q.defaultProps={getAdditionalPositionDescriptors:function(){return Object(p.Map)()},fileAttachments:Object(p.Map)(),preventAutoscroll:!1,presentSenderLocators:Object(p.Set)(),scrollContainerToBottom:function(){},displayEmailDeleteBanner:!1};var Y=Q,J=n("mKxs"),G=n("CnAB"),K=Object(f.memo)(function(e){var t=e.themeConfig,n=e.children;return b.a.createElement(G.a.Provider,{value:t},n)});K.displayName="ThemeConfigProvider";K.propTypes={children:h.a.node.isRequired,themeConfig:h.a.objectOf(Object(J.a)("Theme"))};var Z=K,X=n("T25L").a,$=n("5SRO"),ee=n("sQV+"),te=n("E6wg"),ne=n("HiOC"),ae=n("OoDT"),re=n("3oj9"),ie=n("ZSXR"),oe=n("eEyY"),se=n("gALC"),ce=function(e){var t=Object(ie.a)(e);return{isLoadingHistory:Object(ee.isStarted)(t),loadingHistoryFailed:Object(ee.isFailed)(t),sessionId:Object(te.getSessionId)(e),threadHistory:Object(re.a)(e),threadId:Object(oe.getCurrentThreadId)(e),isOnFocus:Object(se.a)(e)}},ue={fetchThreadHistory:ne.fetchThreadHistory},le=Object(o.connect)(ce,ue)(ae.a),de=n("Fjoq"),pe=Object(p.Record)({tileBackgroundColor:"rgba(255, 255, 255, 0.5)"},"FileAttachmentTheme"),me=n("xzMr"),he=n("iDVC"),fe=pe({tileBackgroundColor:y.j}),be=function(e){var t,n=e.coloring;return t={},Object(j.a)(t,x.b,Object(he.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:fe})),Object(j.a)(t,x.a,Object(he.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:fe,widgetAccent:Object(de.c)(n)?y.k:Object(de.a)(n),quickReplyTheme:Object(me.a)({borderColor:Object(de.c)(n)?y.h:Object(de.a)(n),color:Object(de.c)(n)?y.k:Object(de.b)(n)})})),Object(j.a)(t,x.c,Object(he.a)({alignItems:"flex-end",backgroundColor:Object(de.c)(n)?y.l:Object(de.a)(n),borderColor:"rgba(0, 0, 0, 0.2)",borderRadius:"8px 0px 8px 8px",borderWidth:"0px",textColor:Object(de.c)(n)?y.k:Object(de.b)(n),fileAttachmentTheme:fe,widgetAccent:Object(de.c)(n)?y.k:Object(de.a)(n)})),t},ge=n("sl/w"),ve=n("gFbD"),Oe=n("LRQi"),je=v.a.div.withConfig({displayName:"NewThreadPrompt__NewThreadpromptContainer",componentId:"efoo07-0"})(["padding:32px 20px 12px 20px;text-align:center;width:100%;"]);function ye(e){var t=e.createNewThread;return b.a.createElement(ve.a,null,function(e){return b.a.createElement(je,null,b.a.createElement("p",{className:"m-bottom-0"},b.a.createElement(ge.a,{message:"conversations-visitor-ui.newThreadPrompt.newHeading",options:{locale:e}})),b.a.createElement(Oe.a,{"data-test-id":"visitor-widget-start-new-thread-button",onClick:t},b.a.createElement(ge.a,{message:"conversations-visitor-ui.newThreadPrompt.newButton",options:{locale:e}})))})}ye.propTypes={createNewThread:h.a.func.isRequired};ye.displayName="NewThreadPrompt";var xe=ye,Ce=n("uxYb"),ke=n("AQmo"),Ee=function(e){return{accentColor:Object(de.a)(Object(ke.a)(e))}},Te={createNewThread:Ce.a},we=Object(o.connect)(Ee,Te)(xe),Ie=function(e){Object(d.a)(t,e);function t(){Object(s.a)(this,t);return Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.fileAttachments,a=e.messagesList,r=e.portalId,i=e.senders,o=e.shouldRenderNewThreadPrompt;return b.a.createElement(le,{messageCount:X(a),shouldScrollToBottom:o},b.a.createElement(Z,{themeConfig:be({coloring:t})},b.a.createElement(Y,{fileAttachments:n,historyConfig:$.a,messages:a,portalId:r,senders:i}),o&&b.a.createElement(we,null)))}}]);return t}(f.Component);Ie.propTypes={coloring:Object(J.a)("ColoringRecord").isRequired,fileAttachments:h.a.instanceOf(p.Map).isRequired,messagesList:h.a.instanceOf(p.List),portalId:h.a.number.isRequired,senders:h.a.instanceOf(p.Map).isRequired,shouldRenderNewThreadPrompt:h.a.bool.isRequired};Ie.displayName="ThreadHistory";var Se=Ie,Re=n("dJw2"),Ae=n("f8gn"),Me=n("TXBG"),Pe=n("eCQl"),Ne=n("YibP"),qe=function(e){var t;try{t=Object(Re.a)(e)}catch(e){Object(Pe.reportError)({error:Object(Ne.a)("ConnectedChatHistoryGetMessagesList selector threw: "+e.message,e)});throw e}return{coloring:Object(ke.a)(e),fileAttachments:Object(Me.a)(e),messagesList:t,portalId:i.a.get(),senders:Object(Ae.a)(e)}},Fe={};t.a=Object(o.connect)(qe,Fe)(Se)},Vv6d:function(e,t,n){"use strict";var a=n("TMxi"),r=n("VfuR"),i=n.n(r),o=n("Ktcs"),s=n.n(o),c=n("9f1P"),u=n.n(c),l=n("0wDu").h,d=n("NrIs"),p=u.a.div.withConfig({displayName:"VizExNanoProgress__Bar",componentId:"vrf6zp-0"})(["transition:width 0.2s ease-in-out;left:0;position:absolute;top:0;opacity:",";width:",";height:3px;z-index:",";background-color:",";"],function(e){return 0===e.value?0:1},function(e){return e.value+"%"},function(e){return e.zIndex},function(e){var t=e.theme;return l(t)}),m=function(e){var t=e.zIndex,n=e.value,r=e.theme,i=Object(a.a)(e,["zIndex","value","theme"]);return s.a.createElement(p,Object.assign({},i,{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":n,role:"progressbar",zIndex:t,value:n,theme:r}))};m.propTypes={theme:d.a,value:i.a.number,zIndex:i.a.number};m.defaultProps={zIndex:10,value:0};m.displayName="VizExNanoProgress";t.a=m},WdXK:function(e,t,n){"use strict";n.r(t);var a=n("HvW9"),r=n("QYOI"),i=Object(r.Record)({senderId:null,senderType:null},"SenderLocator");n.d(t,"buildSenderLocator",function(){return s});var o=[a.a,a.b,a.d,a.e,a.c],s=function(e,t){o.includes(e)||console.warn("buildSenderLocator recevied invalid sender type "+e+" expected one of: "+o);return e===a.e?i({senderType:a.e}):i({senderType:e,senderId:t?""+t:null})}},Wnz4:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentError",function(){return i});var a=n("Zsd8"),r=n("FDs6"),i=Object(a.createAction)(r.a,function(e,t){return{error:e,threadId:t}})},Wzl7:function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("9di4"),c=n("VfuR"),u=n.n(c),l=n("Ktcs"),d=n.n(l),p=n("9f1P"),m=n.n(p),h=n("7A+m"),f=n("VuFk"),b=n("19qb"),g=n("k09d"),v=n("G0nr"),O=n("Ux+X"),j=n("mKxs"),y=n("Zn4N"),x=n("FC+o"),C=n("evgc"),k=n("E7sj"),E=n.n(k),T=n("sl/w"),w=n("/EZN"),I=n("LRQi"),S=n("TMxi"),R=n("L0DB"),A=m.a.input.withConfig({displayName:"VizExFileButton__FilePickerInput",componentId:"sc-1p4t8gi-0"})(["display:none;"]),M=function(e){var t=e.children,n=e.multiple,a=e.accept,r=e.onChange,i=e.onClick,o=Object(S.a)(e,["children","multiple","accept","onChange","onClick"]),s=Object(l.useRef)(),c=function(e){s.current.click();Object(R.a)(i,e)};return d.a.createElement(l.Fragment,null,t({onClick:c}),d.a.createElement(A,Object.assign({},o,{ref:s,type:"file",accept:a.join(","),multiple:n,onChange:r})))};M.displayName="VizExFileButton";M.defaultProps={accept:[]};M.propTypes={accept:u.a.arrayOf(u.a.string),children:u.a.func.isRequired,multiple:u.a.bool,onChange:u.a.func,onClick:u.a.func};var P=M,N=function(e){return d.a.createElement(P,{accept:w.a,use:"unstyled",onClick:e.onClick,onChange:e.onChange},function(t){return d.a.createElement(I.a,Object.assign({use:"on-bright"},t),e.children)})};N.displayName="FilePickerLink";N.propTypes={children:u.a.node.isRequired,onChange:u.a.func.isRequired,onClick:u.a.func};var q=N,F=n("kSDi"),_=n("BnUr"),L=function(e){var t=e.attachmentsError,n=e.dismissAttachmentsError,a=e.selectAttachmentFile,r=e.thread,i=e.trackInteraction,o=function(){n({threadId:Object(_.getThreadId)(r)})},s=function(e){var t=e.target.files;if(t&&t.length){var n=t.item(0);a({file:n,thread:r})}},c=function(){i("retry-attachment-upload",{action:"retry attachment upload"})},u=function(){switch(t){case y.a:return d.a.createElement(T.a,{message:"cvVisitorUIAttachments.errors.fileSizeExceeded",options:{maxSize:E.a.formatSize(F.b)}});case y.b:return d.a.createElement(T.a,{message:"cvVisitorUIAttachments.errors.uploadError"});default:return null}}();return d.a.createElement(C.a,{title:u,onClose:o,link:d.a.createElement(q,{onChange:s,onClick:c},d.a.createElement(T.a,{message:"cvVisitorUIAttachments.tryAgain"}))})};L.displayName="AttachmentErrorAlerts";L.propTypes={attachmentsError:u.a.oneOf([y.a,y.b]),dismissAttachmentsError:u.a.func.isRequired,selectAttachmentFile:u.a.func.isRequired,thread:Object(j.a)("Thread").isRequired,trackInteraction:u.a.func.isRequired};var B=L,D=n("eEuy"),z=n("4FzD"),V=function(e){var t=e.createNewThread,n=e.fetchOlderThreadHistory,a=e.networkError,r=e.startPubSub,i=e.resubscribe,o=Object(l.useState)([]),s=Object(z.a)(o,2),c=s[0],u=s[1],p=function(){u([].concat(Object(D.a)(c),[a]))};if(c.includes(a))return null;var m=function(){switch(a){case x.b:case x.c:case x.d:return d.a.createElement(T.a,{message:"conversations-visitor-ui.network.offline.title"});case x.e:return d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});case x.a:return d.a.createElement(T.a,{message:"conversations-visitor-ui.network.newThreadFailure.title"});default:return null}}(),h=function(){switch(a){case x.e:return d.a.createElement(I.a,{use:"on-bright",onClick:n},d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"}));case x.a:return d.a.createElement(I.a,{use:"on-bright",onClick:t},d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"}));case x.d:return d.a.createElement(I.a,{use:"on-bright",onClick:i},d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"}));case x.c:return d.a.createElement(I.a,{use:"on-bright",onClick:r},d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"}));default:return null}}();return d.a.createElement(C.a,{title:m,onClose:p,link:h})};V.displayName="NetworkErrorAlerts";V.propTypes={createNewThread:u.a.func.isRequired,fetchOlderThreadHistory:u.a.func.isRequired,networkError:u.a.oneOf([x.b,x.e,x.a,x.c,x.d]).isRequired,resubscribe:u.a.func.isRequired,startPubSub:u.a.func.isRequired};var H=V,U=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.attachmentsError,n=e.createNewThread,a=e.dismissAttachmentsError,r=e.fetchOlderThreadHistory,i=e.networkError,o=e.resubscribe,s=e.selectAttachmentFile,c=e.startPubSub,u=e.thread,l=e.trackInteraction;return t?d.a.createElement(B,{attachmentsError:t,dismissAttachmentsError:a,selectAttachmentFile:s,thread:u,trackInteraction:l}):i?d.a.createElement(H,{createNewThread:n,fetchOlderThreadHistory:r,networkError:i,resubscribe:o,startPubSub:c}):null}}]);return t}(l.Component);U.displayName="ChatAreaAlertContainer";U.propTypes={attachmentsError:u.a.oneOf([y.a,y.b]),createNewThread:u.a.func.isRequired,dismissAttachmentsError:u.a.func.isRequired,fetchOlderThreadHistory:u.a.func.isRequired,networkError:u.a.oneOf([x.b,x.e,x.a,x.c,x.d]),resubscribe:u.a.func.isRequired,selectAttachmentFile:u.a.func.isRequired,startPubSub:u.a.func.isRequired,thread:Object(j.a)("Thread").isRequired,trackInteraction:u.a.func.isRequired};var W=U,Q=n("GkNN"),Y=n("lRdY"),J=n("V2EP"),G=n("r0yA"),K=n("NpZo"),Z=n("E6wg"),X=n("Xcjc"),$=n("J4oD"),ee=n("HiOC"),te=n("021p"),ne=function(){return function(e,t){var n=t(),a=Object(Z.getSessionId)(n),r=Object(K.getSelectedThreadId)(n);if(null!==r&&r!==X.a){var i=Object(g.a)(n),o=Object($.historyDataForThread)(n,{thread:i}),s=Object(te.c)(o),c=Object(te.d)(o);e(Object(ee.fetchThreadHistory)({offsetOrdinal:s,offsetTimestamp:c,threadId:r,sessionId:a}))}}},ae=n("5rZi"),re=n("8HpB"),ie=function(e,t){var n=t.thread;return{attachmentsError:Object(Q.a)(e,{thread:n}),networkError:Object(G.a)(e)}},oe={createNewThread:ae.createNewThread,dismissAttachmentsError:Y.a,fetchOlderThreadHistory:ne,selectAttachmentFile:J.a,trackInteraction:O.trackInteraction,startPubSub:re.startPubSub,resubscribe:v.resubscribe},se=Object(b.connect)(ie,oe)(W),ce=function(e){return{thread:Object(g.a)(e)}},ue=Object(b.connect)(ce)(se),le=n("Qf6G"),de=n("/Dz0"),pe=n("MBJP"),me=n("647q"),he=n("ZqFO"),fe=Object(pe.a)([me.getLatestWidgetData],function(e){return Object(he.d)(e)}),be=n("lOT2"),ge=n("8M+t"),ve=n("AQmo"),Oe=n("JGJA"),je=Object(Oe.a)("gdpr"),ye=Object(pe.a)([je],Object(Oe.a)("consentToProcessError")),xe=function(e){return{consentToProcessMessage:fe(e),showGdprConsentToProcessButton:Object(be.a)(e),coloring:Object(ve.a)(e),consentToProcessError:ye(e)}},Ce={consentToProcess:le.consentToProcess,dismissConsentToProcessError:de.b,trackInteraction:O.trackInteraction},ke=Object(b.connect)(xe,Ce)(ge.a),Ee=n("Isoj"),Te=n("NfVS"),we=n("eP/i"),Ie=n("monH"),Se=n("T77c"),Re=function(e){var t=e.ariaLabel,n=e.children,a=e.onClick,r=e.href;r||(r=void 0);return d.a.createElement(I.a,{theme:Object(Ie.a)(Object(Se.e)(we.m)),onClick:a,href:r,external:!0,"aria-label":t},n)};Re.propTypes={ariaLabel:u.a.string,children:u.a.node.isRequired,href:u.a.string,onClick:u.a.func};Re.defaultProps={href:"",onClick:function(){}};Re.displayName="BrandingLink";var Ae=Re,Me=n("7LhL"),Pe=function(e){return d.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24"},e),d.a.createElement("defs",null,d.a.createElement("path",{d:"M17 16c-1.38 0-2.5-1.12-2.5-2.5S15.62 11 17 11s2.5 1.12 2.5 2.5S18.38 16 17 16m.906-8.43V4.832c.716-.338 1.218-1.061 1.218-1.9v-.064c0-1.158-.95-2.105-2.11-2.105h-.064c-1.161 0-2.111.947-2.111 2.105v.064c0 .839.503 1.562 1.219 1.9V7.57c-1.067.164-2.042.603-2.846 1.249L5.676 2.97c.05-.191.085-.387.085-.594C5.762 1.067 4.698.001 3.384 0 2.069-.001 1 1.06 1 2.372.998 3.683 2.063 4.748 3.378 4.75c.428 0 .825-.121 1.172-.318l7.413 5.753c-.63.95-1 2.087-1 3.311 0 1.282.406 2.467 1.093 3.443L9.8 19.188c-.178-.053-.363-.091-.56-.091-1.08 0-1.956.874-1.956 1.952 0 1.078.876 1.951 1.956 1.951 1.081 0 1.957-.873 1.957-1.95 0-.196-.038-.381-.091-.559l2.23-2.225c1.012.772 2.273 1.235 3.645 1.235 3.324 0 6.018-2.69 6.018-6.005 0-3.002-2.21-5.482-5.094-5.926",id:"sprocket__a"})),d.a.createElement("use",{xlinkHref:"#sprocket__a",fillRule:"evenodd"}))};Pe.displayName="SVGSprocket";var Ne=Pe,qe=n("Y8MA"),Fe=n("fzij"),_e=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.liveChatHref,n=e.onLinkClick;return d.a.createElement("div",{className:"m-bottom-2 align-center justify-center"},d.a.createElement(Me.a,{theme:Object(Ie.a)(Object(qe.b)(we.m)),icon:d.a.createElement(Ne,null),className:"m-right-1"}),d.a.createElement(Fe.a,{use:"help"},d.a.createElement(Te.a,{message:"conversations-visitor-experience-components.chatArea.branding_jsx",elements:{Link:Ae},options:{ariaLabel:E.a.text("conversations-visitor-experience-components.chatArea.brandingAriaLabel"),href:t,onClick:n}})))}}]);return t}(d.a.PureComponent);_e.propTypes={liveChatHref:u.a.string,onLinkClick:u.a.func};_e.displayName="WidgetBranding";var Le=_e,Be=n("JWyW"),De=n("jxkM"),ze=function(e){return{liveChatHref:Object(Be.a)(e),onLinkClick:De.clickedViralLink}},Ve=Object(b.connect)(ze)(Le),He=n("QmIQ"),Ue=1e3,We=m.a.div.withConfig({displayName:"UnifiedThreadView__UnifiedThreadViewWrapper",componentId:"sc-7c4u6b-0"})(["display:flex;flex-direction:column;height:",";"],function(e){return e.shouldShowMeetingsLink?"calc(100% - 44px)":"100%"}),Qe=function(e){Object(s.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={renderNewThreadPrompt:!e.isThreadStarted};return n}Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.isThreadStarted,r=n.toggleOnAndOffInputFocus,i=e.isThreadStarted;a||a===i||setTimeout(function(){t.setRenderNewThreadPromptTrue();r(!1)},Ue);a&&this.state.renderNewThreadPrompt&&this.setRenderNewThreadPromptFalse()}},{key:"setRenderNewThreadPromptTrue",value:function(){this.setState({renderNewThreadPrompt:!0})}},{key:"setRenderNewThreadPromptFalse",value:function(){this.setState({renderNewThreadPrompt:!1})}},{key:"renderMessageEditor",value:function(){var e=this.props,t=e.requiresExplicitConsentToProcess,n=e.renderCookieConsentPrompt,a=this.state.renderNewThreadPrompt;return t||n||a?null:d.a.createElement(l.Fragment,null,d.a.createElement(ue,null),d.a.createElement(h.a,null))}},{key:"renderError",value:function(){var e=d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});return d.a.createElement(C.a,{title:e,onClose:function(){}})}},{key:"render",value:function(){var e=this.props,t=e.shouldShowMeetingsLink,n=e.showingGdprProcess,a=e.showingHsBranding,r=e.renderCookieConsentPrompt,i=this.state.renderNewThreadPrompt;return d.a.createElement(We,{shouldShowMeetingsLink:t},d.a.createElement(He.a,{renderError:this.renderError,errorLoggingTitle:"ConnectedThreadHistory"},d.a.createElement(f.a,{shouldRenderNewThreadPrompt:i})),r&&d.a.createElement(Ee.a,null),n&&!r&&d.a.createElement(ke,null),this.renderMessageEditor(),a&&d.a.createElement(Ve,null))}}]);return t}(l.PureComponent);Qe.displayName="UnifiedThreadView";Qe.propTypes={isThreadStarted:u.a.bool.isRequired,renderCookieConsentPrompt:u.a.bool.isRequired,requiresExplicitConsentToProcess:u.a.bool.isRequired,shouldShowMeetingsLink:u.a.bool.isRequired,showingGdprProcess:u.a.bool.isRequired,showingHsBranding:u.a.bool.isRequired,toggleOnAndOffInputFocus:u.a.func.isRequired};t.a=Qe},XG4J:function(e,t){e.exports="//static.hsappstatic.net/salesImages/static-1.410/messages/bot-avatar.svg"},XXaZ:function(e,t,n){var a=n("uQvf"),r=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;return a?void 0!==t[e]:r.call(t,e)}e.exports=i},XiSY:function(e,t,n){var a=n("3FHW"),r=n("bwj0"),i=n("kmmH"),o=n("QVIP"),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,d=u.toString,p=l.hasOwnProperty,m=RegExp("^"+d.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(e){return!(!i(e)||r(e))&&(a(e)?m:c).test(o(e))}e.exports=h},Z6IV:function(e,t,n){"use strict";n.r(t);n.d(t,"isSupportedMessageType",function(){return l});var a=n("U+Gd"),r=n("bCG+"),i=n("5N4t"),o=n("/rM/"),s=n("5SRO"),c=n("0IK8"),u=n("HvW9"),l=function(e){if(e instanceof a.a||e instanceof r.a){e=Object(i.a)(e);if(Object(c.getSenderType)(e)!==u.e)return!1}if(Object(o.a)(e))return!1;var t=Object(c.getType)(e);return Object.keys(s.a).some(function(e){return e===t})}},ZAuv:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n("UG02"),r=n("oawp"),i=n("BnUr"),o=n("nS6h"),s=n("OTPB"),c=n("0sif"),u=n("YblA"),l=n("IhEF"),d=n("B/8b"),p=n("j9x2"),m=function(e){var t=e.thread;return function(e,n){var m=Object(i.getChannelName)(t),h=Object(i.getThreadId)(t),f=r.VISITOR_SENDER,b=Object(d.a)(f),g=Object(s.getMessagesUtk)(n()),v=new c.a({id:Object(l.generateUuid)(),typingState:null,sender:Object(a.a)({"@type":f},b,g),status:{source:u.a,messageStatus:p.b}});e(Object(o.publishMessageToConversation)({channel:m,message:v,threadId:h}))}}},ZSXR:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("vr6k"),r=n("MBJP"),i=n("LB97"),o=n("eEyY"),s=Object(r.a)([i.a,o.getCurrentThreadId],function(e,t){return"number"!=typeof t?null:Object(a.getEntry)(t,e)||null})},Zn4N:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return r});var a="SIZE_LIMIT_EXCEEDED",r="UPLOAD_ERROR"},"b+5w":function(e,t,n){"use strict";"use es6";function a(){var e,t;return{promise:new Promise(function(n,a){t=n;e=a}),reject:e,resolve:t}}t.a=a},bOW6:function(e,t,n){"use strict";n.r(t);n.d(t,"wrapFailedMessage",function(){return c});var a=n("j9x2"),r=n("0IK8"),i=n("C3IS"),o=n("bCG+"),s=n("qjq5"),c=Object(s.a)(function(e,t){var n=e.threadId,s=e.channel,c=e.allowRetry,u=void 0===c||c;return Object(i.a)(t)&&Object(r.getStatusForCmf)(t)===a.a?Object(o.a)({message:t,threadId:n,channel:s,allowRetry:u}):t})},bwj0:function(e,t,n){var a,r=n("DOHQ"),i=(a=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";function o(e){return!!i&&i in e}e.exports=o},byjC:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("MBJP"),r=n("k8Ub"),i=n("nEm4"),o=n("J4oD"),s=n("kWFB"),c=n("iPDb"),u=Object(a.a)(o.historyDataForThread,function(e){if(!e||!Object(s.hasMessages)(e))return!1;var t=Object(c.a)(e).filter(function(e){return Object(i.isChatMessage)(e)||Object(i.isInitialMessage)(e)}).last();return Boolean(Object(r.a)(t))})},ccWV:function(e,t,n){var a=n("LPlp"),r=Array.prototype.splice;function i(e){var t=this.__data__,n=a(t,e);if(n<0)return!1;n==t.length-1?t.pop():r.call(t,n,1);--this.size;return!0}e.exports=i},d1Q1:function(e,t,n){var a=n("5els"),r=n("p1fP"),i=n("Vsm7"),o=n("wID2"),s=n("BB3q");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype.delete=r;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},dJw2:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("yynV"),r=n("MBJP"),i=n("5SRO"),o=n("4nf7"),s=!1,c=Object(r.a)([o.a],function(e){return Object(a.insertDatesIntoMessageList)(e,i.a,s)})},dz5W:function(e,t,n){"use strict";var a=n("TMxi"),r=n("Ktcs"),i=n.n(r),o=n("9f1P"),s=n.n(o),c=n("0wDu"),u=c.b,l=c.a,d=c.i,p=function(){return"#f5f8fa"},m=function(){return"#eaf0f6"},h=n("VfuR"),f=n.n(h),b=n("NrIs"),g=function(e){var t=e.theme;return Object(o.css)(["color:",";background-color:",";"],u(t),l(t))},v=s.a.div.withConfig({displayName:"VizExFileAttachment__AttachmentWrapper",componentId:"sc-4siid1-0"})(["display:flex;font-size:12px;padding:12px;padding-right:32px;border-radius:3px;position:relative;max-width:100%;flex-direction:row;background-color:",";border:1px solid ",";color:",";",";"],function(e){var t=e.theme;return p(t)},function(e){var t=e.theme;return m(t)},function(e){var t=e.theme;return d(t)},function(e){return e.processing&&g(e)}),O=s.a.div.withConfig({displayName:"VizExFileAttachment__ContentWrapper",componentId:"sc-4siid1-1"})(["display:flex;position:relative;max-width:100%;> *:nth-child(2){padding-left:12px;}"]),j=s.a.div.withConfig({displayName:"VizExFileAttachment__PreviewWrapper",componentId:"sc-4siid1-2"})(["overflow-y:hidden;overflow-x:hidden;align-items:center;display:flex;flex-basis:auto;justify-content:center;flex-shrink:0;font-size:32px;max-height:32px;width:32px;"]),y=s.a.div.withConfig({displayName:"VizExFileAttachment__FileInfoWrapper",componentId:"sc-4siid1-3"})(["flex-grow:1;flex-shrink:0;flex-basis:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;@media all and (-ms-high-contrast:none){flex-basis:auto;max-width:100%;padding-right:12px;}"]),x=s.a.b.withConfig({displayName:"VizExFileAttachment__FileName",componentId:"sc-4siid1-4"})(["font-weight:600;font-size:12px;line-height:12px;"]),C=s.a.div.withConfig({displayName:"VizExFileAttachment__FileInfo",componentId:"sc-4siid1-5"})(["font-size:12px;line-height:12px;"]),k=function(e){var t=e.processing,n=e.preview,r=e.fileName,o=e.fileInfo,s=e.children,c=e.theme,u=Object(a.a)(e,["processing","preview","fileName","fileInfo","children","theme"]);return i.a.createElement(v,Object.assign({},u,{theme:c,processing:t}),s,i.a.createElement(O,null,n&&i.a.createElement(j,null,n),i.a.createElement(y,null,i.a.createElement(x,null,r),i.a.createElement(C,null,o))))};k.propTypes={children:f.a.node,fileInfo:f.a.node,fileName:f.a.node,preview:f.a.node,processing:f.a.bool,theme:b.a};k.displayName="VizExFileAttachment";t.a=k},"eg+O":function(e,t,n){"use strict";n.r(t);n.d(t,"fileExceedsSizeLimit",function(){return r});var a=n("kSDi"),r=function(e){return e.size>a.b}},eoCu:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("MJM1"),r=function(e){return Object(a.a)(["id"],e)||Object(a.a)(["message","id"],e)||-1}},evgc:function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("9di4"),c=n("VfuR"),u=n.n(c),l=n("Ktcs"),d=n.n(l),p=n("9f1P"),m=n.n(p),h=n("A5YI"),f=n("7LhL"),b=n("FT84"),g=n("monH"),v=n("soAR"),O=n("eP/i"),j=m.a.div.withConfig({displayName:"ChatAreaAlert__Wrapper",componentId:"wb0l0d-0"})(["width:100%;display:flex;justify-content:center;background-color:transparent;"]),y=m.a.div.withConfig({displayName:"ChatAreaAlert__Alert",componentId:"wb0l0d-1"})(["display:flex;justify-content:flex-end;align-items:center;padding:7px 14px;min-width:85%;background-color:",";border:1px solid ",";font-weight:500;font-size:12px;"],O.n,O.o),x=m.a.div.withConfig({displayName:"ChatAreaAlert__Title",componentId:"wb0l0d-2"})(["flex:0 1 100%;"]),C=m.a.div.withConfig({displayName:"ChatAreaAlert__LinkWrapper",componentId:"wb0l0d-3"})(["flex:0 0 auto;"]),k=m()(h.a).withConfig({displayName:"ChatAreaAlert__StyledCloseButton",componentId:"wb0l0d-4"})(["position:static;flex:0 0 12px;margin-left:20px;"]),E=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"render",value:function(){return d.a.createElement(j,null,d.a.createElement(y,null,d.a.createElement(x,null,this.props.title),d.a.createElement(C,null,this.props.link),d.a.createElement(k,{use:"transparent-on-background",theme:Object(v.i)(O.p,Object(g.a)()),onClick:this.props.onClose},d.a.createElement(f.a,{icon:d.a.createElement(b.a,null)}))))}}]);return t}(d.a.Component);E.propTypes={link:u.a.node,onClose:u.a.func.isRequired,title:u.a.node.isRequired};E.defaultProps={onClose:function(){}};E.displayName="ChatAreaAlert";t.a=E},f8gn:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n("UG02"),r=n("E0ww"),i=n("29Sb"),o=n("IFrL"),s=n("vr6k"),c=n("QYOI"),u=n("MBJP"),l=n("g4ag"),d=n("fl6v"),p=n("8FuJ"),m=n("BYz9"),h=Object(u.a)([d.getResponders],function(e){return Object(s.getEntries)(e).reduce(function(e,t,n){var s,c=Object(o.a)(t);return Object(l.a)([Object(m.a)(n)],Object(r.a)((s={},Object(a.a)(s,i.a,c?Object(p.a)(c):null),Object(a.a)(s,i.c,Object(o.c)(t)),s)),e)},Object(c.Map)())})},fzij:function(e,t,n){"use strict";var a=n("9f1P"),r=n.n(a),i=n("0wDu"),o="help",s="default",c="error",u=n("tnBd"),l=function(e){var t=e.use,n=e.theme;switch(t){case c:return Object(a.css)(["color:",";"],Object(i.c)(n));case o:return Object(a.css)(["color:",";"],Object(i.d)(n));case s:default:return null}},d=r.a.small.withConfig({displayName:"VizExSmall",componentId:"f5rdak-0"})(["display:block;",";",";"],u.b,l);t.a=d},gygH:function(e,t,n){"use strict";n.r(t);n.d(t,"handleAttachmentUploadProgress",function(){return i});var a=n("kSDi"),r=n("qgyf"),i=function(e){var t=e.localId,n=e.threadId,i=e.loaded,o=e.total;return function(e){var s=i/o*a.c;e(Object(r.attachmentUploadProgress)({localId:t,threadId:n,progress:s}))}}},i2Vg:function(e,t,n){"use strict";var a=n("VfuR"),r=n.n(a),i=n("9C7g");t.a=Object(i.setOf)(r.a.string)},iDVC:function(e,t,n){"use strict";var a=n("rkqN"),r=n("eP/i"),i=n("QYOI"),o=n("xzMr"),s=Object(i.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:r.l,borderColor:r.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:r.k,fileAttachmentTheme:Object(a.a)(),quickReplyTheme:Object(o.a)(),widgetAccent:r.k},"Theme");t.a=s},iu1j:function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("9di4"),c=n("VfuR"),u=n.n(c),l=n("Ktcs"),d=n.n(l),p=n("E7sj"),m=n.n(p),h=n("sl/w"),f=n("OI0Z"),b=["PNG","GIF","JPEG","JPG"],g=function(e){var t=e.name.split("."),n=t[t.length-1]||"";return-1!==b.indexOf(n.toUpperCase())},v=n("A3yT"),O=function(e){var t=Object(v.getFile)(e),n=Object(v.getUploadProgress)(e);return t&&n?n/100*t.size:0},j=n("CPwH"),y=n("PzWr"),x=n("xYYH"),C=n("n8e+"),k=function(e){Object(s.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={imageDataUrl:""};return n}Object(r.a)(t,[{key:"componentDidMount",value:function(){this.processImageFile(this.props.imageFile)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.imageFile!==this.props.imageFile&&this.processImageFile(e.imageFile)}},{key:"shouldComponentUpdate",value:function(e,t){return t.imageDataUrl!==this.state.imageDataUrl}},{key:"processImageFile",value:function(e){var t=this,n=new FileReader;n.addEventListener("load",function(){t.setState({imageDataUrl:n.result})});n.readAsDataURL(e)}},{key:"render",value:function(){return d.a.createElement(C.a,{src:this.state.imageDataUrl})}}]);return t}(d.a.Component);k.displayName="ImageAttachmentPreview";k.propTypes={imageFile:u.a.instanceOf(File).isRequired};var E=k,T=n("mKxs"),w=n("Vv6d"),I=n("dz5W"),S=n("Euw7"),R=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"customFilePreview",value:function(){var e=this.props.attachment,t=Object(v.getFile)(e);if(g(t))return d.a.createElement(E,{imageFile:t})}},{key:"fileInfo",value:function(){return Object(x.isUploadCompleted)(this.props.attachment)?d.a.createElement(f.a,{value:Object(y.getFileSize)(this.props.attachment)}):d.a.createElement(h.a,{message:"conversations-visitor-ui.stagedAttachment.uploadProgress",options:{uploadedBytes:m.a.formatSize(O(this.props.attachment),{precision:2,strip_insignificant_zeroes:!0}),totalBytes:m.a.formatSize(Object(y.getFileSize)(this.props.attachment))}})}},{key:"renderProgress",value:function(){return Object(x.isUploadCompleted)(this.props.attachment)?null:d.a.createElement(w.a,{value:Object(v.getUploadProgress)(this.props.attachment)})}},{key:"render",value:function(){return d.a.createElement(I.a,{processing:!Object(x.isUploadCompleted)(this.props.attachment),fileName:Object(j.getFileName)(this.props.attachment),fileInfo:this.fileInfo(),preview:this.customFilePreview(),style:{minWidth:220}},d.a.createElement(S.a,{size:"xs",onClick:this.props.onRemove}),this.renderProgress())}}]);return t}(d.a.Component);R.displayName="FileUpload";R.propTypes={attachment:Object(T.a)("FileUploadRecord").isRequired,onRemove:u.a.func.isRequired};t.a=R},jM00:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("QYOI"),r=n("MBJP"),i=n("JGJA"),o=n("eEyY"),s=n("OhTC"),c=Object(r.a)([s.a,o.getCurrentThreadId],function(e,t){var n=Object(i.a)(t,e);return n?n.toList():Object(a.List)()})},jVj2:function(e,t,n){"use strict";n.r(t);n.d(t,"removeAttachment",function(){return i});var a=n("Zsd8"),r=n("FDs6"),i=Object(a.createAction)(r.g)},k3iI:function(e,t,n){"use strict";n.r(t);n.d(t,"updateSessionId",function(){return i});var a=n("Zsd8"),r=n("Gaau"),i=Object(a.createAction)(r.b,function(e){return{sessionId:e}})},kSDi:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return r});n.d(t,"c",function(){return i});var a="filemanager/api",r=10485760,i=95},ksA9:function(e,t,n){"use strict";n("E7sj");var a=n("MJM1"),r=(n("HvW9"),["avatar"]),i=["data"],o=["email"],s=["firstName"],c=["id"],u=["lastName"],l=["senderType"],d=["status"];n.d(t,"a",function(){return p});n.d(t,"c",function(){return m});n.d(t,"d",function(){return h});n.d(t,"e",function(){return f});n.d(t,"f",function(){return b});n.d(t,"g",function(){return g});n.d(t,"b",function(){return v});n.d(t,"h",function(){return O});var p=Object(a.a)(r),m=Object(a.a)(o),h=Object(a.a)(s),f=Object(a.a)(c),b=Object(a.a)(u),g=Object(a.a)(l),v=Object(a.a)(i),O=Object(a.a)(d)},lJFu:function(e,t,n){"use strict";n.r(t);var a=n("WZgE"),r=n("YblA"),i=n("Xvzl"),o=n("DdHT"),s=n("nEm4"),c=n("Hnia"),u=n("021p"),l=function(e){Object(c.threadHistoryInvariant)(e);return Object(o.a)(u.b,Object(i.a)(s.isConversationalMessage),function(e){return e&&e.last()})(e)},d=n("nzmY");n.d(t,"buildCreatedThread",function(){return p});var p=function(e){var t=e.channelDetails,n=e.messagesPageUri,i=e.threadHistory,o=e.threadId;return Object(d.a)({channelDetails:t,currentUrl:n,source:r.a,status:a.a.STARTED,threadId:o}).set("latestMessage",l(i))}},lMvc:function(e,t,n){var a=n("uQvf"),r="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;function o(e){var t=this.__data__;if(a){var n=t[e];return n===r?void 0:n}return i.call(t,e)?t[e]:void 0}e.exports=o},lOT2:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("MBJP"),r=n("LgEy"),i=n("8cLO"),o=n("647q"),s=n("3gKe"),c=Object(a.a)([o.getLatestWidgetData,s.a],function(e,t){return Object(r.gdprConsentToProcessEnabled)(e)&&!t&&Object(i.gdprExplicitConsentRequired)(e)})},lRdY:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("Zsd8"),r=n("FDs6"),i=Object(a.createAction)(r.f)},lTxV:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("JGJA"),r=Object(a.a)("currentUrl")},le4V:function(e,t,n){"use strict";var a=n("MBJP"),r=n("DdHT"),i=n("ZqFO"),o=n("VvTX"),s=Object(r.a)(i.f,o.getGdprConsentToCommunicateEnabled),c=n("647q");n.d(t,"a",function(){return u});var u=Object(a.a)([c.getLatestWidgetData],function(e){return s(e)})},lnDz:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadComplete",function(){return i});var a=n("Zsd8"),r=n("FDs6"),i=Object(a.createAction)(r.b)},mMAp:function(e,t,n){var a=n("LPlp");function r(e){return a(this.__data__,e)>-1}e.exports=r},"n8e+":function(e,t,n){"use strict";var a=n("TMxi"),r=n("Ktcs"),i=n.n(r),o=n("VfuR"),s=n.n(o),c="javascript:void(0)",u=/^([^:]+):/,l=/[\s\x00-\x1f]/g,d=function(e){if(e&&"string"==typeof e){var t=e.match(u);if(!t||e===c)return!1;if("javascript:"===t[0].replace(l,"").toLowerCase())return!0}return!1},p=n("9f1P"),m=n.n(p).a.img.withConfig({displayName:"VizExImage__StyledImg",componentId:"sc-1owz4lv-0"})(["display:block;height:auto;max-width:100%;"]),h=function(e){var t=e.src,n=Object(a.a)(e,["src"]),r=d(t);r&&console.warn("VizExImage was given an unsafe src, defaulting to empty.");return i.a.createElement(m,Object.assign({},n,{src:r?null:t}))};h.propTypes={src:s.a.string.isRequired};h.displayName="VizExImage";t.a=h},nEWr:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=1024},nzPM:function(e,t,n){"use strict";var a=n("Ktcs"),r=n.n(a),i=function(e){return r.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24"},e),r.a.createElement("defs",null,r.a.createElement("path",{d:"M21.158.222L2.568 11.815c-.8.498-.749 1.215.113 1.591l4.406 1.923 10.395-9.903c1.377-1.296 1.569-1.119.426.395L8.254 18.215v4.927c0 .953.5 1.141 1.113.418l4.473-5.282 5.055 2.207c.861.376 1.643-.092 1.736-1.04l1.81-18.404c.094-.949-.484-1.317-1.283-.819",id:"send__a"})),r.a.createElement("use",{xlinkHref:"#send__a",fillRule:"evenodd"}))};i.displayName="SVGSend";t.a=i},oHra:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("bdl8"),r=n("tek+"),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){n(Object(a.postExternalApiEvent)({eventType:r.d,payload:{visitorMessageData:e,isEmptyInput:t}}))}}},oxA8:function(e,t,n){"use strict";var a=n("yvRk"),r=n.n(a),i=n("Ktcs"),o=n.n(i),s=n("PVk8");t.a=r()({displayName:"FormattedHTMLMessage",mixins:[s.a],propTypes:s.c,render:function(){this.props.message;var e=Object(s.b)(Object(s.d)(this.props));return o.a.createElement("i18n-string",Object.assign({},e,{dangerouslySetInnerHTML:{__html:this._getValue()}}))}})},p1fP:function(e,t,n){var a=n("QhUm");function r(e){var t=a(this,e).delete(e);this.size-=t?1:0;return t}e.exports=r},p5BV:function(e,t,n){"use strict";n.r(t);n.d(t,"generateIdForFile",function(){return a});var a=function(e){var t=e.file,n=e.timestamp;return t.name+"-"+n}},pDio:function(e,t,n){var a=n("XiSY"),r=n("/TWJ");function i(e,t){var n=r(e,t);return a(n)?n:void 0}e.exports=i},qXlW:function(e,t,n){"use strict";var a=n("mKxs"),r=n("VfuR"),i=n.n(r),o=n("9C7g"),s=n.n(o);t.a=s.a.mapOf(s.a.recordOf({data:Object(a.a)("Sender"),status:i.a.string.isRequired}),Object(a.a)("SenderLocator"))},qgyf:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadProgress",function(){return i});var a=n("Zsd8"),r=n("FDs6"),i=Object(a.createAction)(r.c)},qwm9:function(e,t,n){"use strict";n.r(t);n.d(t,"createVisitorThread",function(){return o});var a=n("nDpY"),r=n.n(a),i=n("VYoM");function o(e){var t=e.sessionId,n=e.messageId,a=e.hubspotUtk,o=e.messagesPageUri,s=e.visitorThreadInitialHistory;return i.a.post("livechat-public/v1/thread/visitor",{query:{sessionId:t,welcomeMessageId:n,hubspotUtk:a,portalId:r.a.get(),expectedResponseType:"WRAPPER_V2"},data:{visitorThreadInitialHistory:s},headers:{"X-HubSpot-Messages-Uri":o}})}},r0yA:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n("MBJP"),r=n("JGJA"),i=n("FC+o"),o=n("sQV+"),s=n("IFrL"),c=n("Ryja"),u=n("M/2P"),l=n("ZSXR"),d=function(e){return e.clientData.isPubNubClientConnected},p=Object(r.a)("subscriptions"),m=Object(a.a)([l.a,c.getAsyncStagedThread,p,u.getAsyncPubSubClient,d],function(e,t,n,a,r){if(Object(o.isFailed)(e))return i.e;if(Object(o.isFailed)(t)){var c=Object(s.b)(t),u=c&&418===c.status;if(!c||!u)return i.a}return Object(o.isFailed)(n)?i.d:Object(o.isFailed)(a)?i.c:r?null:i.b})},rkqN:function(e,t,n){"use strict";var a=n("QYOI"),r=Object(a.Record)({tileBackgroundColor:"rgba(255, 255, 255, 1)"},"FileAttachmentTheme");t.a=r},sIRh:function(e,t,n){"use strict";n.r(t);n.d(t,"default",function(){return h});n.d(t,"publishEmailCaptureResponseMessage",function(){return h});var a=n("HvW9"),r=n("Tb4/"),i=n("YblA"),o=n("hqbU"),s=n("mvh8"),c=n("mu7T"),u=n("nS6h"),l=n("oawp"),d=n("Gy7C"),p=n("IhEF"),m=n("j9x2"),h=function(e){var t=e.channel,n=e.email,h=e.threadId;return function(e,f){var b,g=l.SYSTEM_SENDER;b=Object(d.isUngatedForPersistedMessages)(f())?new c.a({id:Object(p.generateUuid)(),text:n,sender:{"@type":g},status:{source:i.a,messageStatus:m.b}}):Object(r.buildUnpublishedMessage)({descriptor:{},metadata:new o.a({email:n}),senderId:s.a,senderType:a.d,threadId:h});e(Object(u.publishMessageToConversation)({channel:t,message:b,threadId:h}))}}},sWFM:function(e,t,n){"use strict";n.r(t);n.d(t,"getMessageId",function(){return i});var a=n("MBJP"),r=n("647q"),i=Object(a.a)([r.getLatestWidgetData],function(e){return e.message.id})},tlSg:function(e,t,n){"use strict";n.r(t);n.d(t,"sendConsentToCommunicate",function(){return s});var a=n("nDpY"),r=n.n(a),i=n("VYoM"),o="livechat-public/v1/privacy/consentToCommunicate";function s(e){var t=e.sessionId,n=e.hubspotUtk,a=e.threadId;return i.a.put(o,{query:{sessionId:t,hubspotUtk:n,threadId:a,portalId:r.a.get()}})}},uIOU:function(e,t,n){var a=n("QG41"),r=n("6upE"),i=n("lMvc"),o=n("XXaZ"),s=n("KLi6");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype.delete=r;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},uQvf:function(e,t,n){var a=n("pDio")(Object,"create");e.exports=a},"uk/S":function(e,t,n){"use strict";n.r(t);n.d(t,"sendConsentToProcess",function(){return s});var a=n("nDpY"),r=n.n(a),i=n("VYoM"),o="livechat-public/v1/privacy/consentToProcess";function s(e){var t=e.sessionId,n=e.hubspotUtk,a=e.welcomeMessageId;return i.a.put(o,{query:{sessionId:t,hubspotUtk:n,welcomeMessageId:a,portalId:r.a.get()}})}},upey:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="WEB"},vwA6:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("Zsd8"),r=n("NID/"),i=Object(a.createAction)(r.J,function(e){return{widgetInputIsOnFocus:e}});function o(e){return function(t){t(i(e))}}},w1Zi:function(e,t,n){"use strict";var a=n("n4QB"),r=n("/VsO"),i=n("2OBk"),o=n("OdFI"),s=n("bYHN"),c=n("9di4"),u=n("1HZx"),l=n("9Utk"),d=n.n(l),p=n("VfuR"),m=n.n(p),h=n("Ktcs"),f=n.n(h),b=n("7j4v"),g=n("2gT5"),v=n("mKxs"),O=n("kSDi"),j=n("QYOI"),y=n("8f3s"),x=n("/EZN"),C=1e3,k=function(e){Object(c.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).publishTypingMessage=d()(n.props.publishTypingMessage,b.a,{leading:!0,trailing:!1,maxWait:b.a});n.onChatInputChanged=n.onChatInputChanged.bind(Object(s.a)(n));n.onPublishMessage=n.onPublishMessage.bind(Object(s.a)(n));n.onSelectAttachmentFiles=n.onSelectAttachmentFiles.bind(Object(s.a)(n));n.onRemoveAttachment=n.onRemoveAttachment.bind(Object(s.a)(n));n.inputStagingEvent=d()(n.props.inputStagingEvent,C);return n}Object(r.a)(t,[{key:"onChatInputChanged",value:function(e){var t=this.props,n=t.currentConversation,a=t.disablePublish,r=t.shouldSendInputStagingEvent,i=t.showInitialMessageBubble;(0,t.setMessageEditorStagingText)(e);a||this.publishTypingMessage({thread:n});r&&this.inputStagingEvent(e,!1);i&&this.props.closeInitialMessageBubble()}},{key:"onPublishMessage",value:function(e){var t=e.text,n=e.richText,a=e.quickReply,r=this.props,i=r.messagesPageUri,o=r.publishMessage,s=r.stagedAttachments,c=r.removeMessageEditorStagingText;this.publishTypingMessage.cancel();o({text:t,richText:n,quickReply:a,url:i,fileAttachment:Object(y.a)(s)});c()}},{key:"onSelectAttachmentFiles",value:function(e){var t=e.files;if(t&&t.length){var n=this.props,a=n.onSelectAttachmentFile,r=n.currentConversation;a({file:t.item(0),thread:r})}}},{key:"onRemoveAttachment",value:function(e){var t=e.attachment,n=this.props,a=n.currentConversation,r=n.onRemoveAttachment;r({attachment:t,thread:a})}},{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.currentConversation,a=e.disablePublish,r=e.disableTextInput,i=e.isOnFocus,o=e.mobile,s=e.networkOffline,c=e.shouldDisableAttachment,l=e.shouldSendInputStagingEvent,d=e.showingHsBranding,p=e.stagedAttachments,m=e.toggleOnAndOffInputFocus,h=e.stagedMessage,b=e.showQuickReplyPlaceholder;return f.a.createElement(u.a,{coloring:t,chatInputChanged:this.onChatInputChanged,disabled:r,disablePublish:a,isOnFocus:i,maxAttachmentFileSize:O.b,mobile:o,networkOffline:s,onSelectAttachmentFiles:this.onSelectAttachmentFiles,onRemoveAttachment:this.onRemoveAttachment,publishMessage:this.onPublishMessage,shouldDisableAttachment:c,showingHsBranding:d,stagedAttachments:p,stagedMessageEditorText:h,supportsAttachments:Object(g.isPersistedThread)(n),toggleOnAndOffInputFocus:m,fileTypes:x.a,showQuickReplyPlaceholder:b,shouldSendInputStagingEvent:l,inputStaging:this.inputStagingEvent})}}]);return t}(h.PureComponent);k.displayName="MessageEditorWrapper";k.propTypes={closeInitialMessageBubble:m.a.func.isRequired,coloring:Object(v.a)("ColoringRecord").isRequired,currentConversation:Object(v.a)("Thread"),disablePublish:m.a.bool.isRequired,disableTextInput:m.a.bool.isRequired,inputStagingEvent:m.a.func,isOnFocus:m.a.bool.isRequired,messagesPageUri:m.a.string,mobile:m.a.bool,networkOffline:m.a.bool.isRequired,onRemoveAttachment:m.a.func.isRequired,onSelectAttachmentFile:m.a.func.isRequired,publishMessage:m.a.func.isRequired,publishTypingMessage:m.a.func.isRequired,removeMessageEditorStagingText:m.a.func.isRequired,setMessageEditorStagingText:m.a.func.isRequired,shouldDisableAttachment:m.a.bool,shouldSendInputStagingEvent:m.a.bool.isRequired,showInitialMessageBubble:m.a.bool.isRequired,showQuickReplyPlaceholder:m.a.bool.isRequired,showingHsBranding:m.a.bool.isRequired,stagedAttachments:m.a.instanceOf(j.List),stagedMessage:m.a.string,toggleOnAndOffInputFocus:m.a.func};t.a=k},wID2:function(e,t,n){var a=n("QhUm");function r(e){return a(this,e).has(e)}e.exports=r},wn0x:function(e,t,n){"use strict";n.r(t);n.d(t,"getMessageId",function(){return o});var a=n("MBJP"),r=n("JGJA"),i=n("OmJX"),o=Object(a.a)(i.a,Object(r.a)("id"))},wy0V:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("Zsd8"),r=n("kT9C"),i=Object(a.createAction)(r.b,function(e){return{currentUrl:e.currentUrl,threadId:e.threadId}})},xAl4:function(e,t,n){"use strict";n.r(t);n.d(t,"uploadAttachmentClient",function(){return r});var a=n("SOdg"),r=function(e){var t=e.formData,n=e.uploadUrl,r=e.onProgress,i=void 0===r?function(){}:r;return a.a.post(n,{headers:{"content-type":!1},data:t,timeout:0,withXhr:function(e){e.upload.addEventListener("progress",i,!1)}})}},xM7V:function(e,t,n){"use strict";var a=n("n4QB"),r=n("2OBk"),i=n("OdFI"),o=n("9di4"),s=n("QYOI"),c=n("p5BV"),u=function(e){Object(o.a)(t,e);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,t);return Object(r.a)(this,Object(i.a)(t).call(this,Object.assign({},e,{localId:Object(c.generateIdForFile)({file:e.file,timestamp:Date.now()})})))}return t}(Object(s.Record)({file:null,localId:"",fileId:-1,uploadProgress:0},"FileUploadRecord"));t.a=u},xP7N:function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},xYYH:function(e,t,n){"use strict";n.r(t);n.d(t,"isUploadCompleted",function(){return r});var a=n("A3yT"),r=function(e){return-1!==Object(a.getFileId)(e)}},xePV:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("JGJA"),r=Object(a.a)("fileUploadsErrors")},xzMr:function(e,t,n){"use strict";var a=n("QYOI"),r=n("eP/i"),i=Object(a.Record)({width:"auto",minHeight:36,borderColor:r.h,whiteSpace:"normal",lineHeight:"1rem",color:r.h},"QuickReplyTheme");t.a=i},yynV:function(e,t,n){"use strict";n.r(t);var a,r=n("QYOI"),i=n("BW+T"),o=n.n(i),s=n("0IK8"),c=function(e,t){return Boolean(t[Object(s.getType)(e)])},u=n("UG02"),l=n("GzqH"),d=Object(r.Record)((a={},Object(u.a)(a,l.b,l.a),Object(u.a)(a,"timestamp",null),Object(u.a)(a,"id",null),a),"DateMessage"),p=n("E7sj"),m=n.n(p),h=function(e,t){var n=m.a.moment(Object(s.getTimestamp)(e)),a=m.a.moment(Object(s.getTimestamp)(t));return!n.isSame(a,"day")},f=function(e,t,n){return!(!t&&!n)&&Boolean(Object(s.getTimestamp)(e)&&(!t||h(t,e)))},b=n("eoCu");n.d(t,"insertDatesIntoMessageList",function(){return v});var g=o()(d,function(e){return e.id}),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.reduce(function(a,r,i){var o=i>0?e.get(i-1):void 0;f(r,o,n)&&c(r,t)&&(a=a.push(g({id:Object(b.a)(r)+"-date",timestamp:Object(s.getTimestamp)(r)})));return a.push(r)},Object(r.List)())}},z96q:function(e,t,n){"use strict";n.r(t);n.d(t,"sendVisitorEmailAddress",function(){return r});var a=n("VYoM");function r(e){var t=e.threadId,n=e.email,r=e.sessionId,i=e.hubspotUtk;return a.a.post("livechat-public/v1/visitor/public",{query:{threadId:t,email:n,sessionId:r,hubspotUtk:i}})}},zB5l:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("MBJP"),r=n("KSjU"),i=n("xk3e"),o=Object(a.a)([i.getAssignedResponderInWidget],function(e){return Boolean(e&&Object(r.a)(e))})},zZL2:function(e,t,n){"use strict";n.r(t);n.d(t,"getHubspotUtk",function(){return o});var a=n("MBJP"),r=n("iz7f"),i=n("4Brc"),o=Object(a.a)(i.a,function(e){return Object(r.getHubspotUtk)(e)})}}]);
//# sourceMappingURL=threadview-utv.js.map